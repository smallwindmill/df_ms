(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{173:function(e,t){},195:function(e,t,a){e.exports=a(422)},200:function(e,t,a){},201:function(e,t,a){},414:function(e,t){},415:function(e,t){},422:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(40),i=a.n(l),o=(a(200),a(6)),s=a(7),c=a(9),d=a(8),u=a(10),m=(a(201),a(74)),p=a(67);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var g=a(4),h=a(21),f=a.n(h),y=a(125),b=a.n(y),E=a(177),v=a.n(E),S=a(178),w=a.n(S),k=a(15),x=a.n(k),P=a(22),C=a.n(P),N=a(27),O=a.n(N),D=a(38),T=a.n(D),I=a(39),j=a.n(I),M=a(30),B=a.n(M),W=a(14),q=a.n(W),F=a(176),A=a.n(F),R=a(175),U=a.n(R),L=a(66),H=a.n(L),z=function(e){function t(e){return Object(o.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.open,a=e.title,n=e.content,l=e.closeFun,i=e.sureFun,o=(e.cancelFun,e.ifAutoClose),s=e.ifInfo,c=e.cancelText,d=e.sureText,u=e.classes;return r.a.createElement("div",null,r.a.createElement(C.a,{open:t||!1,className:u.confirm+" myConfirm",onClose:o?function(){}:l,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(O.a,{id:"alert-dialog-title"},s?r.a.createElement(H.a,{fontSize:"large",color:"primary",style:{marginBottom:"-9px",marginRight:"3px"}}):r.a.createElement(U.a,{style:{marginBottom:"-9px",marginRight:"3px"},fontSize:"large",color:"error"}),a),r.a.createElement(T.a,{style:{minWidth:"300px"}},r.a.createElement(A.a,{id:"alert-dialog-description",dangerouslySetInnerHTML:{__html:n}})),r.a.createElement(j.a,null,r.a.createElement(x.a,{onClick:l,color:"primary"},c||"\u53d6\u6d88"),r.a.createElement(x.a,{onClick:function(){l(),i&&i()},color:"primary",autoFocus:!0},d||"\u786e\u5b9a"))))}}]),t}(r.a.Component),_=Object(g.withStyles)(function(e){return{confirm:{marginTop:"-20vh"}}})(z),J="http://"+window.location.hostname+":2030/produceMS",K={server:{login:J+"/login",queryMessage:J+"/queryMessage",markMessageRead:J+"/markMessageRead",listSystemUser:J+"/listSystemUser",addSystemUser:J+"/addSystemUser",listSystemUserByName:J+"/listSystemUserByName",listSystemUserByType:J+"/listSystemUserByType",updateSystemUser:J+"/updateSystemUser",deleteSystemUser:J+"/deleteSystemUser",listAllUserPower:J+"/listAllUserPower",listAllUserPowerByName:J+"/listAllUserPowerByName",setUserPower:J+"/setUserPower",listAllTemplate:J+"/listAllTemplate",addTemplate:J+"/addTemplate",updateTemplate:J+"/updateTemplate",deleteTemplate:J+"/deleteTemplate",listAllEquipment:J+"/listAllEquipment",addEquipment:J+"/addEquipment",updateEquipment:J+"/updateEquipment",deleteEquipment:J+"/deleteEquipment",uploadExcelForAddIndent:J+"/uploadExcelForAddIndent",listAllIndentByDate:J+"/listAllIndentByDate",updateIndentInfo:J+"/updateIndentInfo",deleteIndent:J+"/deleteIndent",listAllFactor:J+"/listAllFactor",updateFactor:J+"/updateFactor",listIndentById:J+"/listIndentById",listAllIndentStatusByDate:J+"/listAllIndentStatusByDate",queryWorkHourByDate:J+"/queryWorkHourByDate",queryProcedureWorkTime:J+"/queryProcedureWorkHourByDate",queryWorkTimeForUser:J+"/queryWorkHourForUser",queryWorkTimeForEquipment:J+"/queryWorkHourForEquipment",queryUserProgram:J+"/queryUserProgram",queryEquipmentProgram:J+"/queryEquipmentProgram",queryEqWorkTimeWithIndentID:J+"/queryEqWorkTimeWithIndentID",exportTimeIndentServer:J+"/exportAllIndentStatusByDate",exportIndentMatchTemplete:J+"/exportIndentMatchTemplete",exportWorkHourByDate:J+"/exportWorkHourByDate",exportProcedureWorkTime:J+"/exportProcedureWorkHourByDate",listAllIndent:J+"/listAllIndent",queryAudioTokenID:J+"/queryAudioTokenID",listShowPageData:J+"/listShowPageData",queryProcedureInfo:J+"/queryProcedureInfo",queryDutyProcedureByStatus:J+"/queryDutyProcedureByStatus",queryDutyProcedureById:J+"/queryDutyProcedureById",updateDutyProcedureStatus:J+"/updateDutyProcedureStatus",addProcedureInfo:J+"/addProcedureInfo",deleteProcedureDetail:J+"/deleteProcedureDetail",updateDutyProcedureDetailStatus:J+"/updateDutyProcedureDetailStatus",recycleTemplate:J+"/recycleTemplate",recycleIndent:J+"/recycleIndent",queryWorkCalendar:J+"/queryWorkCalendar",updateWorkCalendar:J+"/updateWorkCalendar"},baiduAudioAPI:{id:"EPZZcrsFYYPUPqhDiq6APbKZ",secret:"BGyMaGYUAiFoCdB71mmxtNIYRGmH7Myg"},templete:{indentUrl:"/produceMSF/assets/\u8ba2\u5355\u4e0a\u4f20\u6587\u4ef6\u6a21\u677f.xlsx"},changeToJson:function(e){return JSON.parse(e)},changeToStr:function(e){return JSON.stringify(e)},pageChangeNum:window.outerHeight>=1e3?13:window.outerHeight<900?7:10,indentPageNum:100},V=Object(g.withStyles)(function(e){return{root:{borderBottom:"1px solid ".concat(e.palette.divider),margin:0,padding:2*e.spacing.unit},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.children,a=e.classes,n=e.onClose;return r.a.createElement(O.a,{disableTypography:!0,className:a.root},r.a.createElement(q.a,{variant:"h6"},t),n?r.a.createElement(f.a,{"aria-label":"Close",className:a.closeButton,onClick:n},r.a.createElement(B.a,null)):null)}),X=Object(g.withStyles)(function(e){return{root:{margin:0,padding:2*e.spacing.unit}}})(T.a),Y=Object(g.withStyles)(function(e){return{root:{borderTop:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing.unit}}})(j.a),Q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).updateBarData=function(e,t){a.setState({userName:e||""}),void 0!=t&&a.setState({mailMessage:t}),0==a.state.firstLoad&&(a.state.mailMessage.length&&setTimeout(a.mailClick,1500),a.state.messageTimer=setInterval(a.queryMessage,2e4)),a.setState({firstLoad:++a.state.firstLoad})},a.queryMessage=function(){var e=K.changeToJson(localStorage.user||"{}").userID,t=K.changeToJson(localStorage.user||"{}").type;e&&fetch(K.server.queryMessage+"?userID="+e+"&userType="+t).then(function(e){return e.json()}).then(function(e){200==e.code&&a.updateBarData(e.results.userName,e.results.message)}).catch(function(e){console.log(e)})},a.mailClick=function(){a.queryMessage(),a.setState({open:!0})},a.handleClose=function(e){document.querySelector(".mailDialog").className+=1==e?" childScrollReturnRight":" childScrollReturnLeft",setTimeout(function(){a.setState({open:!1})},500)},a.logoutClick=function(){a.setState({logOut:!0}),sessionStorage.path=""},a.logoutSureFun=function(){a.setState({logOut:!1}),a.state.messageTimer&&clearInterval(a.state.messageTimer),a.props.changeLoginData(""),a.setState({firstLoad:0}),localStorage.user="",window.ReactHistory.push("/produceMSF/login")},a.logoutClickClose=function(){a.setState({logOut:!1})},a.markMessage=function(e,t){fetch(K.server.markMessageRead,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})}).then(function(e){return e.json()}).then(function(e){200==e.code?(a.state.mailMessage.splice(t,1),a.setState({mailMessage:a.state.mailMessage})):a.props.tips(e.msg)}).catch(function(e){console.log(e),a.props.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.state={firstLoad:0,open:!1,mailMessage:[],logOut:!1,title:"\u63d0\u793a",content:"\u786e\u5b9a\u6ce8\u9500\u767b\u5f55\u5417\uff1f"},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.queryMessage()}},{key:"componentWillUnmount",value:function(){this.state.messageTimer&&clearInterval(this.state.messageTimer)}},{key:"componentWillUnmount",value:function(){}},{key:"mailDialog",value:function(){var e=this,t={containerUl:{paddingRight:"2rem",marginTop:0},tipLi:{padding:"0.35rem 0"},mailDialogContent:{width:"090vw",height:"90vh",overflowY:"auto",fontSize:"24px"},fontSize:{fontSize:"24px"}};return r.a.createElement(C.a,{onClose:this.handleClose,"aria-labelledby":"customized-dialog-title",open:this.state.open,style:{marginTop:".5rem"},className:"mailDialog childScroll"},r.a.createElement(V,{id:"customized-dialog-title",onClose:this.handleClose},r.a.createElement("span",{style:{fontWeight:"bold"}},"\u672a\u8bfb\u6d88\u606f")," \xa0\xa0",r.a.createElement("small",null,"\u5171",this.state.mailMessage.length,"\u6761")),r.a.createElement(X,{style:t.mailDialogContent},r.a.createElement("ul",{style:t.containerUl},this.state.mailMessage.map(function(a,n){return r.a.createElement("li",{style:t.tipLi,className:"mail-message",key:"mailLi"+n},r.a.createElement("span",null,n+1,". "),r.a.createElement("span",{className:"text-blue btn",title:a.from},a.fromName),r.a.createElement("span",null,"\u53d1\u6765\u6d88\u606f: "+a.content.split("//%//")[0]," ",a.content.split("//%//")[1]?r.a.createElement("i",{className:"small text-blue"},a.content.split("//%//")[1]):""," "),r.a.createElement("small",{style:{paddingLeft:"1rem"}},a.time?new Date(a.time).format("yyyy-MM-dd hh:mm:ss"):""),r.a.createElement("span",{className:"text-red pointer",style:{marginLeft:"1rem",textAlign:"right"},onClick:function(){e.markMessage(a,n)}},"\u5df2\u8bfb "))})),0==this.state.mailMessage.length&&r.a.createElement("ul",null,r.a.createElement("li",{className:"mail-message text-blue"},"\u6682\u65e0\u6d88\u606f"))),r.a.createElement(Y,null,r.a.createElement(x.a,{onClick:function(){return e.handleClose(1)},color:"primary",style:t.fontSize},"\u6211\u77e5\u9053\u4e86")))}},{key:"render",value:function(){var e=this.state,t=e.userName,a=e.mailMessage,n=this.props.user;return r.a.createElement("header",{className:"App-header"},r.a.createElement("div",{id:"logo",style:{height:"66px"}},r.a.createElement("div",{style:{display:"inline-block",height:"75%",marginTop:"8px",verticalAlign:"top"}},r.a.createElement("img",{style:{height:"100%"},src:"./logo.png"})),r.a.createElement("div",{style:{display:"inline-block",lineHeight:"66px",verticalAlign:"top",paddingLeft:".5rem"}},"\u6781\u8da3\u79d1\u6280\u751f\u4ea7\u7ba1\u7406\u7cfb\u7edf")),r.a.createElement("div",{id:"messagebar"},!!t&&r.a.createElement("div",{className:""},"\u6b22\u8fce\u4f60\uff0c",r.a.createElement("span",{className:"text-blue",style:{padding:"0 .2rem"}},t),1==n.type?"[ \u4e3b\u7ba1 ]":2==n.type?"[ \u9886\u73ed ]":3==n.type?"[ \u7ec4\u957f ]":"[ \u5458\u5de5 ]",r.a.createElement("span",{color:"const",style:{display:t?"ff":"none",padding:"0 2rem 0 1.2rem"},id:"logout",className:"btn text-red ",onClick:this.logoutClick},"\u6ce8\u9500"),r.a.createElement(f.a,{fontSize:"large",color:"inherit",style:{marginTop:"-3px"},onClick:this.mailClick},r.a.createElement(b.a,{badgeContent:a.length,color:"secondary"},r.a.createElement(v.a,null))),r.a.createElement(f.a,{color:"inherit",style:{display:a.nnlength?"ff":"none"}},r.a.createElement(b.a,{badgeContent:17,color:"secondary"},r.a.createElement(w.a,null))),this.mailDialog()),r.a.createElement(_,{open:this.state.logOut,title:this.state.title,content:this.state.content,ifInfo:!0,closeFun:this.logoutClickClose,sureFun:this.logoutSureFun})))}}]),t}(r.a.Component),$=a(121),G=a.n($),Z=a(120),ee=a.n(Z),te=a(182),ae=a.n(te),ne=a(180),re=a.n(ne),le=a(181),ie=a.n(le),oe=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).changeMenuConfig=function(){if(!a.props.menuConfig)return!1;var e=a.props.menuConfig.type,t=a.props.menuConfig.power;a.state.menus[0].power=t.login,a.state.menus[1].power=t.handleTemplate,a.state.menus[3].power=t.handleIndent,a.state.menus[4].power=t.handleWorkhour,a.state.menus[5].power=t.showpage,a.state.menus[6].power=t.captain,1==e||2==e?(a.state.menus[2].power=!0,a.state.menus[7].power=!0,a.state.menus[8].power=!0):(a.state.menus[2].power=!1,a.state.menus[7].power=!1,a.state.menus[8].power=!1),a.setState({menus:a.state.menus})};return a.state={open:!0,open0:!1,open1:!1,open2:!1,open3:!1,open4:!1,open5:!1,open6:!1,menus:[{name:"\u7528\u6237\u7ba1\u7406",route:"user",children:[{name:"\u67e5\u8be2\u7528\u6237",route:"user/queryUser"},{name:"\u5173\u8054\u67e5\u8be2\u7528\u6237\u4e0e\u5bf9\u5e94\u6743\u9650",route:"user/QueryUserAndPower"}]},{name:"\u6a21\u677f\u7ba1\u7406",route:"template"},{name:"\u8bbe\u5907\u7ba1\u7406",route:"equipment"},{name:"\u8ba2\u5355\u7ba1\u7406",route:"handleIndent",children:[{name:"\u6dfb\u52a0\u8ba2\u5355",route:"handleIndent/addIndent"},{name:"\u67e5\u8be2\u8ba2\u5355\u72b6\u6001",route:"handleIndent/queryIndentStatus"},{name:"\u5bfc\u51fa\u751f\u4ea7\u4fe1\u606f",route:"handleIndent/exportProduceIndent"}]},{name:"\u5de5\u65f6\u7ba1\u7406",route:"workTime",children:[{name:"\u67e5\u8be2\u6743\u6570",route:"workTime/queryFactor"},{name:"\u8ba2\u5355\u5de5\u65f6",route:"workTime/queryWorkTime"},{name:"\u6d41\u7a0b\u5de5\u65f6",route:"workTime/queryWorkTimeForProcedure"},{name:"\u5458\u5de5\u5de5\u65f6",route:"workTime/queryWorkTimeForUser"},{name:"\u8bbe\u5907\u5de5\u65f6",route:"workTime/queryWorkTimeForEquipment"}]},{name:"\u751f\u4ea7\u770b\u677f",route:"produceShowPage"},{name:"\u8d1f\u8d23\u7684\u8ba2\u5355\u64cd\u4f5c\uff08\u7ec4\u957f\uff09",route:"dutyIndent"},{name:"\u56de\u6536\u7ad9",route:"recycle",children:[{name:"\u6a21\u677f",route:"recycle/template"},{name:"\u8ba2\u5355",route:"recycle/indent"}]},{name:"\u5de5\u4f5c\u65e5\u5386",route:"calendar"}]},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.changeMenuConfig()}},{key:"componentDidMount",value:function(){setTimeout(function(){if(sessionStorage.path&&-1==sessionStorage.path.indexOf("login"))window.ReactHistory.push(sessionStorage.path);else{var e=document.querySelectorAll("#leftMenu .nav-router")[0];e&&e.click()}},500),window.onunload=function(e){e.returnValue="dfdf";var t=window.ReactHistory?window.ReactHistory.location.pathname:"";sessionStorage.path=t,alert(t)}}},{key:"componentWillUnmount",value:function(){}},{key:"managerMenuData",value:function(e){var t=this,a=this,n=window.ReactHistory?window.ReactHistory.location.pathname:"";return e.map(function(e,l){return 0==e.power?"":r.a.createElement("div",{key:l},r.a.createElement(ee.a,{button:!0,className:new RegExp(e.route+"$").test(n)?"bg-secondary":"",onClick:t.handleClick.bind(t,e.children?"open"+l:"")},r.a.createElement(m.b,{to:"/produceMSF/"+(e.route?e.route:"/"),className:"nav-router"},e.name),e.children?a.state["open"+l]||new RegExp(e.route).test(n)?r.a.createElement(re.a,null):r.a.createElement(ie.a,null):""),e.children?r.a.createElement(ae.a,{in:t.state["open"+l]||new RegExp(e.route).test(n),timeout:"auto",unmountOnExit:!0},r.a.createElement(G.a,{component:"div",disablePadding:!0,className:"secondaryList"},a.managerMenuData(e.children))):"")})}},{key:"handleClick",value:function(e,t){switch(t.preventDefault(),e){case"open0":this.setState(function(e){return{open0:!e.open0}});break;case"open1":this.setState(function(e){return{open1:!e.open1}});break;case"open2":this.setState(function(e){return{open2:!e.open2}});break;case"open3":this.setState(function(e){return{open3:!e.open3}});break;case"open4":this.setState(function(e){return{open4:!e.open4}});break;case"open5":this.setState(function(e){return{open5:!e.open5}});break;case"open6":this.setState(function(e){return{open6:!e.open6}});break;default:}}},{key:"render",value:function(){var e=this.state.menus;return this.managerMenuData(e)}}]),t}(r.a.Component),se=Object(g.withStyles)(function(e){return{root:{width:"20%",maxWidth:360,backgroundColor:"white"},nested:{paddingLeft:4*e.spacing.unit}}})(oe),ce=(a(5),a(17)),de=a.n(ce),ue=a(3),me=a.n(ue),pe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).componentWillMount=function(){},a.componentWillUnmount=function(){},a.state={age:"",multiline:"Controlled",currency:"EUR",tipsOpen:!1},a.loginClick=function(){var e=a.state,t=e.name,n=e.password;t?(a.props.loading(!0),fetch(K.server.login,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:t,pwd:n||""})}).then(function(e){return e.json()}).then(function(e){if(200!=e.code)return a.props.tips(e.msg),void a.props.loading(!1);setTimeout(function(){a.props.changeLoginData(e.results),a.props.loading(!1),delete e.results.power,delete e.results.messages,localStorage.user=K.changeToStr(e.results),a.props.tips("\u767b\u9646\u6210\u529f"),setTimeout(function(){a.props.judgeCalendar()},1500)},1e3),window.ReactHistory.push("/produceMSF/Way")}).catch(function(e){a.props.loading(!1),a.props.tips("\u4e0e\u670d\u52a1\u5668\u8fde\u63a5\u5931\u8d25\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})):a.props.tips("\u8bf7\u5148\u586b\u5199\u7528\u6237\u5de5\u53f7")},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;this.state.tipsOpen;return r.a.createElement("div",null,r.a.createElement("form",{className:"absoluteCenter "+t.container,noValidate:!0,autoComplete:"off"},r.a.createElement(me.a,{container:!0,spacing:24},r.a.createElement(me.a,{item:!0,xs:12},r.a.createElement(de.a,{fullWidth:!0,label:"\u7528\u6237\u5de5\u53f7",className:t.textField,onChange:function(t){t.persist(),e.setState({name:t.target.value})},margin:"normal"})),r.a.createElement(me.a,{item:!0,xs:12},r.a.createElement(de.a,{fullWidth:!0,label:"\u5bc6\u7801",className:t.textField,type:"password",autoComplete:"current-password",onChange:function(t){t.persist(),e.setState({password:t.target.value})},margin:"normal"})),r.a.createElement(me.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"contained","aria-label":"Add",style:{marginRight:"1rem",borderRadius:"3px",overFlow:"hidden"},color:"primary",className:t.button,onClick:this.loginClick},"\u767b\u5f55")))),r.a.createElement("img",{className:"loginBg",src:"./bg.png"}),r.a.createElement("img",{className:"loginBgDir",src:"./bg.png"}),r.a.createElement("img",{className:"loginBgCen",src:"./bg.png"}))}}]),t}(r.a.Component),ge=Object(g.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:200},dense:{marginTop:19},menu:{width:200}}})(pe),he=a(46),fe=a(26),ye=a.n(fe),be=a(29),Ee=a.n(be),ve=a(1),Se=a.n(ve),we=a(31),ke=a.n(we),xe=a(37),Pe=a.n(xe),Ce=a(16),Ne=a.n(Ce),Oe=a(28),De=a.n(Oe),Te=a(25),Ie=a.n(Te),je=a(24),Me=a(23),Be=a.n(Me);var We=[{id:"name",numeric:!1,disablePadding:!0,label:"\u5e8f\u53f7"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u5de5\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u7528\u6237\u540d"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u5bc6\u7801"},{id:"type",numeric:!1,disablePadding:!0,label:"\u7528\u6237\u7c7b\u578b"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u64cd\u4f5c"}],qe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props;e.order,e.orderBy,e.numSelected,e.rowCount;return r.a.createElement(ke.a,null,r.a.createElement(Ne.a,null,We.map(function(e,t){return r.a.createElement(Se.a,{key:"EnhancedTableHead2"+t,align:"center",padding:e.disablePadding?"none":"default"},e.label)},this)))}}]),t}(r.a.Component),Fe=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={open:!1,userType:[{value:4,text:"\u751f\u4ea7\u5458\u5de5"},{value:3,text:"\u7ec4\u957f"},{value:2,text:"\u9886\u73ed"},{value:1,text:"\u4e3b\u7ba1"}],userTypeArr:[{value:0,text:"\u5168\u90e8"},{value:1,text:"\u4e3b\u7ba1"},{value:2,text:"\u9886\u73ed"},{value:3,text:"\u7ec4\u957f"},{value:4,text:"\u751f\u4ea7\u5458\u5de5"}],selectUserType:4},a.handleClose=function(){a.setState({open:!1})},a.addUser=function(e){0==e?(a.setState({open:!0,serverURL:K.server.addSystemUser,ifAdd:1}),a.setState({selectUserType:4,userName:"",userID:"",pwd:""})):1==e&&a.setState({open:!0,serverURL:K.server.updateSystemUser,ifAdd:0})},a.addUserSure=function(){var e=a.state,t=e.selectUserType,n=e.userID,r=e.userName,l=e.pwd,i=e.ifAdd;n?9==n.length?r?4==t||l?(window.loading(!0),fetch(a.state.serverURL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:t,userID:n,userName:r,pwd:l})}).then(function(e){return e.json()}).then(function(e){if(200!=e.code)return a.tips(e.msg),void window.loading(!1);if(i&&e.results){var o=!0,s=!1,c=void 0;try{for(var d,u=e.results[Symbol.iterator]();!(o=(d=u.next()).done);o=!0){var m=d.value;a.props.changeUserData(m,1)}}catch(p){s=!0,c=p}finally{try{o||null==u.return||u.return()}finally{if(s)throw c}}}else a.state.selectedData&&(a.state.selectedData.userName=r,a.state.selectedData.userID=n,a.state.selectedData.type=t,a.state.selectedData.pwd=l),a.props.changeUserData("",2);a.setState({open:!1}),window.loading(!1)}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5"),window.loading(!1)})):a.tips("\u8bf7\u8bbe\u7f6e\u7528\u6237\u5bc6\u7801"):a.tips("\u7528\u6237\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"):a.tips("\u8bf7\u8f93\u5165\u4e5d\u4f4d\u7528\u6237\u5de5\u53f7"):a.tips("\u7528\u6237\u5de5\u53f7\u4e0d\u80fd\u4e3a\u7a7a")},a.updateUserModal=function(e,t){a.setState({selectUserType:t.type||4,userName:t.userName,userID:t.userID,pwd:t.pwd}),a.setState({selectedData:t}),a.addUser(e)},a.tips=a.props.tips,a.addUserModal=function(){var e=a.state.ifAdd,t=Object(g.withStyles)(function(e){return{root:{borderBottom:"1px solid ".concat(e.palette.divider),margin:0,padding:2*e.spacing.unit},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.children,a=e.classes,n=e.onClose;return r.a.createElement(O.a,{disableTypography:!0,className:a.root},r.a.createElement(q.a,{variant:"h6"},t),n?r.a.createElement(f.a,{"aria-label":"Close",className:a.closeButton,onClick:n},r.a.createElement(B.a,null)):null)});return r.a.createElement(C.a,{"aria-labelledby":"customized-dialog-title",open:a.state.open,style:{marginTop:"-10rem"}},r.a.createElement(t,{id:"customized-dialog-title",onClose:a.handleClose},e?"\u6dfb\u52a0\u7528\u6237":"\u66f4\u65b0\u7528\u6237\u4fe1\u606f"),r.a.createElement("form",{className:"".container,noValidate:!0,autoComplete:"off",style:{padding:"2rem 6rem 3rem"}},r.a.createElement(me.a,{container:!0,spacing:24},r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:0}},r.a.createElement(de.a,{fullWidth:!0,style:{marginTop:0},label:"\u8bf7\u9009\u62e9\u7528\u6237\u89d2\u8272",select:!0,className:"".textField,autoComplete:"current-password",margin:"normal",InputLabelProps:{shrink:!0},value:a.state.selectUserType,onChange:function(e){return a.setState({selectUserType:e.target.value})},SelectProps:{native:!0,MenuProps:{className:"".menu}}},a.state.userType.map(function(e){return r.a.createElement("option",{key:"option"+e.value,value:e.value},e.text)}))),a.state.ifAdd?r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:0}},r.a.createElement(de.a,{fullWidth:!0,style:{marginTop:0},placeholder:"\u8bf7\u8f93\u5165\u4e5d\u4f4d\u7528\u6237\u5de5\u53f7",label:"\u7528\u6237\u5de5\u53f7",className:"".textField,value:a.state.userID,disabled:!a.state.ifAdd,onChange:function(e){return a.setState({userID:e.target.value})},margin:"normal",InputLabelProps:{shrink:!0}})):"",r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:0}},r.a.createElement(de.a,{fullWidth:!0,style:{marginTop:0},placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u59d3\u540d",label:"\u7528\u6237\u59d3\u540d",value:a.state.userName,onChange:function(e){return a.setState({userName:e.target.value})},className:"".textField,margin:"normal",InputLabelProps:{shrink:!0}})),!(!a.state.selectUserType||4==a.state.selectUserType)&&r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:0}},r.a.createElement(de.a,{fullWidth:!0,style:{marginTop:0},placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",label:"\u5bc6\u7801",type:"password",className:"".textField,value:a.state.pwd,onChange:function(e){return a.setState({pwd:e.target.value})},autoComplete:"current-password",margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement(me.a,{item:!0,xs:12,align:"center"},r.a.createElement(x.a,{variant:"outlined",onClick:a.addUserSure,style:{marginRight:"1rem"},color:"primary",className:"".button},"\u63d0\u4ea4"),r.a.createElement(x.a,{variant:"outlined",style:{marginRight:"1rem"},color:"secondary",className:"".button},"\u91cd\u7f6e")))))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state.userTypeArr;return r.a.createElement("div",null,r.a.createElement(De.a,null,r.a.createElement(q.a,{variant:"h6",id:"tableTitle",align:"left"},"\u4eba\u5458\u7ba1\u7406")),r.a.createElement(me.a,{container:!0,align:"right",style:{padding:"1rem 1.2rem"}},r.a.createElement(me.a,{item:!0,xs:6,align:"left",className:"filterTool small",style:{margin:"1rem 0"}},r.a.createElement("span",{className:"blod"},"\u7c7b\u578b"),t.map(function(t,a){return r.a.createElement("span",{key:a,className:"btn-sm "+(0==a?"bg-primary":""),onClick:function(a){return e.props.queryUserByType(a,t)}}," ",t.text)})),r.a.createElement(me.a,{item:!0,xs:6},r.a.createElement("span",{className:"btn text-blue",onClick:function(){return e.addUser(0)},style:{margin:"0rem 0 4rem",padding:"0 1.2rem"}},"\u6dfb\u52a0\u7528\u6237"),r.a.createElement(de.a,{style:{marginTop:0,marginLeft:"1rem"},placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u79f0\u6216ID\u67e5\u8be2",className:"".textField,type:"text",onChange:function(t){return e.props.queryByKeyword(t)},margin:"normal",InputLabelProps:{shrink:!0}}))),this.addUserModal())}}]),t}(r.a.Component),Ae=function(e){function t(){var e,a,n;Object(o.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state=(a={open:!1,order:"asc",orderBy:"calories",selected:[],data:[],page:0,rowsPerPage:K.pageChangeNum||13},Object(he.a)(a,"open",!0),Object(he.a)(a,"confirmOpen",!1),a),n.initLoadData=function(){fetch(K.server.listSystemUser).then(function(e){return e.json()}).then(function(e){n.setState({pageUserType:K.changeToJson(localStorage.user).type}),n.changeUserData(e.results||[])}).catch(function(e){return n.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},n.handleSelectAllClick=function(e){e.target.checked?n.setState(function(e){return{selected:e.data.map(function(e){return e.userID})}}):n.setState({selected:[]})},n.handleChangePage=function(e,t){n.setState({page:t})},n.handleChangeRowsPerPage=function(e){n.setState({rowsPerPage:e.target.value})},n.updateUser=function(e,t){n.refs.modalMethod.updateUserModal(1,e),n.setState({editNum:t})},n.deleteUser=function(e,t){console.log(e);n.setState({confirmOpen:!0,title:"\u786e\u8ba4",content:"\u5220\u9664\u7528\u6237\u540e\u53ef\u80fd\u4f1a\u4f7f\u90e8\u5206\u8ba2\u5355\u7684\u4eba\u5458\u5931\u6548\uff0c\u786e\u5b9a\u5220\u9664\u7528\u6237\u5417<span class='text-blue'>"+e.userName+"</span>\u5417\uff1f",deleteFun:function(){fetch(K.server.deleteSystemUser,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:e.userID})}).then(function(e){return e.json()}).then(function(e){200==e.code?(n.state.data.splice(t,1),n.setState({data:n.state.data}),n.tips("\u5220\u9664\u4eba\u5458\u6210\u529f")):n.tips("\u5220\u9664\u4eba\u5458\u5931\u8d25")}).catch(function(e){return n.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}})},n.confirmClose=function(){n.setState({confirmOpen:!1})},n.confirmSure=function(){n.state.deleteFun&&n.state.deleteFun()},n.queryUserByType=function(e,t){e.persist();var a=!0,r=!1,l=void 0;try{for(var i,o=e.target.parentElement.children[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;s.className=s.className.replace("bg-primary","")}}catch(c){r=!0,l=c}finally{try{a||null==o.return||o.return()}finally{if(r)throw l}}e.target.className+=" bg-primary",n.state.dataBak||(n.state.dataBak=n.state.data),0==t.value?n.initLoadData():(n.state.data=n.state.dataBak.filter(function(e){return e.type==t.value}),n.setState({data:n.state.data}))},n.queryByKeyword=function(e){e.persist(),n.state.dataBak||(n.state.dataBak=n.state.userd),n.state.data=n.state.dataBak.filter(function(t){return-1!=t.userID.toUpperCase().indexOf(e.target.value.toUpperCase())||-1!=t.userName.toUpperCase().indexOf(e.target.value.toUpperCase())}),n.setState({data:n.state.data})},n.changeUserData=function(e,t){1==t?(n.state.data.push(e),n.setState({data:n.state.data})):2==t?n.setState({data:n.state.data}):n.setState({data:e}),n.state.dataBak=n.state.data},n.tips=function(e){e&&n.setState({tipInfo:e}),n.setState({tipsOpen:!0}),setTimeout(function(){n.setState({tipsOpen:!1})},4e3)},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.initLoadData()}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.data,l=a.order,i=a.orderBy,o=a.selected,s=a.rowsPerPage,c=a.page,d=a.pageUserType,u=s-Math.min(s,n.length-c*s);return r.a.createElement(Ie.a,{className:t.root,style:{padding:"0 2rem",width:"auto"}},r.a.createElement(Fe,{changeUserData:this.changeUserData,queryUserByType:this.queryUserByType,ref:"modalMethod",tips:this.tips,queryByKeyword:this.queryByKeyword}),r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(ye.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(qe,{numSelected:o.length,order:l,orderBy:i,rowCount:n.length}),r.a.createElement(Ee.a,null,n.slice(c*s,c*s+s).map(function(t,a){return r.a.createElement(Ne.a,{hover:!0,role:"checkbox",tabIndex:-1,key:"user"+a},r.a.createElement(Se.a,{align:"center"},c*s+a+1),r.a.createElement(Se.a,{align:"center"},t.userID),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},t.userName),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none",onMouseEnter:function(e){4!=t.type&&(e.target.innerHTML=t.pwd||"\u65e0")},onMouseOut:function(e){4!=t.type&&(e.target.innerHTML="******")}},4!=t.type?"*******":"\u65e0"),r.a.createElement(Se.a,{align:"center",component:"th",className:4!=t.type?"text-blue":"",scope:"row",padding:"none"},4==t.type?"\u751f\u4ea7\u5458\u5de5":3==t.type?"\u7ec4\u957f":2==t.type?"\u9886\u73ed":1==t.type?"\u4e3b\u7ba1":""),r.a.createElement(Se.a,{align:"center"},d>t.type?"\u2014\u2014":r.a.createElement("span",{className:"pointer btn text-blue",onClick:function(){return e.updateUser(t,c*s+a)}},"\u4fee\u6539"),d>t.type?"\u2014\u2014":r.a.createElement("span",{className:"pointer btn text-red",onClick:function(){return e.deleteUser(t,c*s+a)}},"\u5220\u9664")))}),u>0&&r.a.createElement(Ne.a,{style:{height:49*u}},r.a.createElement(Se.a,{colSpan:6})))),r.a.createElement(_,{open:this.state.confirmOpen,title:this.state.title,content:this.state.content,closeFun:this.confirmClose,sureFun:this.confirmSure})),r.a.createElement(Pe.a,{className:"TablePagination",component:"div",count:n.length,rowsPerPage:s,page:c,backIconButtonProps:{"aria-label":"\u4e0a\u4e00\u9875"},nextIconButtonProps:{"aria-label":"\u4e0b\u4e00\u9875"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}),r.a.createElement(Be.a,{style:{marginTop:"70px"},key:(new Date).getTime()+Math.random(),anchorOrigin:{horizontal:"center",vertical:"top"},open:this.state.tipsOpen,ContentProps:{className:"info"},message:r.a.createElement("span",{id:"message-id"},this.state.tipInfo?this.state.tipInfo:"")}))}}]),t}(r.a.Component),Re=Object(g.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}})(Ae),Ue=a(47),Le=a.n(Ue),He=a(53),ze=a.n(He),_e=a(42),Je=a.n(_e),Ke=a(45),Ve=a.n(Ke);function Xe(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var Ye=[{id:"name",numeric:!1,disablePadding:!0,label:"\u5e8f\u53f7"},{id:"name",numeric:!1,disablePadding:!1,label:"\u5de5\u53f7"},{id:"calories",numeric:!0,disablePadding:!1,label:"\u7528\u6237\u59d3\u540d"},{id:"fat",numeric:!0,disablePadding:!1,label:"\u767b\u5f55\u6743\u9650"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u64cd\u4f5c\u8ba2\u5355\u548c\u8ba2\u5355\u72b6\u6001"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u64cd\u4f5c\u8ba2\u5355\u5de5\u65f6\u8d39"},{id:"protein2",numeric:!0,disablePadding:!1,label:"\u67e5\u8be2\u6240\u6709\u8ba2\u5355"},{id:"protein2",numeric:!0,disablePadding:!1,label:"\u67e5\u770b\u751f\u4ea7\u9762\u677f"},{id:"protein3",numeric:!0,disablePadding:!1,label:"\u7ec4\u957f\u529f\u80fd"},{id:"protein4",numeric:!0,disablePadding:!1,label:"\u64cd\u4f5c"}],Qe=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props;e.order,e.orderBy,e.rowCount;return r.a.createElement(ke.a,null,r.a.createElement(Ne.a,null,Ye.map(function(e,t){return r.a.createElement(Se.a,{key:t,align:"center",padding:e.disablePadding?"none":"default"},e.label)},this)))}}]),t}(r.a.Component),$e=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={userTypeArr:[{value:0,text:"\u5168\u90e8"},{value:1,text:"\u4e3b\u7ba1"},{value:2,text:"\u9886\u73ed"},{value:3,text:"\u7ec4\u957f"},{value:4,text:"\u751f\u4ea7\u5458\u5de5"}]},a.tips=a.props.tips,a.queryByKeyword=function(e){e.persist(),fetch(K.server.listAllUserPowerByName+"?keyword="+e.target.value).then(function(e){return e.json()}).then(function(e){console.log(e),a.props.changeUserData(e.results||[])}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=this,a=this.state.userTypeArr;return r.a.createElement("div",null,r.a.createElement(De.a,null,r.a.createElement(q.a,{variant:"h6",id:"tableTitle"},"\u4eba\u5458\u6743\u9650\u67e5\u8be2")),r.a.createElement(me.a,{container:!0,align:"right",style:{padding:"1rem 1.2rem"}},r.a.createElement(me.a,{item:!0,xs:6,align:"left",className:"filterTool small",style:{margin:"1rem 0"}},r.a.createElement("span",{className:"blod"},"\u7c7b\u578b"),a.map(function(e,a){return r.a.createElement("span",{key:a,className:"btn "+(0==a?"bg-primary":""),onClick:function(a){return t.props.queryUserPowerByType(a,e)}}," ",e.text)})),r.a.createElement(me.a,{item:!0,xs:6},r.a.createElement(de.a,(e={style:{marginTop:0},placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u79f0\u67e5\u8be2",type:"text",autoComplete:!1},Object(he.a)(e,"autoComplete","current-password"),Object(he.a)(e,"margin","normal"),Object(he.a)(e,"onChange",function(e){return t.queryByKeyword(e)}),Object(he.a)(e,"InputLabelProps",{shrink:!0}),e)))))}}]),t}(r.a.Component);$e=Object(g.withStyles)(function(e){return{root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.primary.main,backgroundColor:Object(je.lighten)(e.palette.primary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.primary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.primary},title:{flex:"0 0 auto"}}})($e);var Ge=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={order:"asc",orderBy:"calories",selected:[],selectedData:{},data:[],page:0,rowsPerPage:K.pageChangeNum||13,open:!1},a.initLoadData=function(){fetch(K.server.listAllUserPower).then(function(e){return e.json()}).then(function(e){a.changeUserData(e.results||[])}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.handleRequestSort=function(e,t){var n=t,r="desc";a.state.orderBy===t&&"desc"===a.state.order&&(r="asc"),a.setState({order:r,orderBy:n})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.changeUserData=function(e,t){t?(console.log(a.state.data),a.setState({data:a.state.data}),console.log(a.state.data)):a.setState({data:e}),a.state.dataBak=a.state.data},a.handleClose=function(){a.setState({open:!1})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.updateUserPower=function(e,t){a.setState({login:e.login||0,indent:e.handleIndent||0,workhour:e.handleWorkhour||0,handleTemplate:e.handleTemplate||0,showpage:e.showpage||0,captain:e.captain||0}),a.setState({open:!0,selectedDataBak:e,selectedData:JSON.parse(JSON.stringify(e))})},a.setUserPowerSure=function(){var e=a.state,t=e.selectedData,n=e.selectedDataBak,r=a.state.selectedData,l=r.login,i=r.handleIndent,o=r.handleWorkhour,s=r.handleTemplate,c=r.showpage,d=r.captain;window.loading(!0),fetch(K.server.setUserPower,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:t.userID,login:l,handleIndent:i,handleWorkhour:o,handleTemplate:s,showpage:c,captain:d})}).then(function(e){return e.json()}).then(function(e){if(console.log(e),200!=e.code)return a.tips("\u6743\u9650\u66f4\u65b0\u5931\u8d25"),void window.loading(!1);for(var r in a.setState({open:!1}),n)n[r]=t[r];a.changeUserData("",2),a.tips("\u6743\u9650\u66f4\u65b0\u6210\u529f"),window.loading(!1)}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5"),window.loading(!1)})},a.queryUserPowerByType=function(e,t){e.persist();var n=!0,r=!1,l=void 0;try{for(var i,o=e.target.parentElement.children[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;s.className=s.className.replace("bg-primary","")}}catch(c){r=!0,l=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}e.target.className+=" bg-primary",a.state.dataBak||(a.state.dataBak=a.state.data),0==t.value?a.initLoadData():(a.state.data=a.state.dataBak.filter(function(e){return e.type==t.value}),a.setState({data:a.state.data}))},a.tips=function(e){e&&a.setState({tipInfo:e}),a.setState({tipsOpen:!0}),setTimeout(function(){a.setState({tipsOpen:!1})},4e3)},a.updateUserPowerModal=function(){var e=a.state.selectedData,t=Object(g.withStyles)(function(e){return{root:{borderBottom:"1px solid ".concat(e.palette.divider),margin:0,padding:2*e.spacing.unit},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.children,a=e.classes,n=e.onClose;return r.a.createElement(O.a,{disableTypography:!0,className:a.root},r.a.createElement(q.a,{variant:"h6"},t),n?r.a.createElement(f.a,{"aria-label":"Close",className:a.closeButton,onClick:n},r.a.createElement(B.a,null)):null)}),n=e=a.state.selectedData,l=n.login,i=n.handleIndent,o=n.handleWorkhour,s=n.handleTemplate,c=n.showpage,d=n.captain;return r.a.createElement(C.a,{"aria-labelledby":"customized-dialog-title",open:a.state.open,style:{marginTop:"-10rem"}},r.a.createElement(t,{id:"customized-dialog-title2",onClose:a.handleClose},"\u7528\u6237\u6743\u9650\u914d\u7f6e",r.a.createElement("small",null,"\xa0\xa0\xa0\xa0\xa0",!!e.userName&&""+e.userName)),r.a.createElement("form",{className:"".container,noValidate:!0,autoComplete:"off",style:{padding:"2rem 6rem 3rem"}},r.a.createElement(me.a,{container:!0,spacing:24},r.a.createElement(me.a,{item:!0,xs:6,style:{paddingTop:0}},r.a.createElement(Ve.a,{component:"legend"},"\u4eba\u5458\u7ba1\u7406"),r.a.createElement(ze.a,{"aria-label":"\u4eba\u5458\u7ba1\u7406",style:{flexDirection:"row"},name:"login",value:(l||0)+"",onChange:function(t){t.persist(),e.login="0"==t.target.value?0:1,a.setState({selectedData:e})}},r.a.createElement(Je.a,{value:"0",control:r.a.createElement(Le.a,{color:"default"}),label:"\u5173\u95ed"}),r.a.createElement(Je.a,{value:"1",control:r.a.createElement(Le.a,{color:"primary"}),label:"\u6253\u5f00"}))),r.a.createElement(me.a,{item:!0,xs:6,style:{paddingTop:0}},r.a.createElement(Ve.a,{component:"legend"},"\u64cd\u4f5c\u6a21\u677f"),r.a.createElement(ze.a,{"aria-label":"Gender",style:{flexDirection:"row"},name:"login",value:(i||0)+"",onChange:function(t){t.persist(),e.handleIndent="0"==t.target.value?0:1,a.setState({selectedData:e})}},r.a.createElement(Je.a,{value:"0",control:r.a.createElement(Le.a,{color:"default"}),label:"\u5173\u95ed"}),r.a.createElement(Je.a,{value:"1",control:r.a.createElement(Le.a,{color:"primary"}),label:"\u6253\u5f00"}))),r.a.createElement(me.a,{item:!0,xs:6,style:{paddingTop:0}},r.a.createElement(Ve.a,{component:"legend"},"\u64cd\u4f5c\u8ba2\u5355\u5de5\u65f6"),r.a.createElement(ze.a,{"aria-label":"Gender",style:{flexDirection:"row"},name:"login",value:(o||0)+"",onChange:function(t){t.persist(),e.handleWorkhour="0"==t.target.value?0:1,a.setState({selectedData:e})}},r.a.createElement(Je.a,{value:"0",control:r.a.createElement(Le.a,{color:"default"}),label:"\u5173\u95ed"}),r.a.createElement(Je.a,{value:"1",control:r.a.createElement(Le.a,{color:"primary"}),label:"\u6253\u5f00"}))),r.a.createElement(me.a,{item:!0,xs:6,style:{paddingTop:0}},r.a.createElement(Ve.a,{component:"legend"},"\u67e5\u8be2\u6240\u6709\u8ba2\u5355"),r.a.createElement(ze.a,{"aria-label":"Gender",name:"login",style:{flexDirection:"row"},value:(s||0)+"",onChange:function(t){t.persist(),e.handleTemplate="0"==t.target.value?0:1,a.setState({selectedData:e})}},r.a.createElement(Je.a,{value:"0",control:r.a.createElement(Le.a,{color:"default"}),label:"\u5173\u95ed"}),r.a.createElement(Je.a,{value:"1",control:r.a.createElement(Le.a,{color:"primary"}),label:"\u6253\u5f00"}))),r.a.createElement(me.a,{item:!0,xs:6,style:{paddingTop:0}},r.a.createElement(Ve.a,{component:"legend"},"\u67e5\u770b\u751f\u4ea7\u9762\u677f"),r.a.createElement(ze.a,{"aria-label":"Gender",name:"login",style:{flexDirection:"row"},value:(c||0)+"",onChange:function(t){t.persist(),e.showpage="0"==t.target.value?0:1,a.setState({selectedData:e})}},r.a.createElement(Je.a,{value:"0",control:r.a.createElement(Le.a,{color:"default"}),label:"\u5173\u95ed"}),r.a.createElement(Je.a,{value:"1",control:r.a.createElement(Le.a,{color:"primary"}),label:"\u6253\u5f00"}))),r.a.createElement(me.a,{item:!0,xs:6,style:{paddingTop:0}},r.a.createElement(Ve.a,{component:"legend"},"\u7ec4\u957f\u529f\u80fd"),r.a.createElement(ze.a,{"aria-label":"Gender",name:"login",style:{flexDirection:"row"},value:(d||0)+"",onChange:function(t){t.persist(),e.captain="0"==t.target.value?0:1,a.setState({selectedData:e})}},r.a.createElement(Je.a,{value:"0",control:r.a.createElement(Le.a,{color:"default"}),label:"\u5173\u95ed"}),r.a.createElement(Je.a,{value:"1",control:r.a.createElement(Le.a,{color:"primary"}),label:"\u6253\u5f00"}))),r.a.createElement(me.a,{item:!0,xs:12,align:"center"},r.a.createElement(x.a,{variant:"outlined",onClick:a.setUserPowerSure,style:{marginRight:"1rem"},color:"primary",className:"".button},"\u4fdd\u5b58"),r.a.createElement(x.a,{variant:"outlined",style:{marginRight:"1rem"},color:"secondary",className:"".button},"\u91cd\u7f6e")))))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.initLoadData()}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.data,l=a.order,i=a.orderBy,o=(a.selected,a.rowsPerPage),s=a.page,c=o-Math.min(o,n.length-s*o),d=K.changeToJson(localStorage.user).type;return r.a.createElement(Ie.a,{className:t.root,style:{padding:"0 2rem",width:"auto"}},r.a.createElement($e,{changeUserData:this.changeUserData,tips:this.tips,queryUserPowerByType:this.queryUserPowerByType}),r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(ye.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(Qe,{order:l,orderBy:i,onRequestSort:this.handleRequestSort,rowCount:n.length}),r.a.createElement(Ee.a,null,function(e,t){var a=e.map(function(e,t){return[e,t]});return a.sort(function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]}),a.map(function(e){return e[0]})}(n,function(e,t){return"desc"===e?function(e,a){return Xe(e,a,t)}:function(e,a){return-Xe(e,a,t)}}(l,i)).slice(s*o,s*o+o).map(function(a,n){var l=e.isSelected(a.userID);return r.a.createElement(Ne.a,{hover:!0,role:"checkbox","aria-checked":l,tabIndex:-1,key:a.userID,selected:l},r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},s*o+n+1),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},a.userID),r.a.createElement(Se.a,{align:"center"},a.userName),r.a.createElement(Se.a,{align:"center",className:a.login?"text-blue":""},a.login?"\u2714":"X"),r.a.createElement(Se.a,{align:"center",className:a.handleIndent?"text-blue":""},a.handleIndent?"\u2714":"X"),r.a.createElement(Se.a,{align:"center",className:a.handleWorkhour?"text-blue":""},a.handleWorkhour?"\u2714":"X"),r.a.createElement(Se.a,{align:"center",className:a.handleTemplate?"text-blue":""},a.handleTemplate?"\u2714":"X"),r.a.createElement(Se.a,{align:"center",className:a.showpage?"text-blue":""},a.showpage?"\u2714":"X"),r.a.createElement(Se.a,{align:"center",className:a.captain?"text-blue":""},a.captain?"\u2714":"X"),r.a.createElement(Se.a,{align:"center"},d>a.type?"\u2014\u2014\u2014\u2014":r.a.createElement("span",{className:"pointer text-blue "+t.button,onClick:function(){return e.updateUserPower(a,s*o+n)}},"\u4fee\u6539")))}),c>0&&r.a.createElement(Ne.a,{style:{height:49*c}},r.a.createElement(Se.a,{colSpan:10}))))),r.a.createElement(Pe.a,{className:"TablePagination",rowsPerPageOptions:[5,10,25],component:"div",count:n.length,rowsPerPage:o,page:s,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}),this.updateUserPowerModal(),r.a.createElement(Be.a,{style:{marginTop:"70px"},anchorOrigin:{horizontal:"center",vertical:"top"},open:this.state.tipsOpen,ContentProps:{className:"info"},message:r.a.createElement("span",{id:"message-id"},this.state.tipInfo?this.state.tipInfo:"")}))}}]),t}(r.a.Component),Ze=Object(g.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}})(Ge),et=a(60),tt=a.n(et);Object(g.withStyles)(function(e){return{root:{margin:0,padding:2*e.spacing.unit}}})(T.a),Object(g.withStyles)(function(e){return{root:{borderTop:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing.unit}}})(j.a);var at=[{id:"name",numeric:!1,disablePadding:!0,label:"\u5e8f\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u6a21\u677f\u7f16\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u6a21\u677f\u540d\u79f0"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u6a21\u677f\u6d41\u7a0b"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u8d1f\u8d23\u4eba"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u64cd\u4f5c"}],nt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a.state={},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onSelectAllClick,e.order),a=e.orderBy;e.numSelected,e.rowCount;return r.a.createElement(ke.a,null,r.a.createElement(Ne.a,null,at.map(function(e,n){return r.a.createElement(Se.a,{key:"EnhancedTableHead"+n,align:(e.numeric,"center"),padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&t},e.label)},this)))}}]),t}(r.a.Component),rt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={open:!1,dutyModal:!1,workers:[],tDuty:""},a.tips=a.props.tips,a.handleClose=function(){a.setState({open:!1,dutyModal:!1})},a.addTemplate=function(e){0==e?(a.setState({open:!0,serverURL:K.server.addTemplate,ifAdd:1}),a.setState({tID:"",tName:"",tProcedure:"",tDuty:""})):1==e&&a.setState({open:!0,serverURL:K.server.updateTemplate,ifAdd:0})},a.addTempleteSure=function(){var e=a.state,t=e.tID,n=e.tName,r=e.tProcedure,l=e.tDuty,i=e.DutyWorkers,o=e.ifAdd;e.selectedData;if(t)if(n)if(r)if(l){var s=r.replace(/ $/,"").replace(/^ /,"").split(" ");l.replace(/ $/,"").replace(/^ /,"").split(" ");if(s.length==i.length){var c="",d=!0,u=!1,m=void 0;try{for(var p,g=i[Symbol.iterator]();!(d=(p=g.next()).done);d=!0){c+=p.value.id+" "}}catch(h){u=!0,m=h}finally{try{d||null==g.return||g.return()}finally{if(u)throw m}}window.loading(!0),fetch(a.state.serverURL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,name:n,procedure:r.replace(/ $/,"").replace(/^ /,""),duty:c.replace(/ $/,"").replace(/^ /,"")})}).then(function(e){return e.json()}).then(function(e){if(200!=e.code)return a.tips(e.msg),void window.loading(!1);o?a.props.initQueryData():(a.state.selectedData&&(a.state.selectedData.name=n,a.state.selectedData.procedure=r,a.state.selectedData.duty=l,a.state.selectedData.id=t),a.props.changeTemplateData("",2)),a.setState({open:!1}),window.loading(!1)}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5"),window.loading(!1)})}else a.tips("\u6d41\u7a0b\u4e0e\u8d1f\u8d23\u4eba\u6570\u91cf\u4e0d\u5339\u914d\uff0c\u8bf7\u68c0\u67e5\u540e\u91cd\u8bd5")}else a.tips("\u8bf7\u586b\u5199\u6d41\u7a0b\u5bf9\u5e94\u8d1f\u8d23\u4eba");else a.tips("\u8bf7\u5148\u586b\u5199\u6a21\u677f\u6d41\u7a0b");else a.tips("\u8bf7\u5148\u586b\u5199\u6a21\u677f\u540d\u79f0");else a.tips("\u8bf7\u5148\u586b\u5199\u6a21\u677f\u7f16\u53f7")},a.updateTemplateModal=function(e,t){a.setState({tID:t.id,tName:t.name,tProcedure:t.procedure,tDuty:t.duty}),a.setState({selectedData:t,selectedDataCopy:JSON.parse(JSON.stringify(t))}),a.addTemplate(e)},a.showDutyModal=function(){a.state.DutyWorkers=[],a.state.tDuty="",fetch(K.server.listSystemUserByType+"?type=3").then(function(e){return e.json()}).then(function(e){200==e.code?a.setState({dutyModal:!0,workers:e.results,selectedWorkers:[]}):a.tips(e.msg)}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.selectToDuty=function(e,t,n){e.persist(),-1!=e.target.className.indexOf("chipActive")?e.target.className=e.target.className.replace(" chipActive",""):e.target.className=e.target.className+" chipActive";var r=a.state,l=r.tDuty;r.DutyWorkers,r.workers;-1==(n=a.state.DutyWorkers.indexOf(t))?a.state.DutyWorkers.push(t):a.state.DutyWorkers.splice(n,1),l="";var i=!0,o=!1,s=void 0;try{for(var c,d=a.state.DutyWorkers[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){l+=c.value.name+" "}}catch(u){o=!0,s=u}finally{try{i||null==d.return||d.return()}finally{if(o)throw s}}a.setState({tDuty:l})},a.addTemplateModal=function(){var e=a.state,t=e.workers,n=(e.tDuty,e.selectedDataCopy,e.ifAdd),l={margin:"3px 5px"},i=Object(g.withStyles)(function(e){return{root:{borderBottom:"1px solid ".concat(e.palette.divider),margin:0,padding:2*e.spacing.unit},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.children,a=e.classes,n=e.onClose;return r.a.createElement(O.a,{disableTypography:!0,className:a.root},r.a.createElement(q.a,{variant:"h6"},t),n?r.a.createElement(f.a,{"aria-label":"Close",className:a.closeButton,onClick:n},r.a.createElement(B.a,null)):null)});return r.a.createElement("div",null,r.a.createElement(C.a,{"aria-labelledby":"customized-dialog-title",open:a.state.open,style:{marginTop:"-15rem"}},r.a.createElement(i,{id:"customized-dialog-title",onClose:a.handleClose},n?"\u6dfb\u52a0\u6a21\u677f":"\u7f16\u8f91\u6a21\u677f"),r.a.createElement("form",{className:"".container,noValidate:!0,autoComplete:"off",style:{padding:"2rem 6rem 3rem"}},r.a.createElement(me.a,{container:!0},n?r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:".5rem"}},r.a.createElement(de.a,{fullWidth:!0,style:{marginTop:0},placeholder:"\u8bf7\u8f93\u5165\u6a21\u677f\u7f16\u53f7",label:"\u6a21\u677f\u7f16\u53f7",disabled:!n,className:"".textField,value:a.state.tID,onChange:function(e){return a.setState({tID:e.target.value})},margin:"normal",InputLabelProps:{shrink:!0}})):"",r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:".5rem"}},r.a.createElement(de.a,{fullWidth:!0,style:{marginTop:0},placeholder:"\u8bf7\u8f93\u5165\u6a21\u677f\u540d\u79f0",label:"\u6a21\u677f\u540d\u79f0",className:"".textField,value:a.state.tName,onChange:function(e){return a.setState({tName:e.target.value})},margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:".5rem"}},r.a.createElement(de.a,{fullWidth:!0,style:{marginTop:0},placeholder:"\u8bf7\u8f93\u5165\u6d41\u7a0b",label:"\u6d41\u7a0b(\u591a\u4e2a\u4ee5\u7a7a\u683c\u5206\u5f00)",className:"".textField,type:"textarea",value:a.state.tProcedure,onChange:function(e){return a.setState({tProcedure:e.target.value})},margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:".5rem"}},r.a.createElement(de.a,{fullWidth:!0,style:{marginTop:0},placeholder:"\u8bf7\u9009\u62e9\u6d41\u7a0b\u5bf9\u5e94\u8d1f\u8d23\u4eba",label:"\u8d1f\u8d23\u4eba(\u591a\u4e2a\u4ee5\u7a7a\u683c\u5206\u5f00)",className:"".textField,type:"textarea",value:a.state.tDuty,onChange:function(e){return!1},onClick:function(){a.showDutyModal()},margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement(me.a,{item:!0,xs:12,align:"center",style:{marginTop:"1rem"}},r.a.createElement(x.a,{variant:"outlined",onClick:a.addTempleteSure,style:{marginRight:"1rem"},color:"primary",className:"".button},"\u63d0\u4ea4"),r.a.createElement(x.a,{variant:"outlined",style:{marginRight:"1rem"},color:"secondary",className:"".button},"\u91cd\u7f6e"))))),r.a.createElement(C.a,{"aria-labelledby":"customized-dialog-title",id:"dutyModal",open:a.state.dutyModal,style:{marginTop:"18rem",oveflow:"hidden"},onClose:function(){return a.setState({dutyModal:!1})}},r.a.createElement("form",{className:"".container,noValidate:!0,autoComplete:"off",style:{padding:"2rem 6rem 3rem",width:"408px"}},r.a.createElement(me.a,{container:!0},r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:".5rem"}},r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:0,boxShadow:""}},r.a.createElement("div",{className:"bold"},"\u5f85\u9009\u62e9\u7ec4\u957f\u4eba\u5458"),r.a.createElement("div",{className:"plane waitingChoose",style:{height:"10rem",overflowY:"auto",padding:".5rem 0"}},t.map(function(e,t){return r.a.createElement(tt.a,{key:t,label:e.name,style:l,className:"dutyChip "+"".chip,onClick:function(n){return a.selectToDuty(n,e,t)}})}))))))))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(De.a,null,r.a.createElement(q.a,{variant:"h6",id:"tableTitle",align:"left"},"\u6a21\u677f\u7ba1\u7406")),r.a.createElement(me.a,{container:!0},r.a.createElement(me.a,{xs:12,item:!0,align:"right"},r.a.createElement("span",{className:"btn text-blue",onClick:function(){return e.addTemplate(0)},style:{display:"inline-block",margin:"1rem 12rem 2rem"}},"\u6dfb\u52a0\u6a21\u677f"))),r.a.createElement("div",{className:"".spacer}),this.addTemplateModal())}}]),t}(r.a.Component),lt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={order:"asc",orderBy:"calories",selected:[],data:[],page:0,rowsPerPage:K.pageChangeNum||13,open:!0,confirmOpen:!1,title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u8be5\u6a21\u677f\u5417\uff1f"},a.initQueryData=function(){fetch(K.server.listAllTemplate).then(function(e){return e.json()}).then(function(e){200==e.code?a.changeTemplateData(e.results||[]):a.tips(e.msg)}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.handleRequestSort=function(e,t){var n=t,r="desc";a.state.orderBy===t&&"desc"===a.state.order&&(r="asc"),a.setState({order:r,orderBy:n})},a.handleSelectAllClick=function(e){e.target.checked?a.setState(function(e){return{selected:e.data.map(function(e){return e.id})}}):a.setState({selected:[]})},a.handleClick=function(e,t){var n=a.state.selected,r=n.indexOf(t),l=[];-1===r?l=l.concat(n,t):0===r?l=l.concat(n.slice(1)):r===n.length-1?l=l.concat(n.slice(0,-1)):r>0&&(l=l.concat(n.slice(0,r),n.slice(r+1))),a.setState({selected:l})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.updateTemplate=function(e,t){a.refs.modalMethod.updateTemplateModal(1,e),a.setState({editNum:t})},a.deleteTemplate=function(e,t){a.setState({confirmOpen:!0});a.setState({confirmOpen:!0,title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u8be5\u6a21\u677f\u5417\uff1f",deleteFun:function(){fetch(K.server.deleteTemplate,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})}).then(function(e){return e.json()}).then(function(e){200==e.code?(console.log(a.state.data,t),a.state.data.splice(t,1),a.setState({data:a.state.data}),a.tips("\u5220\u9664\u6a21\u677f\u6210\u529f")):a.tips(e.msg)}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}})},a.confirmClose=function(){a.setState({confirmOpen:!1})},a.confirmSure=function(){a.state.deleteFun&&a.state.deleteFun()},a.changeTemplateData=function(e,t){1==t?(a.state.data.push(e),a.setState({data:a.state.data})):2==t?a.setState({data:a.state.data}):a.setState({data:e})},a.tips=function(e){e&&a.setState({tipInfo:e}),a.setState({tipsOpen:!0}),setTimeout(function(){a.setState({tipsOpen:!1})},4e3)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.initQueryData()}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.data,l=a.order,i=a.orderBy,o=a.selected,s=a.rowsPerPage,c=a.page,d=s-Math.min(s,n.length-c*s);return r.a.createElement(Ie.a,{className:t.root,style:{padding:"0 2rem",width:"auto"}},r.a.createElement(rt,{changeTemplateData:this.changeTemplateData,ref:"modalMethod",initQueryData:this.initQueryData,tips:this.tips}),r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(ye.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(nt,{numSelected:o.length,order:l,orderBy:i,rowCount:n.length}),r.a.createElement(Ee.a,null,n.slice(c*s,c*s+s).map(function(t,a){var n=e.isSelected(t.id);return r.a.createElement(Ne.a,{hover:!0,role:"checkbox","aria-checked":n,tabIndex:-1,key:t.id,selected:n},r.a.createElement(Se.a,{align:"center"},c*s+(a+1)),r.a.createElement(Se.a,{align:"center"},t.id),r.a.createElement(Se.a,{align:"center"},t.name),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},t.procedure),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},t.duty),r.a.createElement(Se.a,{align:"center"},r.a.createElement("span",{className:"pointer btn text-blue",onClick:function(){return e.updateTemplate(t,c*s+a)}},"\u4fee\u6539"),r.a.createElement("span",{className:"pointer btn text-red",onClick:function(){return e.deleteTemplate(t,c*s+a)}},"\u5220\u9664")))}),d>0&&r.a.createElement(Ne.a,{style:{height:49*d}},r.a.createElement(Se.a,{colSpan:6})))),n.length?"":r.a.createElement("div",{className:"emptyShow",align:"center",style:{display:"block",padding:"2rem"}},"\u6682\u65e0\u6570\u636e ")),r.a.createElement(Pe.a,{className:"TablePagination",rowsPerPageOptions:[10,20,30],component:"div",count:n.length,rowsPerPage:s,page:c,backIconButtonProps:{"aria-label":"\u4e0a\u4e00\u9875"},nextIconButtonProps:{"aria-label":"\u4e0b\u4e00\u9875"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}),r.a.createElement(_,{open:this.state.confirmOpen,title:this.state.title,content:this.state.content,closeFun:this.confirmClose,sureFun:this.confirmSure}),r.a.createElement(Be.a,{style:{marginTop:"70px"},key:(new Date).getTime()+Math.random(),anchorOrigin:{horizontal:"center",vertical:"top"},open:this.state.tipsOpen,ContentProps:{className:"info"},message:r.a.createElement("span",{id:"message-id"},this.state.tipInfo)}))}}]),t}(r.a.Component),it=Object(g.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}})(lt);Object(g.withStyles)(function(e){return{root:{margin:0,padding:2*e.spacing.unit}}})(T.a),Object(g.withStyles)(function(e){return{root:{borderTop:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing.unit}}})(j.a);var ot=[{id:"name",numeric:!1,disablePadding:!0,label:"\u5e8f\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u8bbe\u5907\u540d\u79f0"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u5907\u6ce8"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u64cd\u4f5c"}],st=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a.state={},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onSelectAllClick,e.order),a=e.orderBy;e.numSelected,e.rowCount;return r.a.createElement(ke.a,null,r.a.createElement(Ne.a,null,ot.map(function(e,n){return r.a.createElement(Se.a,{key:"EnhancedTableHead"+n,align:(e.numeric,"center"),padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&t},e.label)},this)))}}]),t}(r.a.Component),ct=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={open:!1,dutyModal:!1,workers:[],tDuty:""},a.tips=a.props.tips,a.handleClose=function(){a.setState({open:!1,dutyModal:!1})},a.addEquipment=function(e){0==e?(a.setState({open:!0,serverURL:K.server.addEquipment,ifAdd:1}),a.setState({tID:"",tName:"",remark:"",tDuty:""})):1==e&&a.setState({open:!0,serverURL:K.server.updateEquipment,ifAdd:0})},a.addEquipmentSure=function(){var e=a.state,t=e.tID,n=e.tName,r=e.remark,l=e.ifAdd;e.selectedData;n?(window.loading(!0),fetch(a.state.serverURL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,name:n,remark:r})}).then(function(e){return e.json()}).then(function(e){if(200!=e.code)return a.tips(e.msg),void window.loading(!1);l?a.props.initQueryData():(a.state.selectedData&&(a.state.selectedData.name=n,a.state.selectedData.remark=r),a.props.changeTemplateData("",2)),a.setState({open:!1}),window.loading(!1)}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5"),window.loading(!1)})):a.tips("\u8bf7\u5148\u586b\u5199\u8bbe\u5907\u540d\u79f0")},a.updateTemplateModal=function(e,t){a.setState({tID:t.id,tName:t.name,remark:t.remark}),a.setState({selectedData:t,selectedDataCopy:JSON.parse(JSON.stringify(t))}),a.addEquipment(e)},a.addEquipmentModal=function(){var e=a.state,t=(e.workers,e.tDuty,e.selectedDataCopy,e.ifAdd),n=Object(g.withStyles)(function(e){return{root:{borderBottom:"1px solid ".concat(e.palette.divider),margin:0,padding:2*e.spacing.unit},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.children,a=e.classes,n=e.onClose;return r.a.createElement(O.a,{disableTypography:!0,className:a.root},r.a.createElement(q.a,{variant:"h6"},t),n?r.a.createElement(f.a,{"aria-label":"Close",className:a.closeButton,onClick:n},r.a.createElement(B.a,null)):null)});return r.a.createElement("div",null,r.a.createElement(C.a,{"aria-labelledby":"customized-dialog-title",open:a.state.open,style:{marginTop:"-15rem"}},r.a.createElement(n,{id:"customized-dialog-title",onClose:a.handleClose},t?"\u6dfb\u52a0\u8bbe\u5907":"\u7f16\u8f91\u8bbe\u5907"),r.a.createElement("form",{className:"".container,noValidate:!0,autoComplete:"off",style:{padding:"2rem 6rem 3rem"}},r.a.createElement(me.a,{container:!0},r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:".5rem"}},r.a.createElement(de.a,{fullWidth:!0,style:{marginTop:0},placeholder:"\u8bf7\u8f93\u5165\u8bbe\u5907\u540d\u79f0",label:"\u8bbe\u5907\u540d\u79f0",className:"".textField,value:a.state.tName,onChange:function(e){return a.setState({tName:e.target.value})},margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:".5rem"}},r.a.createElement(de.a,{fullWidth:!0,style:{marginTop:0},placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8\u4fe1\u606f(\u53ef\u9009)",label:"\u8bbe\u5907\u5907\u6ce8",className:"".textField,value:a.state.remark,onChange:function(e){return a.setState({remark:e.target.value})},margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement(me.a,{item:!0,xs:12,align:"center",style:{marginTop:"1rem"}},r.a.createElement(x.a,{variant:"outlined",onClick:a.addEquipmentSure,style:{marginRight:"1rem"},color:"primary",className:"".button},"\u63d0\u4ea4"),r.a.createElement(x.a,{variant:"outlined",style:{marginRight:"1rem"},color:"secondary",className:"".button},"\u91cd\u7f6e"))))))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(De.a,null,r.a.createElement(q.a,{variant:"h6",id:"tableTitle",align:"left"},"\u8bbe\u5907\u7ba1\u7406")),r.a.createElement(me.a,{container:!0},r.a.createElement(me.a,{xs:12,item:!0,align:"right"},r.a.createElement("span",{className:"btn text-blue",onClick:function(){return e.addEquipment(0)},style:{display:"inline-block",margin:"1rem 12rem 2rem"}},"\u6dfb\u52a0\u8bbe\u5907"))),r.a.createElement("div",{className:"".spacer}),this.addEquipmentModal())}}]),t}(r.a.Component),dt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={order:"asc",orderBy:"calories",selected:[],data:[],page:0,rowsPerPage:K.pageChangeNum||13,open:!0,confirmOpen:!1,title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u8be5\u8bbe\u5907\u5417\uff1f"},a.initQueryData=function(){fetch(K.server.listAllEquipment).then(function(e){return e.json()}).then(function(e){200==e.code?a.changeTemplateData(e.results||[]):a.tips(e.msg)}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.handleRequestSort=function(e,t){var n=t,r="desc";a.state.orderBy===t&&"desc"===a.state.order&&(r="asc"),a.setState({order:r,orderBy:n})},a.handleSelectAllClick=function(e){e.target.checked?a.setState(function(e){return{selected:e.data.map(function(e){return e.id})}}):a.setState({selected:[]})},a.handleClick=function(e,t){var n=a.state.selected,r=n.indexOf(t),l=[];-1===r?l=l.concat(n,t):0===r?l=l.concat(n.slice(1)):r===n.length-1?l=l.concat(n.slice(0,-1)):r>0&&(l=l.concat(n.slice(0,r),n.slice(r+1))),a.setState({selected:l})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.updateTemplate=function(e,t){a.refs.modalMethod.updateTemplateModal(1,e),a.setState({editNum:t})},a.deleteTemplate=function(e,t){a.setState({confirmOpen:!0});a.setState({confirmOpen:!0,title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u8be5\u8bbe\u5907\u5417\uff1f",deleteFun:function(){fetch(K.server.deleteEquipment,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})}).then(function(e){return e.json()}).then(function(e){200==e.code?(console.log(a.state.data,t),a.state.data.splice(t,1),a.setState({data:a.state.data}),a.tips("\u5220\u9664\u8bbe\u5907\u6210\u529f")):a.tips(e.msg)}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}})},a.confirmClose=function(){a.setState({confirmOpen:!1})},a.confirmSure=function(){a.state.deleteFun&&a.state.deleteFun()},a.changeTemplateData=function(e,t){1==t?(a.state.data.push(e),a.setState({data:a.state.data})):2==t?a.setState({data:a.state.data}):a.setState({data:e})},a.tips=function(e){e&&a.setState({tipInfo:e}),a.setState({tipsOpen:!0}),setTimeout(function(){a.setState({tipsOpen:!1})},4e3)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.initQueryData()}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.data,l=a.order,i=a.orderBy,o=a.selected,s=a.rowsPerPage,c=a.page,d=s-Math.min(s,n.length-c*s);return r.a.createElement(Ie.a,{className:t.root,style:{padding:"0 2rem",width:"auto"}},r.a.createElement(ct,{changeTemplateData:this.changeTemplateData,ref:"modalMethod",initQueryData:this.initQueryData,tips:this.tips}),r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(ye.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(st,{numSelected:o.length,order:l,orderBy:i,rowCount:n.length}),r.a.createElement(Ee.a,null,n.slice(c*s,c*s+s).map(function(t,a){var n=e.isSelected(t.id);return r.a.createElement(Ne.a,{hover:!0,role:"checkbox","aria-checked":n,tabIndex:-1,key:t.id,selected:n},r.a.createElement(Se.a,{align:"center"},c*s+(a+1)),r.a.createElement(Se.a,{align:"center"},t.name),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},t.remark),r.a.createElement(Se.a,{align:"center"},r.a.createElement("span",{className:"pointer btn text-blue",onClick:function(){return e.updateTemplate(t,c*s+a)}},"\u4fee\u6539"),r.a.createElement("span",{className:"pointer btn text-red",onClick:function(){return e.deleteTemplate(t,c*s+a)}},"\u5220\u9664")))}),d>0&&r.a.createElement(Ne.a,{style:{height:49*d}},r.a.createElement(Se.a,{colSpan:6})))),n.length?"":r.a.createElement("div",{className:"emptyShow",align:"center",style:{display:"block",padding:"2rem"}},"\u6682\u65e0\u6570\u636e ")),r.a.createElement(Pe.a,{className:"TablePagination",rowsPerPageOptions:[10,20,30],component:"div",count:n.length,rowsPerPage:s,page:c,backIconButtonProps:{"aria-label":"\u4e0a\u4e00\u9875"},nextIconButtonProps:{"aria-label":"\u4e0b\u4e00\u9875"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}),r.a.createElement(_,{open:this.state.confirmOpen,title:this.state.title,content:this.state.content,closeFun:this.confirmClose,sureFun:this.confirmSure}),r.a.createElement(Be.a,{style:{marginTop:"70px"},key:(new Date).getTime()+Math.random(),anchorOrigin:{horizontal:"center",vertical:"top"},open:this.state.tipsOpen,ContentProps:{className:"info"},message:r.a.createElement("span",{id:"message-id"},this.state.tipInfo)}))}}]),t}(r.a.Component),ut=Object(g.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}})(dt),mt=a(98),pt=a(51),gt=a.n(pt),ht=a(122),ft=a.n(ht),yt=a(123),bt=a(49),Et=a(61),vt=a.n(Et);var St=Object(g.withStyles)(function(e){return{root:{margin:0,padding:2*e.spacing.unit}}})(T.a),wt=Object(g.withStyles)(function(e){return{root:{borderTop:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing.unit}}})(j.a),kt=[{id:"name",numeric:!1,disablePadding:!0,label:"\u5e8f\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"erp\u53f7"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u8d27\u53f7"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u8d27\u7269\u540d\u79f0"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u8ba1\u5212\u751f\u4ea7\u6570\u91cf"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u8ba1\u5212\u5b8c\u5de5\u65e5\u671f"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u9884\u8ba1\u4e0a\u7ebf\u65e5\u671f"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u5b9e\u9645\u5f00\u5de5\u65e5\u671f"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u5b9e\u9645\u5b8c\u6210\u65e5\u671f"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u4f18\u5148\u7ea7"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u662f\u5426\u65b0\u54c1"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u5907\u6ce8"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u53cd\u9988"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u6a21\u677f\u7f16\u53f7"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u8ba2\u5355\u72b6\u6001"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u64cd\u4f5c"}],xt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a.state={},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onSelectAllClick,e.order),a=e.orderBy;e.numSelected,e.rowCount;return r.a.createElement(ke.a,null,r.a.createElement(Ne.a,null,kt.map(function(e,n){return r.a.createElement(Se.a,{key:"EnhancedTableHead"+n,align:"center",padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&t},e.label)},this)))}}]),t}(r.a.Component),Pt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={open:!1,dateRange:[{text:"\u5168\u90e8",value:0},{text:"\u6700\u8fd1\u4e00\u5468",value:1},{text:"\u6700\u8fd1\u4e00\u6708",value:2},{text:"\u6700\u8fd1\u4e09\u6708",value:3},{text:"\u6700\u8fd1\u4e00\u5e74",value:4},{text:"\u4e00\u5e74\u4ee5\u524d",value:5}],typeQuery:[{text:"\u5168\u90e8",code:0},{text:"\u52a0\u6025",code:1},{text:"\u65b0\u54c1",code:2}],sitQuery:[{text:"\u5168\u90e8",code:"all"},{text:"\u672a\u5f00\u59cb",code:0},{text:"\u8fdb\u884c\u4e2d",code:1},{text:"\u5df2\u5b8c\u6210",code:2}]},a.handleClose=function(){a.setState({open:!1})},a.addTemplate=function(){a.setState({open:!0,fileValue:""})},a.submitFile=function(){a.state.fileValue?(console.log(a.state.fileValue),a.uploadFile()):a.tips("\u8bf7\u5148\u9009\u62e9\u9700\u8981\u4e0a\u4f20\u7684\u6587\u4ef6")},a.uploadFile=function(){Object(mt.a)(a);var e=a.state.fileValue[0],t=e.name.split(".")[e.name.split(".").length-1];if("-1"!=["xls","xlsx","XLS","XLSX"].indexOf(t)){var n=new FormData;n.append("name",e.name),n.append("file",e),console.log(K.changeToJson(localStorage.user).userID),n.append("id",K.changeToJson(localStorage.user).userID),window.loading(!0),fetch(K.server.uploadExcelForAddIndent,{method:"POST",body:n}).then(function(e){return e.json()}).then(function(e){var t="";if(e.results.failArr&&e.results.failArr.length)for(var n in e.results.failArr){t+=(n>0?"\u3001":"")+(e.results.failArr[n].erp||e.results.failArr[n].index)}var l=e.results.fail?"erp\u4e3a"+t+"\u7684"+e.results.fail:e.results.fail;200!=e.code&&(window.loading(!1),a.tips(r.a.createElement("span",null,"\u672c\u6b21\u5171\u4e0a\u4f20",r.a.createElement("span",{className:"text-primary"},e.results.total),"\u6761\u6570\u636e\uff0c",r.a.createElement("span",{className:"text-blue"},e.results.success),"\u6761\u6210\u529f\uff0c",r.a.createElement("span",{className:"text-red"},l),"\u6761\u6570\u636e\u5931\u8d25"),"stay")),a.tips(r.a.createElement("span",null,"\u672c\u6b21\u5171\u4e0a\u4f20",r.a.createElement("span",{className:"text-blue"},e.results.total),"\u6761\u6570\u636e\uff0c",r.a.createElement("span",{className:"text-blue"},e.results.success),"\u6761\u6210\u529f\uff0c",r.a.createElement("span",{className:"text-red"},l),"\u6761\u6570\u636e\u5931\u8d25"),"stay"),a.props.initLoadData(),a.setState({open:!1}),window.loading(!1)}).catch(function(e){window.loading(!1),a.tips("\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5","2000"),console.log(e)})}else a.tips("\u6682\u4e0d\u652f\u6301\u8be5\u6587\u4ef6\u683c\u5f0f")},a.tips=a.props.tips,a.addTemplateModal=function(){var e=Object(g.withStyles)(function(e){return{root:{borderBottom:"1px solid ".concat(e.palette.divider),margin:0,padding:2*e.spacing.unit},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.children,a=e.classes,n=e.onClose;return r.a.createElement(O.a,{disableTypography:!0,className:a.root},r.a.createElement(q.a,{variant:"h6"},t),n?r.a.createElement(f.a,{"aria-label":"Close",className:a.closeButton,onClick:n},r.a.createElement(B.a,null)):null)});return r.a.createElement("div",null,r.a.createElement(C.a,{"aria-labelledby":"customized-dialog-title",open:a.state.open,style:{marginTop:"-10rem"}},r.a.createElement(e,{id:"customized-dialog-title",onClose:a.handleClose},"\u5bfc\u5165\u8ba2\u5355\u6587\u4ef6"),r.a.createElement(St,{style:{minWidth:"350px",minHeight:"100px",display:"flex",alignItems:"center"}},r.a.createElement(me.a,{item:!0,xs:4,align:"center",style:{padding:"0 .5rem"}},r.a.createElement(x.a,{variant:"contained",color:"default",className:"oveflow-hidden "+(a.state.fileValue?"hide":"fff")},"\u8bf7\u9009\u62e9\u6587\u4ef6",r.a.createElement(gt.a,{className:"".rightIcon}),r.a.createElement("input",{type:"file",className:"invisible",accept:".xlsx,.xls",onChange:function(e){e.persist(),console.log(e.target),a.setState({fileValue:e.target.files})}})),r.a.createElement("div",{className:"pointer "+(a.state.fileValue?"fff":"hide"),onClick:function(){return document.querySelectorAll('input[type="file"]')[0].click()}},r.a.createElement("span",null,r.a.createElement(ft.a,null),r.a.createElement("span",{className:"small text-blue"},a.state.fileValue?a.state.fileValue[0].name:"")))),r.a.createElement(me.a,{item:!0,xs:8},r.a.createElement("span",{className:""},r.a.createElement("small",null," \u8bf7\u9009\u62e9\u4e00\u4e2aexcel\u6587\u4ef6\u4e0a\u4f20, \u6587\u4ef6\u5217\u540d\u4f9d\u6b21\u4e3a:\u8ba1\u5212\u5b8c\u6210\u65e5\u671f\u3001 \u9884\u8ba1\u4e0a\u7ebf\u65e5\u671f\u3001\u8ba2\u5355\u7f16\u53f7\u3001\u8d27\u53f7\u3001\u8d27\u7269\u540d\u79f0\u3001\u5907\u6ce8\u3001\u751f\u4ea7\u6570\u91cf\u3001\u6a21\u677f\u7f16\u53f7\uff0c\u662f\u5426\u52a0\u6025\uff0c\u662f\u5426\u65b0\u54c1\u3002",r.a.createElement("a",{className:"text-blue",href:K.templete.indentUrl,download:"\u8ba2\u5355\u6a21\u677f"},"\u70b9\u51fb\u7531\u6b64\u4e0b\u8f7d\u6a21\u677f"),"\u3002")))),r.a.createElement(wt,null,r.a.createElement(x.a,{onClick:function(){a.handleClose()},color:"primary"},"\u53d6\u6d88"),r.a.createElement(x.a,{onClick:function(){a.submitFile()},color:"primary"},"\u4e0a\u4f20"))))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.dateRange,n=t.typeQuery,l=t.sitQuery;return r.a.createElement("div",null,r.a.createElement(De.a,null,r.a.createElement("div",{className:"".title},r.a.createElement(q.a,{variant:"h6",id:"tableTitle",align:"left"},"\u8ba2\u5355\u64cd\u4f5c")),r.a.createElement("div",{className:"".spacer}),this.addTemplateModal()),r.a.createElement(me.a,{container:!0,style:{margin:"1rem 0 0",padding:"0 1.2rem"}},r.a.createElement(me.a,{item:!0,xs:6,align:"left"},r.a.createElement(me.a,{item:!0,xs:12,className:"filterTool small"},r.a.createElement("span",{className:"blod"},"\u65f6\u95f4"),a.map(function(t,a){return r.a.createElement("span",{key:a,className:"btn-sm "+(2==a?"bg-primary":""),onClick:function(a){return e.props.queryIndentByDate(a,t)}}," ",t.text)})),r.a.createElement(me.a,{item:!0,xs:12,align:"left",className:"filterTool small",style:{margin:"1rem 0"}},r.a.createElement("span",{className:"blod"},"\u7c7b\u578b"),n.map(function(t,a){return r.a.createElement("span",{key:a,className:"btn-sm "+(0==a?"bg-primary":""),onClick:function(n){return e.props.queryIndentByType(n,t,a)}}," ",t.text)})),r.a.createElement(me.a,{item:!0,xs:12,align:"left",className:"filterTool small",style:{margin:"1rem 0"}},r.a.createElement("span",{className:"blod"},"\u72b6\u6001"),l.map(function(t,a){return r.a.createElement("span",{key:a,className:"type-sit btn-sm "+(0==a?"bg-primary":""),onClick:function(n){return e.props.queryIndentBySit(n,t,a)}}," ",t.text)}))),r.a.createElement(me.a,{item:!0,align:"right",xs:6},r.a.createElement("span",{className:"btn text-blue",onClick:this.addTemplate},"\u5bfc\u5165\u8ba2\u5355"),r.a.createElement(de.a,{style:{marginTop:0,marginLeft:"1rem"},placeholder:"\u8bf7\u8f93\u5165\u8ba2\u5355\u53f7\u6216\u8d27\u53f7\u67e5\u8be2",className:"".textField,type:"text",onChange:function(t){return e.props.queryByKeyword(t)},margin:"normal",InputLabelProps:{shrink:!0}}))))}}]),t}(r.a.Component),Ct=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={order:"asc",orderBy:"calories",selected:[],data:[],page:0,rowsPerPage:K.indentPageNum||13,open:!1,confirmOpen:!1,title:"\u786e\u8ba4",selectedData:{},actualFinish:(new Date).format("yyyy-MM-dd")},a.initLoadData=function(){var e=new Date(new Date-2592e6).format("yyyy-MM-dd"),t=(new Date).format("yyyy-MM-dd");fetch(K.server.listAllIndentByDate+"?startDate="+e+"&endDate="+t).then(function(e){return e.json()}).then(function(e){200==e.code?a.changeIndentData(e.results||[]):a.tips(e.msg)}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.handleClose=function(){a.setState({open:!1})},a.handleRequestSort=function(e,t){var n=t,r="desc";a.state.orderBy===t&&"desc"===a.state.order&&(r="asc"),a.setState({order:r,orderBy:n})},a.handleSelectAllClick=function(e){e.target.checked?a.setState(function(e){return{selected:e.data.map(function(e){return e.id})}}):a.setState({selected:[]})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.updateIndent=function(e,t){a.setState({login:e.login||0,indent:e.indent||0,workhour:e.workhour||0,allindent:e.allindent||0,captain:e.captain||0}),a.setState({open:!0,selectedDataBak:e,selectedData:JSON.parse(JSON.stringify(e))})},a.setIndentSure=function(){var e=a.state,t=e.selectedDataBak,n=e.selectedData,r=a.state.selectedData,l=r.id,i=r.planNum,o=r.planFinishDate,s=r.planOnline,c=r.actualStart,d=r.actualFinish,u=r.priority,m=r.ifNew,p=r.ifOutsource,g=r.duty,h=(r.status,r.remark);i||0!=i?new RegExp(/^\d+$/).test(i)?(window.loading(!0),fetch(K.server.updateIndentInfo,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:l,planNum:i,planFinishDate:o,planOnline:s,actualStart:c,actualFinish:d,priority:u,ifNew:m,ifOutsource:p,duty:g,remark:h})}).then(function(e){return e.json()}).then(function(e){if(200!=e.code)return a.tips(e.msg),void window.loading(!1);for(var r in a.tips("\u8ba2\u5355\u4fe1\u606f\u66f4\u65b0\u6210\u529f"),window.loading(!1),t.actualFinish,t)t[r]=n[r];a.changeIndentData("",2),a.setState({open:!1})}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5"),window.loading(!1)})):a.tips("\u8ba1\u5212\u751f\u4ea7\u6570\u91cf\u4e0d\u80fd\u4e3a\u975e\u6570\u5b57"):a.tips("\u8ba1\u5212\u751f\u4ea7\u6570\u91cf\u4e0d\u80fd\u4e3a\u7a7a")},a.changeIndentData=function(e,t){1==t?(a.state.data.push(e),a.setState({data:a.state.data})):2==t?a.setState({data:a.state.data}):a.setState({data:e}),a.state.dataBak=a.state.data,a.hideInner(!0)},a.showDataWithAnimationFrame=function(){a.index=a.index||0;var e=a.data,t=a.index;if(console.log("msg",t,e.length),t<e.length-1){var n=e.slice(a.index,500),r=a.state.data.concat(n);a.setState({data:r}),console.log("data_inner===",r),a.index+=500,window.requestAnimationFrame(a.showDataWithAnimationFrame)}else a.index=0,a.hideInner(!0)},a.deleteIndent=function(e,t){a.setState({confirmOpen:!0});a.setState({confirmOpen:!0,title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u8ba2\u5355<span class='text-blue'>"+e.erp+"</span>\u5417\uff1f",sureFun:function(){fetch(K.server.deleteIndent,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})}).then(function(e){return e.json()}).then(function(e){200==e.code?(a.state.data.splice(t,1),a.setState({data:a.state.data}),a.tips("\u5220\u9664\u8ba2\u5355\u6210\u529f")):a.tips(e.msg)}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}})},a.confirmClose=function(){a.setState({confirmOpen:!1,ifInfo:!1})},a.queryByKeyword=function(e){e.persist(),a.state.dataBak||(a.state.dataBak=a.state.data),a.state.data=a.state.dataBak.filter(function(t){return-1!=t.erp.toUpperCase().indexOf(e.target.value.toUpperCase())||-1!=t.materialCode.toUpperCase().indexOf(e.target.value.toUpperCase())||-1!=t.materialName.toUpperCase().indexOf(e.target.value.toUpperCase())}),a.setState({data:a.state.data})},a.queryIndentByDate=function(e,t){var n=a.state,r=n.queryStart,l=n.queryEnd;e.persist();var i=document.querySelectorAll(".filterTool .bg-primary"),o=!0,s=!1,c=void 0;try{for(var d,u=i[Symbol.iterator]();!(o=(d=u.next()).done);o=!0){var m=d.value;m.className=m.className.replace("bg-primary","")}}catch(g){s=!0,c=g}finally{try{o||null==u.return||u.return()}finally{if(s)throw c}}e.target.className+=" bg-primary",l=(new Date).format("yyyy-MM-dd");var p=t.value;0==p&&(r="",l=""),1==p?r=new Date(new Date-6048e5).format("yyyy-MM-dd"):2==p?r=new Date(new Date-2592e6).format("yyyy-MM-dd"):3==p?r=new Date(new Date-7776e6).format("yyyy-MM-dd"):4==p?r=new Date(new Date-31536e6).format("yyyy-MM-dd"):5==p&&(r=new Date(new Date-31536e7).format("yyyy-MM-dd"),l=new Date(new Date-31536e6).format("yyyy-MM-dd")),fetch(K.server.listAllIndentByDate+"?startDate="+r+"&endDate="+l).then(function(e){return e.json()}).then(function(e){200==e.code?a.changeIndentData(e.results||[]):a.tips(e.msg)}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.queryIndentByType=function(e,t,n){e.persist();var r=!0,l=!1,i=void 0;try{for(var o,s=e.target.parentElement.children[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;c.className=c.className.replace("bg-primary","")}}catch(d){l=!0,i=d}finally{try{r||null==s.return||s.return()}finally{if(l)throw i}}e.target.className+=" bg-primary",a.state.dataBak||(a.state.dataBak=a.state.data),0==t.code?a.setState({priority:void 0,ifNew:void 0},a.queryDataWithPro):1==t.code?a.setState({priority:1,ifNew:void 0},a.queryDataWithPro):2==t.code&&a.setState({priority:void 0,ifNew:1},a.queryDataWithPro)},a.queryIndentBySit=function(e,t,n){e.persist();var r=!0,l=!1,i=void 0;try{for(var o,s=e.target.parentElement.children[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;c.className=c.className.replace("bg-primary","")}}catch(d){l=!0,i=d}finally{try{r||null==s.return||s.return()}finally{if(l)throw i}}e.target.className+=" bg-primary",a.state.dataBak||(a.state.dataBak=a.state.data),"all"==t.code?a.setState({status:void 0},a.queryDataWithPro):a.setState({status:t.code},a.queryDataWithPro)},a.queryDataWithPro=function(){var e=a.state,t=e.priority,n=e.ifNew,r=e.status;a.state.data=void 0!=r&&t?a.state.dataBak.filter(function(e){return e.status==r&&e.priority==t}):void 0!=r&&n?a.state.dataBak.filter(function(e){return e.status==r&&e.ifNew==n}):t?a.state.dataBak.filter(function(e){return e.priority==t}):n?a.state.dataBak.filter(function(e){return e.ifNew==n}):void 0!=r?a.state.dataBak.filter(function(e){return e.status==r}):a.state.dataBak,a.setState({data:a.state.data})},a.startIndent=function(e,t){a.setState({confirmOpen:!0,title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5f00\u59cb\u8ba2\u5355<span class='text-blue'>"+e.erp+"</span>\u5417\uff1f",sureFun:function(){fetch(K.server.updateIndentInfo,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,status:1,remark:e.remark})}).then(function(e){return e.json()}).then(function(t){200==t.code?(a.tips("\u8ba2\u5355\u5df2\u5f00\u59cb"),e.status=1,a.changeIndentData("",2),a.setState({open:!1})):a.tips(t.msg)}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},ifInfo:!0})},a.finishIndent=function(e,t){if(e.actualFinish){a.setState({confirmOpen:!0,title:"\u786e\u8ba4",content:"\u786e\u5b9a\u4fee\u6539\u8ba2\u5355<span class='text-blue'>"+e.erp+"</span>\u4e3a\u5b8c\u6210\u72b6\u6001\u5417\uff1f",sureFun:function(){fetch(K.server.updateIndentInfo,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,status:2,remark:e.remark})}).then(function(e){return e.json()}).then(function(t){200==t.code?(a.tips("\u8ba2\u5355\u5df2\u5b8c\u6210"),e.status=2,a.changeIndentData("",2),a.setState({open:!1})):a.tips(t.msg)}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}})}else a.tips("\u8bf7\u5148\u8bbe\u7f6e\u8ba2\u5355\u5b8c\u6210\u65f6\u95f4")},a.updateUserPowerModal=function(){var e=Object(g.withStyles)(function(e){return{root:{borderBottom:"1px solid ".concat(e.palette.divider),margin:0,padding:2*e.spacing.unit},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.children,a=e.classes,n=e.onClose;return r.a.createElement(O.a,{disableTypography:!0,className:a.root},r.a.createElement(q.a,{variant:"h6"},t),n?r.a.createElement(f.a,{"aria-label":"Close",className:a.closeButton,onClick:n},r.a.createElement(B.a,null)):null)}),t=a.state.selectedData,n=a.state.selectedData,l=n.erp,i=n.planNum,o=n.planFinishDate,s=n.planOnline,c=n.actualStart,d=n.actualFinish,u=(n.status,n.priority),m=n.ifNew,p=n.remark;n.feedback;return r.a.createElement(C.a,{"aria-labelledby":"customized-dialog-title",open:a.state.open,style:{marginTop:"-10rem"}},r.a.createElement(e,{id:"customized-dialog-title",onClose:a.handleClose},"\u8ba2\u5355",l||!1,"\u4fe1\u606f\u66f4\u65b0"),r.a.createElement("form",{className:"".container,noValidate:!0,autoComplete:"off",style:{padding:"2rem 6rem 3rem"}},r.a.createElement(me.a,{container:!0,spacing:24},r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:0}},r.a.createElement(Ve.a,{component:"legend"},"\u8ba1\u5212\u751f\u4ea7\u6570\u91cf"),r.a.createElement(de.a,{fullWidth:!0,style:{marginTop:0},placeholder:"\u8bf7\u8f93\u5165\u8ba1\u5212\u751f\u4ea7\u6570\u91cf",className:"".textField,value:i,onChange:function(e){t.planNum=e.target.value,a.setState({selectedData:t})},margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement(me.a,{item:!0,xs:6,style:{paddingTop:0}},r.a.createElement(Ve.a,{component:"legend"},"\u8ba1\u5212\u4e0a\u7ebf\u65f6\u95f4"),r.a.createElement(bt.a,{className:"date-picker inline-block",name:"date-input",value:s?new Date(s):"",onChange:function(e){t.planOnline=e.format("yyyy-MM-dd"),a.setState({selectedData:t})},style:{marginbottom:"2rem"}}),r.a.createElement("div",{className:"date-clear btn inline-block"},r.a.createElement(B.a,{onClick:function(){t.planOnline="",a.setState({selectedData:t})}}))),r.a.createElement(me.a,{item:!0,xs:6,style:{paddingTop:0}},r.a.createElement(Ve.a,{component:"legend"},"\u8ba1\u5212\u5b8c\u6210\u65f6\u95f4"),r.a.createElement(bt.a,{className:"date-picker inline-block",name:"date-input",value:o?new Date(o):"",onChange:function(e){t.planFinishDate=e.format("yyyy-MM-dd"),a.setState({selectedData:t})},style:{marginbottom:"2rem"}}),r.a.createElement("div",{className:"date-clear btn inline-block"},r.a.createElement(B.a,{onClick:function(){t.planFinishDate="",a.setState({selectedData:t})}}))),r.a.createElement(me.a,{item:!0,xs:6,style:{paddingTop:0}},r.a.createElement(Ve.a,{component:"legend"},"\u5b9e\u9645\u5f00\u59cb\u65f6\u95f4"),r.a.createElement(bt.a,{className:"date-picker inline-block",name:"date-input",value:c?new Date(c):"",onChange:function(e){t.actualStart=e.format("yyyy-MM-dd"),a.setState({selectedData:t})},style:{marginbottom:"2rem"}}),r.a.createElement("div",{className:"date-clear btn inline-block"},r.a.createElement(B.a,{onClick:function(){t.actualStart="",a.setState({selectedData:t})}}))),r.a.createElement(me.a,{item:!0,xs:6,style:{paddingTop:0}},r.a.createElement(Ve.a,{component:"legend"},"\u5b9e\u9645\u5b8c\u6210\u65f6\u95f4"),r.a.createElement(bt.a,{className:"date-picker inline-block",name:"date-input",value:d?new Date(d):"",onChange:function(e){t.actualFinish=e.format("yyyy-MM-dd"),a.setState({selectedData:t})},style:{marginbottom:"2rem"}}),r.a.createElement("div",{className:"date-clear btn inline-block"},r.a.createElement(B.a,{onClick:function(){t.actualFinish="",a.setState({selectedData:t})}}))),r.a.createElement(me.a,{item:!0,xs:6,style:{paddingTop:0}},r.a.createElement(Ve.a,{component:"legend"},"\u662f\u5426\u52a0\u6025"),r.a.createElement(ze.a,{"aria-label":"\u662f\u5426\u52a0\u6025",style:{flexDirection:"row"},name:"priority",value:(u||0)+"",onChange:function(e){e.persist(),t.priority="0"==e.target.value?0:1,a.setState({selectedData:t})}},r.a.createElement(Je.a,{value:"0",control:r.a.createElement(Le.a,{color:"default"}),label:"\u5426"}),r.a.createElement(Je.a,{value:"1",control:r.a.createElement(Le.a,{color:"default"}),label:"\u662f"}))),r.a.createElement(me.a,{item:!0,xs:6,style:{paddingTop:0}},r.a.createElement(Ve.a,{component:"legend"},"\u662f\u5426\u65b0\u54c1"),r.a.createElement(ze.a,{"aria-label":"\u662f\u5426\u65b0\u54c1",style:{flexDirection:"row"},name:"ifNew",value:(m||0)+"",onChange:function(e){e.persist(),t.ifNew="0"==e.target.value?0:1,a.setState({selectedData:t})}},r.a.createElement(Je.a,{value:"0",control:r.a.createElement(Le.a,{color:"default"}),label:"\u5426"}),r.a.createElement(Je.a,{value:"1",control:r.a.createElement(Le.a,{color:"default"}),label:"\u662f"}))),r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:0}},r.a.createElement(Ve.a,{component:"legend"},"\u5907\u6ce8"),r.a.createElement(de.a,{fullWidth:!0,style:{marginTop:0},placeholder:"\u8bf7\u8f93\u5165\u8ba2\u5355\u5907\u6ce8",className:"".textField,value:p,onChange:function(e){t.remark=e.target.value,a.setState({selectedData:t})},margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement(me.a,{item:!0,xs:6,style:{paddingTop:0}}),r.a.createElement(me.a,{item:!0,xs:6,style:{paddingTop:0}}),r.a.createElement(me.a,{item:!0,xs:12,align:"center"},r.a.createElement(x.a,{variant:"outlined",onClick:a.setIndentSure,style:{marginRight:"1rem"},color:"primary",className:"".button},"\u4fdd\u5b58"),r.a.createElement(x.a,{variant:"outlined",style:{marginRight:"1rem"},color:"secondary",className:"".button},"\u91cd\u7f6e")))))},a.timeInProgram=function(e){a.setState({selectedData:e});var t=a.state,n=t.startDate,r=t.endDate;fetch(K.server.queryEquipmentProgram+"?userID="+e.id+"&userName="+e.name+"&startDate="+n+"&endDate="+r).then(function(e){return e.json()}).then(function(e){200==e.code?a.setState({timeModal:!0,showProgram:e.results}):a.tips(e.msg)}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.timeInProgramModal=function(){var e=Object(g.withStyles)(function(e){return{root:{margin:0,padding:18},titlep:{fontSize:20}}})(function(e){var t=e.children,a=e.classes;e.onClose;return r.a.createElement(O.a,{disableTypography:!0,className:a.root},r.a.createElement(q.a,{variant:"",className:a.titlep},t))}),t=a.state,n=t.selectedData,l=t.showProgram,i=Object(g.withStyles)(function(e){return{container:{minWidth:"30vw",minHeight:"30vh",maxHeight:"40vh",overflowY:"scroll"},li:{padding:"4px 0"},li_half1:{display:"inline-block",width:"100%"},li_half2:{display:"none",boxSizing:"border-box",width:"0%"}}})(function(t){t.children;var i=t.classes;t.onClose;return r.a.createElement(C.a,{"aria-labelledby":"customized-dialog-title",className:"modal lg",open:a.state.timeModal,style:{marginTop:"-10rem"},onClose:function(){return a.setState({timeModal:!1})}},r.a.createElement(e,{id:"customized-dialog-title"},"\u8bbe\u5907",r.a.createElement("span",{className:"text-blue"},n.name),"\u53c2\u4e0e\u9879\u76ee",r.a.createElement("small",{style:{paddingLeft:"1rem"}},"\u5171\u8ba1",l?l.length:"")),r.a.createElement("div",{className:i.container,noValidate:!0,autoComplete:"off",style:{margin:".5rem 2rem 2rem",padding:"1rem"}},r.a.createElement(me.a,{container:!0,spacing:24},r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:0}},r.a.createElement("table",{style:{paddingLeft:0,marginTop:0,listStyle:"none"}},r.a.createElement("thead",null,r.a.createElement("tr",{className:i.li,style:{fontSize:"18px"}},r.a.createElement("th",null,"\u5e8f\u53f7"),r.a.createElement("th",null,"erp"),r.a.createElement("th",null,"\u7269\u6599\u540d\u79f0"),r.a.createElement("th",null,"\u6d41\u7a0b"),r.a.createElement("th",null,"\u5de5\u65f6"))),r.a.createElement("tbody",null,l?l.map(function(e,t){return r.a.createElement("tr",{className:i.li},r.a.createElement("td",null,r.a.createElement("i",{style:{paddingRight2:".8rem",fontSize:"smaller"}},t+1+".  ")),r.a.createElement("td",null,r.a.createElement("span",{className:"text-primary",style:{paddingRight2:".8rem"},title:"erp"},e.erp)),r.a.createElement("td",null,r.a.createElement("span",{className:"text-blue2 eq-time-name",title:"\u7269\u6599\u540d\u79f0:"+e.materialName},e.materialName)),r.a.createElement("td",null,r.a.createElement("span",{title:"\u6d41\u7a0b"},e.name)),r.a.createElement("td",null,r.a.createElement("span",{title:"\u5de5\u65f6"},e.eq_hourtime?e.eq_hourtime.toFixed(3):0)))}):""))))))});return r.a.createElement(i,null)},a.tips=function(e,t){e&&a.setState({tipInfo:e}),a.setState({tipsOpen:!0}),"stay"==t||setTimeout(function(){a.setState({tipsOpen:!1})},4e3)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.initLoadData()}},{key:"componentDidMount",value:function(){setTimeout(function(){document.querySelectorAll(".filterTool .type-sit")[2].click()},1e3)}},{key:"hideInner",value:function(e){this.setState({loading:e})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.loading,l=(a.filterFun,a.data),i=a.order,o=a.orderBy,s=a.selected,c=a.rowsPerPage,d=a.page;Math.min(c,l.length-d*c);return r.a.createElement(Ie.a,{className:t.root,style:{padding:"0 2rem",width:"auto"}},r.a.createElement(Pt,{tips:this.tips,initLoadData:this.initLoadData,queryByKeyword:this.queryByKeyword,queryIndentByDate:this.queryIndentByDate,queryIndentByType:this.queryIndentByType,queryIndentBySit:this.queryIndentBySit}),r.a.createElement("div",{class:t.tableAllCon},n?"":r.a.createElement("div",{className:"backdrop div-inner"},r.a.createElement("div",{className:"relativeCenter text-blue"},r.a.createElement(vt.a,{size:50}))),r.a.createElement("div",{className:t.tableCon},r.a.createElement(ye.a,{className:t.table+" nowrap indentTable","aria-labelledby":"tableTitle"},r.a.createElement(xt,{numSelected:s.length,order:i,orderBy:o,tips:this.tips,rowCount:l.length})),r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(ye.a,{className:t.table+" nowrap indentTable","aria-labelledby":"tableTitle"},r.a.createElement(Ee.a,null,l.slice(d*c,d*c+c).map(function(a,n){var l=e.isSelected(a.id);return r.a.createElement(Ne.a,{hover:!0,role:"checkbox","aria-checked":l,tabIndex:-1,key:n,selected:l,className:a.priority?"bg-red":a.ifNew?"bg-blue":""},r.a.createElement(Se.a,{align:"center"},d*c+n+1),r.a.createElement(Se.a,{align:"center"},a.erp),r.a.createElement(Se.a,{align:"center"},a.materialCode),r.a.createElement(Se.a,{align:"center",className:t.markTd,title:a.materialName},a.materialName),r.a.createElement(Se.a,{align:"center"},a.planNum),r.a.createElement(Se.a,{align:"center"},!!a.planFinishDate&&(!!new Date(a.planFinishDate).getDate()&&new Date(a.planFinishDate).format("yyyy-MM-dd"))),r.a.createElement(Se.a,{align:"center"},!!a.planOnline&&(!!new Date(a.planOnline).getDate()&&new Date(a.planOnline).format("yyyy-MM-dd"))),r.a.createElement(Se.a,{align:"center"},!!a.actualStart&&(!!new Date(a.actualStart).getDate()&&new Date(a.actualStart).format("yyyy-MM-dd"))),r.a.createElement(Se.a,{align:"center"},!!a.actualFinish&&(!!new Date(a.actualFinish).getDate()&&new Date(a.actualFinish).format("yyyy-MM-dd"))),r.a.createElement(Se.a,{align:"center"},a.priority?"\u662f":"\u5426"),r.a.createElement(Se.a,{align:"center"},a.ifNew?"\u662f":"\u5426"),r.a.createElement(Se.a,{align:"center",className:t.markTd,title:a.remark},a.remark),r.a.createElement(Se.a,{align:"center"},a.feedback),r.a.createElement(Se.a,{align:"center"},a.templateID),r.a.createElement(Se.a,{align:"center",className:2==a.status?"text-primary":1==a.status?"text-blue":""},2==a.status?"\u5b8c\u6210":1==a.status?"\u8fdb\u884c\u4e2d":"\u672a\u5f00\u59cb"),r.a.createElement(Se.a,{align:"center"},1==a.status?r.a.createElement("span",{className:"pointer btn text-primary",onClick:function(){return e.finishIndent(a,d*c+n)}},"\u8bbe\u4e3a\u5b8c\u6210"):"",0==a.status?r.a.createElement("span",{className:"pointer btn text-blue",onClick:function(){return e.startIndent(a,d*c+n)}},"\u5f00\u59cb\u8ba2\u5355"):"",r.a.createElement("span",{className:"pointer btn text-blue",onClick:function(){return e.updateIndent(a,d*c+n)}},"\u4fee\u6539"),r.a.createElement("span",{className:"pointer btn text-red",onClick:function(){return e.deleteIndent(a,d*c+n)}},"\u5220\u9664")))})))),l.length?"":r.a.createElement("div",{className:"emptyShow",align:"center",style:{display:"block",padding:"2rem"}},"\u6682\u65e0\u6570\u636e ")),r.a.createElement(Pe.a,{className:"TablePagination",rowsPerPageOptions:[1*K.page,2*K.page,3*K.page],component:"div",count:l.length,rowsPerPage:c,page:d,backIconButtonProps:{"aria-label":"\u4e0a\u4e00\u9875"},nextIconButtonProps:{"aria-label":"\u4e0b\u4e00\u9875"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage})),this.updateUserPowerModal(),this.timeInProgramModal(),r.a.createElement(_,{open:this.state.confirmOpen,title:this.state.title,content:this.state.content,closeFun:this.confirmClose,sureFun:this.state.sureFun,ifInfo:this.state.ifInfo}),r.a.createElement(Be.a,{style:{marginTop:"70px"},anchorOrigin:{horizontal:"center",vertical:"top"},open:this.state.tipsOpen,ContentProps:{className:"info text-left"},action:[r.a.createElement(f.a,{key:"close","aria-label":"close",color:"inherit",onClick:function(){return e.setState({tipsOpen:!1})}},r.a.createElement(B.a,{className:t.icon}))],message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(H.a,{className:t.smallicon})," ",this.state.tipInfo)}))}}]),t}(r.a.Component),Nt=Object(g.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableAllCon:{position:"relative"},tableCon:{overflowX:"auto",overflowY:"hidden"},tableWrapper:{height:"60vh",overflow:"auto",width:"fit-content"},markTd:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},tipsbgColor:{backgroundColor:yt.green[600]},icon:{fontSize:16},smallicon:{marginBottom:-5}}})(Ct);var Ot=[{id:"name",numeric:!1,disablePadding:!0,label:"\u5e8f\u53f7"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u7f16\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u7528\u6237\u540d"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u5bc6\u7801"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u64cd\u4f5c"}],Dt=(r.a.Component,function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={order:"asc",orderBy:"calories",selected:[],page:0,rowsPerPage:10,open:!0,deleteOpen:!1,title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u8be5\u540d\u7528\u6237\u5417\uff1f",selectedDate:new Date,indentTimeTypes:[{value:0,text:"\u52a0\u6025"},{value:1,text:"\u65b0\u54c1"}],indentTimeType:0,startDate:new Date,endDate:new Date},a.onChangeStartDate=function(e){a.setState({startDate:e})},a.onChangeEndDate=function(e){a.setState({endDate:e})},a.exportTimeIndent=function(){var e=a.state,t=e.startDate,n=e.endDate;if(t)if(n)if(new Date(t).format("yyyy-MM-dd")>new Date(n).format("yyyy-MM-dd"))a.tips("\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65f6\u95f4");else{var r=[{k:"erp",v:"erp\u7f16\u53f7"},{k:"materialCode",v:"\u8d27\u53f7"},{k:"materialName",v:"\u8d27\u7269\u540d\u79f0"},{k:"planNum",v:"\u8ba1\u5212\u751f\u4ea7\u6570\u91cf"},{k:"planOnline",v:"\u8ba1\u5212\u4e0a\u7ebf\u65f6\u95f4"},{k:"planFinishDate",v:"\u8ba1\u5212\u5b8c\u6210\u65f6\u95f4"},{k:"actualStart",v:"\u5b9e\u9645\u5f00\u59cb\u65f6\u95f4"},{k:"actualFinish",v:"\u5b9e\u9645\u5b8c\u6210\u65f6\u95f4"},{k:"procedure",v:"\u6d41\u7a0b"},{k:"duty",v:"\u8d1f\u8d23\u4eba\u5458"},{k:"ifNew",v:"\u662f\u5426\u65b0\u54c1"},{k:"priority",v:"\u662f\u5426\u52a0\u6025"},{k:"templateID",v:"\u6a21\u677f\u7f16\u53f7"},{k:"status",v:"\u72b6\u6001"}],l="\u8ba2\u5355\u8868"+new Date(t).format("yyyy-MM-dd").replace(/-/g,"")+"-"+new Date(n).format("yyyy-MM-dd").replace(/-/g,"");a.openWebWorker("".concat(K.server.exportTimeIndentServer,"?startDate=").concat(t.format("yyyy-MM-dd"),"&endDate=").concat(n.format("yyyy-MM-dd"),"&name=").concat(l),r,l)}else a.tips("\u8bf7\u9009\u62e9\u7ed3\u675f\u65f6\u95f4");else a.tips("\u8bf7\u5148\u9009\u62e9\u5f00\u59cb\u65f6\u95f4")},a.dlExcel=function(e,t,a){for(var n in t)t[n].key=n+1},a.exportAllIndent=function(){var e=[{k:"erp",v:"erp\u7f16\u53f7"},{k:"materialCode",v:"\u8d27\u53f7"},{k:"materialName",v:"\u8d27\u7269\u540d\u79f0"},{k:"planNum",v:"\u8ba1\u5212\u751f\u4ea7\u6570\u91cf"},{k:"planOnline",v:"\u8ba1\u5212\u4e0a\u7ebf\u65f6\u95f4"},{k:"planFinishDate",v:"\u8ba1\u5212\u5b8c\u6210\u65f6\u95f4"},{k:"actualStart",v:"\u5b9e\u9645\u5f00\u59cb\u65f6\u95f4"},{k:"actualFinish",v:"\u5b9e\u9645\u5b8c\u6210\u65f6\u95f4"},{k:"procedure",v:"\u6d41\u7a0b"},{k:"duty",v:"\u8d1f\u8d23\u4eba\u5458"},{k:"ifNew",v:"\u662f\u5426\u65b0\u54c1"},{k:"priority",v:"\u662f\u5426\u52a0\u6025"},{k:"templateID",v:"\u6a21\u677f\u7f16\u53f7"},{k:"status",v:"\u72b6\u6001"}];a.openWebWorker("".concat(K.server.exportTimeIndentServer,"?name=").concat("\u5168\u90e8\u8ba2\u5355\u8be6\u7ec6\u8868"),e,"\u5168\u90e8\u8ba2\u5355\u8be6\u7ec6\u8868")},a.exportMatchIndent=function(){var e=[{k:"erp",v:"erp\u7f16\u53f7"},{k:"materialCode",v:"\u8d27\u53f7"},{k:"materialName",v:"\u8d27\u7269\u540d\u79f0"},{k:"name",v:"\u6d41\u7a0b\u540d\u79f0"},{k:"procedure",v:"\u8be6\u7ec6\u6d41\u7a0b"},{k:"duty",v:"\u6d41\u7a0b\u5bf9\u5e94\u8d1f\u8d23\u4eba"}];a.openWebWorker("".concat(K.server.exportIndentMatchTemplete,"?name=").concat("\u8ba2\u5355\u53ca\u5bf9\u5e94\u6d41\u7a0b\u8868"),e,"\u8ba2\u5355\u53ca\u5bf9\u5e94\u6d41\u7a0b\u8868")},a.exportIndentByTimeType=function(e){var t=a.state.indentTimeType,n=[{k:"erp",v:"erp\u7f16\u53f7"},{k:"materialCode",v:"\u8d27\u53f7"},{k:"materialName",v:"\u8d27\u7269\u540d\u79f0"},{k:"planNum",v:"\u8ba1\u5212\u751f\u4ea7\u6570\u91cf"},{k:"planOnline",v:"\u8ba1\u5212\u4e0a\u7ebf\u65f6\u95f4"},{k:"planFinishDate",v:"\u8ba1\u5212\u5b8c\u6210\u65f6\u95f4"},{k:"actualStart",v:"\u5b9e\u9645\u5f00\u59cb\u65f6\u95f4"},{k:"actualFinish",v:"\u5b9e\u9645\u5b8c\u6210\u65f6\u95f4"},{k:"procedure",v:"\u6d41\u7a0b"},{k:"duty",v:"\u8d1f\u8d23\u4eba\u5458"},{k:"ifNew",v:"\u662f\u5426\u65b0\u54c1"},{k:"priority",v:"\u662f\u5426\u52a0\u6025"},{k:"templateID",v:"\u6a21\u677f\u7f16\u53f7"},{k:"status",v:"\u72b6\u6001"}];if(0!=t)if(1!=t)fetch(K.server.exportTimeIndentServer).then(function(e){return e.json()}).then(function(e){if(e.results.length){if(0==t){var r="\u8ba2\u5355\u8be6\u7ec6\u8868-\u4f18\u5148";return void a.openWebWorker("".concat(K.server.exportIndentMatchTemplete,"?priority = 1&name=").concat(r),n,r)}if(1==t){r="\u8ba2\u5355\u8be6\u7ec6\u8868-\u65b0\u54c1";return void a.openWebWorker("".concat(K.server.exportIndentMatchTemplete,"?ifNew= 1&name=").concat(r),n,r)}}else a.tips("\u672a\u627e\u5230\u7b26\u5408\u67e5\u8be2\u6761\u4ef6\u7684\u6570\u636e\uff01")}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")});else{r="\u8ba2\u5355\u8be6\u7ec6\u8868-\u65b0\u54c1";a.openWebWorker("".concat(K.server.exportTimeIndentServer,"?ifNew=1&name=").concat(r),n,r)}else{var r="\u8ba2\u5355\u8be6\u7ec6\u8868-\u4f18\u5148";a.openWebWorker("".concat(K.server.exportTimeIndentServer,"?priority=1&name=").concat(r),n,r)}},a.exportIndentWorkHour=function(e){var t=[{k:"erp",v:"erp\u7f16\u53f7"},{k:"materialCode",v:"\u8d27\u53f7"},{k:"materialName",v:"\u8d27\u7269\u540d\u79f0"},{k:"countHour",v:"\u603b\u5de5\u65f6"},{k:"singleHour",v:"\u5355\u6570\u91cf\u5de5\u65f6"},{k:"factor",v:"\u6743\u6570"},{k:"countWorkers",v:"\u603b\u4eba\u6570"},{k:"cost",v:"\u5de5\u65f6\u8d39"}];a.openWebWorker("".concat(K.server.exportWorkHourByDate,"?name=").concat("\u8ba2\u5355\u5de5\u65f6\u8868"),t,"\u8ba2\u5355\u5de5\u65f6\u8868")},a.exportProcedureWorkHour=function(e){var t=[{k:"erp",v:"erp\u7f16\u53f7"},{k:"materialCode",v:"\u8d27\u53f7"},{k:"materialName",v:"\u8d27\u7269\u540d\u79f0"},{k:"name",v:"\u6d41\u7a0b\u540d\u79f0"},{k:"countHour",v:"\u603b\u5de5\u65f6"},{k:"singleHour",v:"\u5355\u6570\u91cf\u5de5\u65f6"},{k:"factor",v:"\u6743\u6570"},{k:"countWorker",v:"\u603b\u4eba\u6570"},{k:"cost",v:"\u5de5\u65f6\u8d39"}];a.openWebWorker("".concat(K.server.exportProcedureWorkTime,"?name=",1),t,"\u6d41\u7a0b\u5de5\u65f6\u8868")},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.deleteUser=function(){a.setState({deleteOpen:!0})},a.deleteModalClose=function(){a.setState({deleteOpen:!1})},a.tips=function(e){e&&a.setState({tipInfo:e}),a.setState({tipsOpen:!0}),setTimeout(function(){a.setState({tipsOpen:!1})},4e3)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"toArrayBuffer",value:function(e){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),n=0;n!=e.length;++n)a[n]=255&e.charCodeAt(n);return t}},{key:"openWebWorker",value:function(e,t,a){console.log("url===",e);var n=document.createElement("a");n.href=e+"&name=1&token="+(400*(new Date).getTime()+0x650e124ef1c7),n.target="_blank",n.click()}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state;a.data,a.order,a.orderBy,a.selected,a.rowsPerPage,a.page;return r.a.createElement("div",null,r.a.createElement(Ie.a,{className:t.root,style:{padding:"0 2rem",width:"auto",boxShadow:"none"}},r.a.createElement("div",null,r.a.createElement(De.a,null,r.a.createElement(q.a,{variant:"h6",id:"tableTitle",align:"left"},"\u5bfc\u51fa\u751f\u4ea7\u8ba2\u5355")),r.a.createElement(me.a,{container:!0,spacing:24,align:"left",vertical:"center",style:{margin:"0rem 0 1rem",padding:"0 1.2rem"}},r.a.createElement(me.a,{container:!0,item:!0,xs:6,className:"exportCon",style:{flexDirection:"row"}},r.a.createElement(me.a,{item:!0,xs:12,style:{marginBottom:"1rem"}},r.a.createElement("span",{className:"btn text-blue"},"\u6309\u65f6\u95f4\u6bb5\u5bfc\u51fa\u751f\u4ea7\u8ba2\u5355")),r.a.createElement(me.a,{item:!0,style:{flex:1},xs:6},r.a.createElement(bt.a,{className:"date-picker inline-block",name:"date-input",value:this.state.startDate,onChange:this.onChangeStartDate,style:{marginbottom:"2rem"}}),r.a.createElement(bt.a,{name:"date-input",className:"date-picker inline-block",value:this.state.endDate,onChange:this.onChangeEndDate})),r.a.createElement(me.a,{item:!0,style:{flex:1},xs:12},r.a.createElement(x.a,{variant:"outlined",style:{marginBottom:"-0px"},color:"default",onClick:this.exportTimeIndent,className:t.button},"\u70b9\u51fb\u7531\u6b64\u4e0b\u8f7d"))),r.a.createElement(me.a,{container:!0,item:!0,xs:6,className:"exportCon",style:{flexDirection:"row"}},r.a.createElement(me.a,{item:!0,xs:12,style:{marginBottom:"1rem"}},r.a.createElement("span",{className:"btn text-blue"},"\u5bfc\u51fa\u6240\u6709\u751f\u4ea7\u4fe1\u606f\u8be6\u7ec6\u6570\u636e")),r.a.createElement(me.a,{item:!0,style:{flex:1},xs:6}),r.a.createElement(me.a,{item:!0,style:{flex:1},xs:12},r.a.createElement(x.a,{variant:"outlined",color:"default",onClick:this.exportAllIndent,className:t.button},"\u70b9\u51fb\u7531\u6b64\u4e0b\u8f7d"))),r.a.createElement(me.a,{container:!0,item:!0,xs:6,className:"exportCon",style:{flexDirection:"row"}},r.a.createElement(me.a,{item:!0,xs:12,style:{marginBottom:"1rem"}},r.a.createElement("span",{className:"btn text-blue"},"\u5bfc\u51fa\u8ba2\u5355\u540d\u79f0\u53ca\u5bf9\u5e94\u7684\u751f\u4ea7\u6d41\u7a0b")),r.a.createElement(me.a,{item:!0,style:{flex:1},xs:6}),r.a.createElement(me.a,{item:!0,style:{flex:1},xs:12},r.a.createElement(x.a,{variant:"outlined",color:"default",onClick:this.exportMatchIndent,className:t.button},"\u70b9\u51fb\u7531\u6b64\u4e0b\u8f7d"))),r.a.createElement(me.a,{container:!0,item:!0,xs:6,className:"exportCon",style:{flexDirection:"row"}},r.a.createElement(me.a,{item:!0,xs:12,style:{marginBottom:"1rem"}},r.a.createElement("span",{className:"btn text-blue"},"\u6309\u7c7b\u578b\u5bfc\u51fa\u751f\u4ea7\u8ba2\u5355")),r.a.createElement(me.a,{item:!0,style:{flex:1},xs:6},r.a.createElement(de.a,{style:{marginTop:0,padding:"0 .5rem"},select:!0,className:t.textField,autoComplete:"current-password",margin:"normal",onChange:function(t){e.setState({indentTimeType:t.target.value})},InputLabelProps:{shrink:!0},SelectProps:{native:!0,className:"text-blue select leftSelect",align:"center",MenuProps:{}}},this.state.indentTimeTypes.map(function(e,t){return r.a.createElement("option",{key:"option"+t,value:e.value},e.text)}))),r.a.createElement(me.a,{item:!0,style:{flex:1},xs:12},r.a.createElement(x.a,{variant:"outlined",color:"default",onClick:this.exportIndentByTimeType,className:t.button},"\u70b9\u51fb\u7531\u6b64\u4e0b\u8f7d"))),r.a.createElement(me.a,{container:!0,item:!0,xs:6,className:"exportCon",style:{flexDirection:"row"}},r.a.createElement(me.a,{item:!0,xs:12,style:{marginBottom:"1rem"}},r.a.createElement("span",{className:"btn text-blue"},"\u5bfc\u51fa\u8ba2\u5355\u5de5\u65f6")),r.a.createElement(me.a,{item:!0,style:{flex:1},xs:6}),r.a.createElement(me.a,{item:!0,style:{flex:1},xs:12},r.a.createElement(x.a,{variant:"outlined",color:"default",onClick:this.exportIndentWorkHour,className:t.button},"\u70b9\u51fb\u7531\u6b64\u4e0b\u8f7d"))),r.a.createElement(me.a,{container:!0,item:!0,xs:6,className:"exportCon",style:{flexDirection:"row"}},r.a.createElement(me.a,{item:!0,xs:12,style:{marginBottom:"1rem"}},r.a.createElement("span",{className:"btn text-blue"},"\u5bfc\u51fa\u6d41\u7a0b\u5de5\u65f6")),r.a.createElement(me.a,{item:!0,style:{flex:1},xs:6}),r.a.createElement(me.a,{item:!0,style:{flex:1},xs:12},r.a.createElement(x.a,{variant:"outlined",color:"default",onClick:this.exportProcedureWorkHour,className:t.button},"\u70b9\u51fb\u7531\u6b64\u4e0b\u8f7d"))))),r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(_,{open:this.state.deleteOpen,title:this.state.title,content:this.state.content,closeFun:this.deleteModalClose}))),r.a.createElement(Be.a,{style:{marginTop:"70px"},anchorOrigin:{horizontal:"center",vertical:"top"},open:this.state.tipsOpen,onClose:this.handleClose,ContentProps:{className:"info"},message:r.a.createElement("span",{id:"message-id"},this.state.tipInfo?this.state.tipInfo:"")}))}}]),t}(r.a.Component));Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e};var Tt=Object(g.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}})(Dt);a(406);Object(g.withStyles)(function(e){return{root:{margin:0,padding:2*e.spacing.unit}}})(T.a),Object(g.withStyles)(function(e){return{root:{borderTop:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing.unit}}})(j.a);var It=[{id:"name",numeric:!1,disablePadding:!0,label:"\u5e8f\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u8ba2\u5355\u7f16\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u8d27\u53f7"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u8d27\u7269\u540d\u79f0"},{id:"ff",numeric:!0,disablePadding:!1,label:"\u6570\u91cf"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u751f\u4ea7\u6d41\u7a0b"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u6d41\u7a0b\u8d1f\u8d23\u4eba"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u6d41\u7a0b\u72b6\u6001"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u64cd\u4f5c"}],jt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a.state={},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onSelectAllClick,e.order),a=e.orderBy;e.numSelected,e.rowCount;return r.a.createElement(ke.a,null,r.a.createElement(Ne.a,null,It.map(function(e,n){return r.a.createElement(Se.a,{key:"EnhancedTableHead"+n,align:"center",padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&t},e.label)},this)))}}]),t}(r.a.Component),Mt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,chooseList:[{value:0,text:"\u5168\u90e8"},{value:1,text:"\u5df2\u5b8c\u6210"},{value:2,text:"\u8fdb\u884c\u4e2d"}],dateRange:[{text:"\u5168\u90e8",value:0},{text:"\u6700\u8fd1\u4e00\u5468",value:1},{text:"\u6700\u8fd1\u4e00\u6708",value:2},{text:"\u6700\u8fd1\u4e09\u6708",value:3},{text:"\u6700\u8fd1\u4e00\u5e74",value:4},{text:"\u4e00\u5e74\u4ee5\u524d",value:5}],typeQuery:[{text:"\u5168\u90e8",code:0},{text:"\u52a0\u6025",code:1},{text:"\u65b0\u54c1",code:2}],sitQuery:[{text:"\u5168\u90e8",code:"all"},{text:"\u672a\u5f00\u59cb",code:0},{text:"\u8fdb\u884c\u4e2d",code:1},{text:"\u5df2\u5b8c\u6210",code:2}],keyword:sessionStorage.indentStatusKeywordSure&&sessionStorage.indentStatusKeyword||""},a.handleClose=function(){a.setState({open:!1})},a.addTemplate=function(){a.setState({open:!0})},a.queryKeyword=function(e){e.persist(),delete sessionStorage.indentStatusKeywordSure,sessionStorage.indentStatusKeyword=e.target.value,a.setState({keyword:e.target.value}),a.props.queryByKeyword(e.target.value)},a.submitFile=function(){a.state.fileValue?console.log(a.state.fileValue):a.tips("\u8bf7\u9009\u62e9\u6587\u4ef6\u540e\u518d\u4e0a\u4f20")},a.tips=a.props.tips,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.dateRange,n=t.typeQuery,l=t.sitQuery,i=t.keyword;return r.a.createElement("div",{className:"".title},r.a.createElement(De.a,null,r.a.createElement(q.a,{variant:"h6",id:"tableTitle",align:"left"},this.state.chooseMonth?this.state.chooseMonth+"\u6708":"\u6240\u6709","\u8ba2\u5355\u72b6\u6001")),r.a.createElement(me.a,{container:!0,style:{margin:"1rem 0 0",padding:"0 1.2rem"}},r.a.createElement(me.a,{item:!0,align:"left",xs:6},r.a.createElement(me.a,{item:!0,xs:12,className:"filterTool small"},r.a.createElement("span",{className:"blod"},"\u65f6\u95f4"),a.map(function(t,a){return r.a.createElement("span",{key:a,className:"btn-sm "+(2===a?"bg-primary":""),onClick:function(a){return e.props.queryIndentStatusByDate(a,t)}}," ",t.text)})),r.a.createElement(me.a,{item:!0,xs:12,className:"filterTool small",style:{margin:"1rem 0"}},r.a.createElement("span",{className:"blod"},"\u7c7b\u578b"),n.map(function(t,a){return r.a.createElement("span",{key:a,className:"btn-sm "+(0===a?"bg-primary":""),onClick:function(n){return e.props.queryIndentStatusByType(n,t,a)}}," ",t.text)})),r.a.createElement(me.a,{item:!0,xs:12,align:"left",className:"filterTool small",style:{margin:"1rem 0"}},r.a.createElement("span",{className:"blod"},"\u72b6\u6001"),l.map(function(t,a){return r.a.createElement("span",{key:a,className:"type-sit btn-sm "+(0==a?"bg-primary":""),onClick:function(n){return e.props.queryIndentStatusBySit(n,t,a)}}," ",t.text)}))),r.a.createElement(me.a,{item:!0,align:"right",xs:6},r.a.createElement(de.a,{style:{marginTop:0,marginLeft:"1rem"},placeholder:"\u8bf7\u8f93\u5165\u8ba2\u5355\u53f7\u6216\u8d27\u53f7\u67e5\u8be2",className:"".textField,type:"text",value:i,onChange:function(t){return e.queryKeyword(t)},margin:"normal",InputLabelProps:{shrink:!0}}))))}}]),t}(r.a.Component),Bt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={order:"asc",orderBy:"calories",selected:[],data:[],page:0,rowsPerPage:K.indentPageNum||13,open:!0,confirmOpen:!1,title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u8be5\u8ba2\u5355\u5417\uff1f"},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.deleteUser=function(){a.setState({confirmOpen:!0}),a.dlExcel()},a.deleteModalClose=function(){a.setState({confirmOpen:!1})},a.queryByKeyword=function(e){a.state.dataBak||(a.state.dataBak=a.state.data),a.state.data=a.state.dataBak.filter(function(t){return-1!==t.erp.toUpperCase().indexOf(e.toUpperCase())||-1!==t.materialCode.toUpperCase().indexOf(e.toUpperCase())||-1!==t.materialName.toUpperCase().indexOf(e.toUpperCase())}),a.setState({data:a.state.data})},a.queryIndentStatusByDate=function(e,t){var n=a.state,r=n.queryStart,l=n.queryEnd;e.persist();var i=document.querySelectorAll(".filterTool .bg-primary"),o=!0,s=!1,c=void 0;try{for(var d,u=i[Symbol.iterator]();!(o=(d=u.next()).done);o=!0){var m=d.value;m.className=m.className.replace("bg-primary","")}}catch(g){s=!0,c=g}finally{try{o||null==u.return||u.return()}finally{if(s)throw c}}e.target.className+=" bg-primary",l=(new Date).format("yyyy-MM-dd");var p=t.value;0==p?(r="",l=""):1==p?r=new Date(new Date-6048e5).format("yyyy-MM-dd"):2==p?r=new Date(new Date-2592e6).format("yyyy-MM-dd"):3==p?r=new Date(new Date-7776e6).format("yyyy-MM-dd"):4==p?r=new Date(new Date-31536e6).format("yyyy-MM-dd"):5==p&&(r=new Date(new Date-31536e7).format("yyyy-MM-dd"),l=new Date(new Date-31536e6).format("yyyy-MM-dd")),fetch(K.server.listAllIndentStatusByDate+"?startDate="+r+"&endDate="+l).then(function(e){return e.json()}).then(function(e){200===e.code?a.changeIndentStatusData(e.results||[]):a.tips(e.msg)}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.queryIndentStatusByType=function(e,t,n){e.persist();var r=!0,l=!1,i=void 0;try{for(var o,s=e.target.parentElement.children[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;c.className=c.className.replace("bg-primary","")}}catch(d){l=!0,i=d}finally{try{r||null==s.return||s.return()}finally{if(l)throw i}}e.target.className+=" bg-primary",a.state.dataBak||(a.state.dataBak=a.state.data),0==t.code?a.setState({priority:void 0,ifNew:void 0},a.queryDataWithPro):1==t.code?a.setState({priority:1,ifNew:void 0},a.queryDataWithPro):2==t.code&&a.setState({priority:void 0,ifNew:1},a.queryDataWithPro)},a.queryIndentStatusBySit=function(e,t,n){e.persist();var r=!0,l=!1,i=void 0;try{for(var o,s=e.target.parentElement.children[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;c.className=c.className.replace("bg-primary","")}}catch(d){l=!0,i=d}finally{try{r||null==s.return||s.return()}finally{if(l)throw i}}e.target.className+=" bg-primary",a.state.dataBak||(a.state.dataBak=a.state.data),"all"==t.code?a.setState({status:void 0},a.queryDataWithPro):a.setState({status:t.code},a.queryDataWithPro)},a.queryDataWithPro=function(){var e=a.state,t=e.priority,n=e.ifNew,r=e.status;a.state.data=void 0!=r&&t?a.state.dataBak.filter(function(e){return e.status==r&&e.priority==t}):void 0!=r&&n?a.state.dataBak.filter(function(e){return e.status==r&&e.ifNew==n}):t?a.state.dataBak.filter(function(e){return e.priority==t}):n?a.state.dataBak.filter(function(e){return e.ifNew==n}):void 0!=r?a.state.dataBak.filter(function(e){return e.status==r}):a.state.dataBak,a.setState({data:a.state.data})},a.infoTarget=function(e){sessionStorage.indentStatusKeywordSure=1,a.props.history.push("/produceMSF/indent/info"+e.id)},a.setProcedureRestart=function(e,t){var n=t?'\u8ba2\u5355<span class="text-blue">'+e.erp+'</span>\u7684<span class="text-blue">'+e.name+"</span>\u6d41\u7a0b\u5df2\u5b8c\u6210\uff0c\u786e\u5b9a\u91cd\u65b0\u5f00\u59cb\u5417\uff1f":'\u786e\u5b9a\u5f00\u59cb\u8ba2\u5355<span class="text-blue">'+e.erp+'</span>\u7684<span class="text-blue">'+e.name+"</span>\u6d41\u7a0b\u5417\uff1f";a.setState({confirmOpen:!0,title:"\u786e\u8ba4",content:n,sureFun:function(){fetch(K.server.updateDutyProcedureStatus,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,status:1,remark:e.remark})}).then(function(e){return e.json()}).then(function(n){200==n.code?(t?a.tips("\u8be5\u6d41\u7a0b\u5df2\u91cd\u65b0\u5f00\u59cb"):a.tips("\u8be5\u6d41\u7a0b\u5df2\u5f00\u59cb"),e.status=1):a.tips(n.msg)}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},ifInfo:!0})},a.changeIndentStatusData=function(e,t){1==t?(a.state.data.push(e),a.setState({data:a.state.data})):2==t?a.setState({data:a.state.data}):a.setState({data:e}),a.state.dataBak=a.state.data,a.hideInner(!0)},a.tips=function(e){e&&a.setState({tipInfo:e}),a.setState({tipsOpen:!0}),setTimeout(function(){a.setState({tipsOpen:!1})},4e3)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=new Date(new Date-2592e6).format("yyyy-MM-dd"),a=(new Date).format("yyyy-MM-dd");fetch(K.server.listAllIndentStatusByDate+"?startDate="+t+"&endDate="+a).then(function(e){return e.json()}).then(function(t){200===t.code?e.changeIndentStatusData(t.results||[]):e.tips(t.msg)}).catch(function(t){return e.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){document.querySelectorAll(".filterTool .type-sit")[2].click(),sessionStorage.indentStatusKeywordSure&&sessionStorage.indentStatusKeyword&&(delete sessionStorage.indentStatusKeywordSure,e.queryByKeyword(sessionStorage.indentStatusKeyword))},1e3)}},{key:"hideInner",value:function(e){this.setState({loading:e})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.loading,l=a.data,i=a.order,o=a.orderBy,s=a.selected,c=a.rowsPerPage,d=a.page;Math.min(c,l.length-d*c);return r.a.createElement(Ie.a,{className:t.root,style:{padding:"0 2rem",width:"auto"}},r.a.createElement(Mt,{tips:this.tips,queryByKeyword:this.queryByKeyword,queryIndentStatusByDate:this.queryIndentStatusByDate,queryIndentStatusByType:this.queryIndentStatusByType,queryIndentStatusBySit:this.queryIndentStatusBySit}),r.a.createElement("div",{class:t.tablAllCon},n?"":r.a.createElement("div",{className:"backdrop div-inner"},r.a.createElement("div",{className:"relativeCenter text-blue"},r.a.createElement(vt.a,{size:50}))),r.a.createElement("div",{className:t.tableCon},r.a.createElement(ye.a,{className:t.table+" indentStatusTable","aria-labelledby":"tableTitle"},r.a.createElement(jt,{numSelected:s.length,order:i,orderBy:o,rowCount:l.length})),r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(ye.a,{className:t.table+" indentStatusTable","aria-labelledby":"tableTitle"},r.a.createElement(Ee.a,null,l.slice(d*c,d*c+c).map(function(a,n){var l=e.isSelected(a.id);return r.a.createElement(Ne.a,{hover:!0,role:"checkbox","aria-checked":l,tabIndex:-1,key:n,selected:l,className:a.priority?"bg-red2":a.ifNew?"bg-blue2":""},r.a.createElement(Se.a,{align:"center"},d*c+(n+1)),r.a.createElement(Se.a,{align:"center"},a.erp),r.a.createElement(Se.a,{align:"center"},a.materialCode),r.a.createElement(Se.a,{align:"center",className:t.markTd,title:a.materialName},a.materialName),r.a.createElement(Se.a,{align:"center"},a.planNum),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",title:"\u6d41\u7a0b\u540d\u79f0",padding:"none"},a.name),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},a.duty),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none",className:a.status?"text-blue":""},2==a.status?"\u5b8c\u6210":1==a.status?"\u8fdb\u884c\u4e2d":"\u672a\u5f00\u59cb"),r.a.createElement(Se.a,{align:"center"},0==a.status?r.a.createElement("span",{className:"pointer btn text-blue",onClick:function(){return e.setProcedureRestart(a,!1)}},"\u5f00\u59cb"):"",0!=a.status?r.a.createElement("span",{className:"pointer btn text-blue",onClick:function(){return e.infoTarget(a)}},2==a.status?"\u8be6\u60c5":"\u67e5\u770b"):"",2==a.status?r.a.createElement("span",{className:"pointer btn text-notice",onClick:function(){return e.setProcedureRestart(a,!0)}},"\u91cd\u65b0\u5f00\u59cb"):null))}))),l.length?"":r.a.createElement("div",{className:"emptyShow",align:"center",style:{display:"block",padding:"2rem"}},"\u6682\u65e0\u6570\u636e "))),r.a.createElement(Pe.a,{className:"TablePagination",rowsPerPageOptions:[10,20,30],component:"div",count:l.length,rowsPerPage:c,page:d,backIconButtonProps:{"aria-label":"\u4e0a\u4e00\u9875"},nextIconButtonProps:{"aria-label":"\u4e0b\u4e00\u9875"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage})),r.a.createElement(_,{open:this.state.confirmOpen,title:this.state.title,content:this.state.content,closeFun:this.deleteModalClose,sureFun:this.state.sureFun,ifInfo:this.state.ifInfo}),r.a.createElement(Be.a,{style:{marginTop:"70px"},anchorOrigin:{horizontal:"center",vertical:"top"},open:this.state.tipsOpen,ContentProps:{className:"info"},message:r.a.createElement("span",{id:"message-id"},this.state.tipInfo)}))}}]),t}(r.a.Component),Wt=Object(g.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tablAllCon:{position:"relative"},tableCon:{overflowX:"auto",overflowY:"hidden"},tableWrapper:{height:"60vh",overflow:"auto",width:"fit-contentoo"},markTd:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}})(Bt);Object(g.withStyles)(function(e){return{root:{margin:0,padding:2*e.spacing.unit}}})(T.a),Object(g.withStyles)(function(e){return{root:{borderTop:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing.unit}}})(j.a);var qt=[{id:"name",numeric:!1,disablePadding:!0,label:"\u5e8f\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u8ba2\u5355\u7f16\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u8d27\u53f7"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u8d27\u7269\u540d\u79f0"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u8ba2\u5355\u6d41\u7a0b"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u8ba2\u5355\u8d1f\u8d23\u4eba"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u6d41\u7a0b\u72b6\u6001"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u64cd\u4f5c"}],Ft=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a.state={},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onSelectAllClick,e.order),a=e.orderBy;e.numSelected,e.rowCount;return r.a.createElement(ke.a,null,r.a.createElement(Ne.a,null,qt.map(function(e,n){return r.a.createElement(Se.a,{key:"EnhancedTableHead"+n,align:(e.numeric,"left"),padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&t},e.label)},this)))}}]),t}(r.a.Component),At=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,indentType:[{value:0,text:"\u8ba2\u5355\u53f7"},{value:1,text:"\u8d27\u53f7"}]},a.handleClose=function(){a.setState({open:!1})},a.addTemplate=function(){a.setState({open:!0})},a.submitFile=function(){a.state.fileValue?console.log(a.state.fileValue):a.tips("\u8bf7\u9009\u62e9\u6587\u4ef6\u540e\u518d\u4e0a\u4f20")},a.tips=function(e){e&&a.setState({tipInfo:e}),a.setState({tipsOpen:!0}),setTimeout(function(){a.setState({tipsOpen:!1})},4e3)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"".title},r.a.createElement(De.a,null,r.a.createElement(q.a,{variant:"h6",id:"tableTitle",align:"left"},"\u751f\u4ea7\u8ba2\u5355\u67e5\u8be2")),r.a.createElement(me.a,{container:!0,align:"left",style:{margin:"1rem 0 1rem",padding:"0 1.2rem"}},r.a.createElement(me.a,{item:!0,xs:12},r.a.createElement(de.a,{style:{marginTop:0,padding:"0 .5rem"},select:!0,className:"".textField,autoComplete:"current-password",margin:"normal",InputLabelProps:{shrink:!0},SelectProps:{native:!0,className:"text-blue select leftSelect",align:"center",MenuProps:{}}},this.state.indentType.map(function(e,t){return r.a.createElement("option",{key:"option"+t,value:e.value},e.text)})),r.a.createElement(de.a,{style:{marginTop:0,padding:"0 .5rem"},type:"text",placeholder:"\u8bf7\u8f93\u5165\u67e5\u8be2\u53f7\u7801",className:"".textField,autoComplete:"current-password",margin:"normal",InputLabelProps:{shrink:!0},SelectProps:{native:!0,className:"text-blue select",align:"center",MenuProps:{}}}))))}}]),t}(r.a.Component),Rt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={order:"asc",orderBy:"calories",selected:[],data:[],page:0,rowsPerPage:K.pageChangeNum||13,open:!0,deleteOpen:!1,title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u8be5\u8ba2\u5355\u5417\uff1f"},a.handleClick=function(e,t){var n=a.state.selected,r=n.indexOf(t),l=[];-1===r?l=l.concat(n,t):0===r?l=l.concat(n.slice(1)):r===n.length-1?l=l.concat(n.slice(0,-1)):r>0&&(l=l.concat(n.slice(0,r),n.slice(r+1))),a.setState({selected:l})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.deleteUser=function(){a.setState({deleteOpen:!0})},a.deleteModalClose=function(){a.setState({deleteOpen:!1})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.data,l=a.order,i=a.orderBy,o=a.selected,s=a.rowsPerPage,c=a.page,d=s-Math.min(s,n.length-c*s);return r.a.createElement(Ie.a,{className:t.root,style:{padding:"0 2rem",width:"auto"}},r.a.createElement(At,null),r.a.createElement("div",{className:t.tableWrapper},this.state.data.length?r.a.createElement(ye.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(Ft,{numSelected:o.length,order:l,orderBy:i,rowCount:n.length}),r.a.createElement(Ee.a,null,n.slice(c*s,c*s+s).map(function(t){var a=e.isSelected(t.id);return r.a.createElement(Ne.a,{hover:!0,onClick:function(a){return e.handleClick(a,t.id)},role:"checkbox","aria-checked":a,tabIndex:-1,key:t.id,selected:a},r.a.createElement(Se.a,{align:"left"},t.id),r.a.createElement(Se.a,{align:"left"},t.sId),r.a.createElement(Se.a,{align:"left"},t.mCode),r.a.createElement(Se.a,{component:"th",scope:"row",padding:"none"},t.mName),r.a.createElement(Se.a,{component:"th",scope:"row",padding:"none"},t.indentProcess),r.a.createElement(Se.a,{component:"th",scope:"row",padding:"none"},t.proceeDuty),r.a.createElement(Se.a,{component:"th",scope:"row",padding:"none"},t.dutySatus?"\u5df2\u5b8c\u6210":"\u672a\u5b8c\u6210"),r.a.createElement(Se.a,{align:"left"},r.a.createElement("span",{className:"pointer btn text-blue"},"\u4fee\u6539"),r.a.createElement("span",{className:"pointer btn text-red",onClick:e.deleteUser},"\u5220\u9664")))}),d>0&&r.a.createElement(Ne.a,{style:{height:49*d}},r.a.createElement(Se.a,{colSpan:6}))),r.a.createElement(Pe.a,{className:"TablePagination",rowsPerPageOptions:[10,20,30],component:"div",count:n.length,rowsPerPage:s,page:c,backIconButtonProps:{"aria-label":"\u4e0a\u4e00\u9875"},nextIconButtonProps:{"aria-label":"\u4e0b\u4e00\u9875"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage})):"",r.a.createElement(_,{open:this.state.deleteOpen,title:this.state.title,content:this.state.content,closeFun:this.deleteModalClose})))}}]),t}(r.a.Component),Ut=Object(g.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}})(Rt);var Lt=[{id:"name",numeric:!1,disablePadding:!0,label:"\u5e8f\u53f7"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u5e74\u4efd"},{id:"name",numeric:!1,disablePadding:!0,label:"\u6708\u4efd"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u6743\u91cd"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u64cd\u4f5c"}],Ht=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props;e.order,e.orderBy,e.numSelected,e.rowCount;return r.a.createElement(ke.a,null,r.a.createElement(Ne.a,null,Lt.map(function(e,t){return r.a.createElement(Se.a,{key:"EnhancedTableHead2"+t,align:(e.numeric,"center"),padding:e.disablePadding?"none":"default"},e.label)},this)))}}]),t}(r.a.Component),zt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={open:!1,selectedDataCopy:{}},a.handleClose=function(){a.setState({open:!1})},a.addFactor=function(e){0==e?a.setState({open:!0,serverURL:K.server.updateFactor,ifAdd:1,selectedDataCopy:{}}):1==e&&a.setState({open:!0,serverURL:K.server.updateFactor,ifAdd:0})},a.addFactorSure=function(){var e=a.state,t=e.selectedDataCopy,n=e.ifAdd,r=t.id,l=t.year,i=t.month,o=t.factor;l?i?o?fetch(K.server.updateFactor,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r,year:l,month:i,factor:o})}).then(function(e){return e.json()}).then(function(e){200==e.code?(console.log(n),n?a.props.changeFactorData(e,1):(a.state.selectedData&&(a.state.selectedData.factor=a.state.selectedDataCopy.factor),a.props.changeFactorData("",2)),a.setState({open:!1})):a.tips(e.msg)}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")}):a.tips("\u8bf7\u586b\u5199\u6743\u91cd\u6570\u503c"):a.tips("\u8bf7\u5148\u586b\u5199\u6708\u4efd"):a.tips("\u8bf7\u5148\u586b\u5199\u5e74\u4efd")},a.updateFactorModal=function(e,t){a.setState({tName:t.name,tProcedure:t.content,tDuty:t.duty}),a.setState({selectedData:t,selectedDataCopy:JSON.parse(JSON.stringify(t))}),a.addFactor(e)},a.addFactorModal=function(){var e=Object(g.withStyles)(function(e){return{root:{borderBottom:"1px solid ".concat(e.palette.divider),margin:0,padding:2*e.spacing.unit},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.children,a=e.classes,n=e.onClose;return r.a.createElement(O.a,{disableTypography:!0,className:a.root},r.a.createElement(q.a,{variant:"h6"},t),n?r.a.createElement(f.a,{"aria-label":"Close",className:a.closeButton,onClick:n},r.a.createElement(B.a,null)):null)}),t=a.state,n=t.selectedDataCopy,l=t.ifAdd;return r.a.createElement(C.a,{"aria-labelledby":"customized-dialog-title",open:a.state.open,style:{marginTop:"-10rem"}},r.a.createElement(e,{id:"customized-dialog-title",onClose:a.handleClose},l?"\u6dfb\u52a0":"\u7f16\u8f91","\u6743\u6570"),r.a.createElement("form",{className:"".container,noValidate:!0,autoComplete:"off",style:{padding:"2rem 6rem 3rem"}},r.a.createElement(me.a,{container:!0,spacing:24},r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:0}},r.a.createElement(de.a,{fullWidth:!0,style:{marginTop:0},placeholder:"\u8bf7\u8f93\u5165\u8bbe\u7f6e\u5e74\u4efd",label:"\u5e74\u4efd",disabled:!a.state.ifAdd,className:"".textField,value:void 0==n.year?(new Date).getFullYear():n.year,onChange:function(e){e.persist(),n.year=e.target.value,a.setState({selectedDataCopy:n})},margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:0}},r.a.createElement(de.a,{fullWidth:!0,style:{marginTop:0},placeholder:"\u8bf7\u8f93\u5165\u8bbe\u7f6e\u6708\u4efd",label:"\u6708\u4efd",value:void 0==n.month?(new Date).getMonth()+1:n.month,onChange:function(e){e.persist(),n.month=e.target.value,a.setState({selectedDataCopy:n})},disabled:!a.state.ifAdd,defaultValue:"",className:"".textField,margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:0}},r.a.createElement(de.a,{fullWidth:!0,style:{marginTop:0},placeholder:"\u8bf7\u8bbe\u7f6e\u4fee\u6539\u540e\u7684\u6743\u6570",label:"\u6743\u91cd",className:"".textField,value:n.factor,onChange:function(e){e.persist(),n.factor=e.target.value,a.setState({selectedDataCopy:n})},type:"text",autoComplete:"current-password",margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement(me.a,{item:!0,xs:12,align:"center"},r.a.createElement(x.a,{variant:"outlined",style:{marginRight:"1rem"},color:"primary",onClick:a.addFactorSure,className:"".button},"\u63d0\u4ea4"),r.a.createElement(x.a,{variant:"outlined",style:{marginRight:"1rem"},color:"secondary",className:"".button},"\u91cd\u7f6e")))))},a.tips=a.props.tips,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(De.a,null,r.a.createElement(q.a,{variant:"h6",id:"tableTitle",align:"left"},"\u6743\u6570\u7ba1\u7406")),r.a.createElement(me.a,{container:!0,align:"right",style:{margin:"0rem 0 1rem",padding:"0 1.2rem"}},r.a.createElement(me.a,{item:!0,xs:12})),this.addFactorModal())}}]),t}(r.a.Component),_t=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={order:"asc",orderBy:"calories",selected:[],data:[],page:0,rowsPerPage:K.pageChangeNum||13,open:!0,deleteOpen:!1,title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u8be5\u540d\u7528\u6237\u5417\uff1f"},a.handleSelectAllClick=function(e){e.target.checked?a.setState(function(e){return{selected:e.data.map(function(e){return e.id})}}):a.setState({selected:[]})},a.handleClick=function(e,t){var n=a.state.selected,r=n.indexOf(t),l=[];-1===r?l=l.concat(n,t):0===r?l=l.concat(n.slice(1)):r===n.length-1?l=l.concat(n.slice(0,-1)):r>0&&(l=l.concat(n.slice(0,r),n.slice(r+1))),a.setState({selected:l})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.updateFactor=function(e,t){a.refs.modalMethod.updateFactorModal(1,e),a.setState({editNum:t})},a.deleteModalClose=function(){a.setState({deleteOpen:!1})},a.changeFactorData=function(e,t){1==t?(a.state.data.push(e),a.setState({data:a.state.data})):2==t?a.setState({data:a.state.data}):a.setState({data:e})},a.tips=function(e){e&&a.setState({tipInfo:e}),a.setState({tipsOpen:!0}),setTimeout(function(){a.setState({tipsOpen:!1})},4e3)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;fetch(K.server.listAllFactor).then(function(e){return e.json()}).then(function(t){200==t.code?e.changeFactorData(t.results||[]):e.tips(t.msg)}).catch(function(t){return e.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.data,l=a.order,i=a.orderBy,o=a.selected,s=a.rowsPerPage,c=a.page,d=s-Math.min(s,n.length-c*s);return r.a.createElement(Ie.a,{className:t.root,style:{padding:"0 2rem",width:"auto"}},r.a.createElement(zt,{ref:"modalMethod",tips:this.tips,changeFactorData:this.changeFactorData}),r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(ye.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(Ht,{numSelected:o.length,order:l,orderBy:i,rowCount:n.length}),r.a.createElement(Ee.a,null,n.slice(c*s,c*s+s).map(function(t,a){var n=e.isSelected(t.id);return r.a.createElement(Ne.a,{hover:!0,role:"checkbox","aria-checked":n,tabIndex:-1,key:"user"+t.id,selected:n},r.a.createElement(Se.a,{align:"center"},c*s+a+1),r.a.createElement(Se.a,{align:"center"},t.year),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},t.month),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},t.factor),r.a.createElement(Se.a,{align:"center"},r.a.createElement("span",{className:"pointer btn text-blue",onClick:function(){return e.updateFactor(t,c*s+a)}},"\u4fee\u6539")))}),d>0&&r.a.createElement(Ne.a,{style:{height:49*d}},r.a.createElement(Se.a,{colSpan:6})))),n.length?"":r.a.createElement("div",{className:"emptyShow",align:"center",style:{display:"block",padding:"2rem"}},"\u6682\u65e0\u6570\u636e "),r.a.createElement(_,{open:this.state.deleteOpen,title:this.state.title,content:this.state.content,closeFun:this.deleteModalClose})),r.a.createElement(Pe.a,{className:"TablePagination",component:"div",count:n.length,rowsPerPage:s,page:c,backIconButtonProps:{"aria-label":"\u4e0a\u4e00\u9875"},nextIconButtonProps:{"aria-label":"\u4e0b\u4e00\u9875"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}),r.a.createElement(Be.a,{style:{marginTop:"70px"},key:(new Date).getTime()+Math.random(),anchorOrigin:{horizontal:"center",vertical:"top"},open:this.state.tipsOpen,ContentProps:{className:"info"},message:r.a.createElement("span",{id:"message-id"},this.state.tipInfo)}))}}]),t}(r.a.Component),Jt=Object(g.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}})(_t);Object(g.withStyles)(function(e){return{root:{margin:0,padding:2*e.spacing.unit}}})(T.a),Object(g.withStyles)(function(e){return{root:{borderTop:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing.unit}}})(j.a);var Kt=[{id:"name",numeric:!1,disablePadding:!0,label:"\u5e8f\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u8ba2\u5355\u7f16\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u4ea7\u54c1\u7f16\u53f7"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u603b\u751f\u4ea7\u6570\u91cf"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u603b\u5de5\u65f6"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u5355\u6570\u91cf\u5de5\u65f6"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u6743\u6570"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u5de5\u65f6\u8d39"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u603b\u4eba\u6570"},{id:"action",numeric:!0,disablePadding:!1,label:"\u64cd\u4f5c"}],Vt=[{id:"name",numeric:!1,disablePadding:!0,label:"\u5e8f\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u8ba2\u5355\u7f16\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u4ea7\u54c1\u7f16\u53f7"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u6d41\u7a0b\u540d\u79f0"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u603b\u751f\u4ea7\u6570\u91cf"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u603b\u5de5\u65f6"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u5355\u6570\u91cf\u5de5\u65f6"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u6743\u6570"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u5de5\u65f6\u8d39"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u603b\u4eba\u6570"}],Xt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a.state={},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onSelectAllClick,e.order),a=e.orderBy,n=(e.numSelected,e.rowCount,e.rows);return r.a.createElement(ke.a,null,r.a.createElement(Ne.a,null,n.map(function(e,n){return r.a.createElement(Se.a,{key:"EnhancedTableHead"+n,align:(e.numeric,"center"),padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&t},e.label)},this)))}}]),t}(r.a.Component),Yt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,chooseList:[{value:0,text:"\u5168\u90e8"},{value:1,text:"\u5df2\u5b8c\u6210"},{value:2,text:"\u8fdb\u884c\u4e2d"}],dateRange:[{text:"\u6700\u8fd1\u4e00\u5468"},{text:"\u6700\u8fd1\u4e00\u6708"},{text:"\u6700\u8fd1\u4e09\u6708"},{text:"\u6700\u8fd1\u4e00\u5e74"},{text:"\u4e00\u5e74\u4ee5\u524d"}]},a.handleClose=function(){a.setState({open:!1})},a.queryWorktimeStatusByDate=function(e,t,n){var r=a.state,l=r.queryStart,i=r.queryEnd;e.persist();var o=!0,s=!1,c=void 0;try{for(var d,u=e.target.parentElement.children[Symbol.iterator]();!(o=(d=u.next()).done);o=!0){var m=d.value;m.className=m.className.replace("text-blue","")}}catch(p){s=!0,c=p}finally{try{o||null==u.return||u.return()}finally{if(s)throw c}}e.target.className+=" text-blue",i=(new Date).format("yyyy-MM-dd"),0==n?l=new Date(new Date-6048e5).format("yyyy-MM-dd"):1==n?l=new Date(new Date-2592e6).format("yyyy-MM-dd"):2==n?l=new Date(new Date-7776e6).format("yyyy-MM-dd"):3==n?l=new Date(new Date-31536e6).format("yyyy-MM-dd"):4==n&&(l=new Date(new Date-31536e7).format("yyyy-MM-dd"),i=new Date(new Date-31536e6).format("yyyy-MM-dd")),fetch(K.server.queryWorkHourByDate+"?startDate="+l+"&endDate="+i).then(function(e){return e.json()}).then(function(e){a.props.changeWorktimeData(e.results||[])}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.addTemplate=function(){a.setState({open:!0})},a.tips=a.props.tips,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;this.state.dateRange;return r.a.createElement("div",{className:"".title},r.a.createElement(De.a,null,r.a.createElement(q.a,{variant:"h6",id:"tableTitle",align:"left"},this.props.title)),r.a.createElement(me.a,{container:!0,align:"left",style:{margin:"1rem 0 1rem",padding:"0 1.2rem"}},r.a.createElement(me.a,{item:!0,xs:6,align:"left"},r.a.createElement("div",{style:{textAlign:"right",paddingRight:"0rem"}},"\u7b5b\u9009:")),r.a.createElement(me.a,{item:!0,align:"right",xs:2},r.a.createElement(de.a,{style:{marginTop:0,marginLeft:"1rem"},placeholder:"\u8ba2\u5355\u53f7\u6216\u8d27\u53f7",className:"".textField,type:"text",onChange:function(t){return e.props.queryByKeyword(t,1)},margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement(me.a,{item:!0,align:"right",xs:2},r.a.createElement(de.a,{style:{marginTop:0,marginLeft:"1rem"},placeholder:"\u8bf7\u8f93\u5165\u751f\u4ea7\u6570\u91cf",className:"".textField,type:"text",onChange:function(t){return e.props.queryByKeyword(t,2)},margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement(me.a,{item:!0,align:"right",xs:2},r.a.createElement(de.a,{style:{marginTop:0,marginLeft:"1rem"},placeholder:"\u8bf7\u8f93\u5165\u4eba\u6570",className:"".textField,type:"text",onChange:function(t){return e.props.queryByKeyword(t,3)},margin:"normal",InputLabelProps:{shrink:!0}})),this.props.ifProcedure?r.a.createElement(me.a,{item:!0,xs:6,align:"right"},r.a.createElement("span",{className:"text-blue pointer",title:"\u8fd4\u56de\u4e0a\u7ea7",onClick:function(){return e.props.toIndent(!0)}},"\u8fd4\u56de")):""))}}]),t}(r.a.Component),Qt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={order:"asc",orderBy:"calories",selected:[],data:[],page:0,rowsPerPage:K.pageChangeNum||13,open:!0,deleteOpen:!1,title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u8be5\u8ba2\u5355\u5417\uff1f",selectedData:{}},a.queryIndentWorkHour=function(){fetch(K.server.queryWorkHourByDate).then(function(e){return e.json()}).then(function(e){200==e.code?a.changeWorktimeData(e.results||[]):a.tips(e.msg)}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.queryProcedureWorkHour=function(e){console.log(e),fetch(K.server.queryProcedureWorkTime+"?indentID="+e.indentID).then(function(e){return e.json()}).then(function(e){200==e.code?a.changeWorktimeData(e.results||[]):a.tips(e.msg)}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.queryByKeyword=function(e,t){e.persist(),1===t?a.filter_id=e.target.value.toUpperCase():2===t?a.filter_count=e.target.value:3===t&&(a.filter_num=e.target.value),a.filter_id=a.filter_id||"",a.filter_count=a.filter_count||"",a.filter_num=a.filter_num||"",a.state.dataBak||(a.state.dataBak=a.state.data),a.state.data=a.state.dataBak.filter(function(e){return(e.erp.toUpperCase().match(a.filter_id)||e.materialCode.toUpperCase().match(a.filter_id)||e.materialName.toUpperCase().match(a.filter_id))&&(""==a.filter_count||e.planNum==a.filter_count)&&(""==a.filter_num||e.countWorker==a.filter_num)}),a.setState({data:a.state.data})},a.deleteUser=function(){a.setState({deleteOpen:!0})},a.deleteModalClose=function(){a.setState({deleteOpen:!1})},a.toIndent=function(){a.setState({ifProcedure:!1}),a.queryIndentWorkHour()},a.changeWorktimeData=function(e,t){1==t?(a.state.data.push(e),a.setState({data:a.state.data})):2==t?a.setState({data:a.state.data}):a.setState({data:e}),a.hideInner(!0)},a.timeInProgramModal=function(){var e=Object(g.withStyles)(function(e){return{root:{margin:0,padding:18},titlep:{fontSize:20}}})(function(e){var t=e.children,a=e.classes;e.onClose;return r.a.createElement(O.a,{disableTypography:!0,className:a.root},r.a.createElement(q.a,{variant:"",className:a.titlep},t))}),t=a.state,n=t.selectedData,l=t.showProgram,i=Object(g.withStyles)(function(e){return{container:{minWidth:"40vw",minHeight:"10vh",maxHeight:"40vh",overflowY:"scroll"},li:{padding:"4px 0",textAlign:"left"},li_half1:{display:"inline-block",width:"100%"},li_half2:{display:"none",boxSizing:"border-box",width:"0%"},rightBadge:{top:"-8px",right:0,position:"relative",background:"rgb(234 69 69 / 41%)",color:" #ffffff!important",borderRradius:"3px",padding:"2px 3px"}}})(function(t){t.children;var i=t.classes;t.onClose;return r.a.createElement(C.a,{"aria-labelledby":"customized-dialog-title",className:"modal lg",open:a.state.timeModal,style:{marginTop:"-10rem"},onClose:function(){return a.setState({timeModal:!1})}},r.a.createElement(e,{id:"customized-dialog-title"},"\u8ba2\u5355",r.a.createElement("span",{className:"text-blue"},n.erp),"\u53c2\u4e0e\u8bbe\u5907",r.a.createElement("small",{style:{paddingLeft:"1rem"}},"\u5171\u8ba1",l?l.length:"")),r.a.createElement("div",{className:i.container,noValidate:!0,autoComplete:"off",style:{margin:".5rem 2rem 2rem",padding:"1rem"}},r.a.createElement(me.a,{container:!0,spacing:24},r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:0}},r.a.createElement("table",{style:{paddingLeft:0,marginTop:0,listStyle:"none",width:"100%"}},r.a.createElement("thead",null,r.a.createElement("tr",{className:i.li,style:{fontSize:"18px"}},r.a.createElement("th",null,"\u5e8f\u53f7"),r.a.createElement("th",null,"\u6d41\u7a0b"),r.a.createElement("th",null,"\u7269\u6599"),r.a.createElement("th",null,"\u8bbe\u5907"),r.a.createElement("th",null,"\u5de5\u65f6"))),r.a.createElement("tbody",null,l?l.map(function(e,t){return r.a.createElement("tr",{className:i.li},r.a.createElement("td",null,r.a.createElement("i",{style:{paddingRight2:".8rem",fontSize:"smaller"}},t+1+".  ")),r.a.createElement("td",null,r.a.createElement("span",{className:"text-blue2 eq-time-name",title:"\u6d41\u7a0b\u540d\u79f0:"+e.name},e.name,r.a.createElement("small",{className:i.rightBadge},0==e.pro_status?"\u672a\u5b8c\u6210":""))),r.a.createElement("td",null,r.a.createElement("span",{className:"text-blue2 eq-time-name",title:"\u7269\u6599\u540d\u79f0"+e.materialName},e.materialName)),r.a.createElement("td",null,r.a.createElement("span",{className:"text-blue2 eq-time-name",title:"\u8bbe\u5907\u540d\u79f0:"+e.worker},e.worker)),r.a.createElement("td",null,r.a.createElement("span",{title:"\u5de5\u65f6"},e.worktime?e.worktime.toFixed(3):0)))}):""))))))});return r.a.createElement(i,null)},a.showEqWorkTimeMoal=function(e){fetch(K.server.queryEqWorkTimeWithIndentID+"?id="+e.indentID).then(function(e){return e.json()}).then(function(e){200==e.code?a.setState({timeModal:!0,selectedData:e,showProgram:e.results}):a.tips(e.msg)}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.tips=function(e){e&&a.setState({tipInfo:e}),a.setState({tipsOpen:!0}),setTimeout(function(){a.setState({tipsOpen:!1})},4e3)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.match.params.id;this.props.match.params;e?this.setState({ifProcedure:!0}):this.setState({ifProcedure:!1}),this.queryIndentWorkHour();new Date(new Date-6048e5).format("yyyy-MM-dd"),(new Date).format("yyyy-MM-dd")}},{key:"hideInner",value:function(e){this.setState({loading:e})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.loading,l=a.data,i=a.order,o=a.orderBy,s=a.selected,c=a.rowsPerPage,d=a.page,u=a.ifProcedure,m=c-Math.min(c,l.length-d*c);return this.state.date_in=[new Date,new Date],u?r.a.createElement(Ie.a,{className:t.root,style:{padding:"0 2rem",width:"auto"}},r.a.createElement(Yt,{title:"\u6d41\u7a0b\u5de5\u65f6",toIndent:this.toIndent,ifProcedure:!0,changeWorktimeData:this.changeWorktimeData,tips:this.tips}),r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(ye.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(Xt,{numSelected:s.length,order:i,rows:Vt,orderBy:o,rowCount:l.length}),n?"":r.a.createElement("div",{className:"backdrop div-inner"},r.a.createElement("div",{className:"relativeCenter text-blue"},r.a.createElement(vt.a,{size:50}))),r.a.createElement(Ee.a,null,l.slice(d*c,d*c+c).map(function(t,a){var n=e.isSelected(t.id);return r.a.createElement(Ne.a,{hover:!0,role:"checkbox","aria-checked":n,tabIndex:-1,key:t.id,selected:n},r.a.createElement(Se.a,{align:"center"},d*c+a+1),r.a.createElement(Se.a,{align:"center"},t.erp),r.a.createElement(Se.a,{align:"center"},t.materialCode),r.a.createElement(Se.a,{align:"center"},t.name),r.a.createElement(Se.a,{align:"center"},t.planNum),r.a.createElement(Se.a,{align:"center"}," ",t.countHour),r.a.createElement(Se.a,{align:"center"},t.singleHour=(t.countHour/(t.countWorker||1)||0).toFixed(5)),r.a.createElement(Se.a,{align:"center"},t.factor),r.a.createElement(Se.a,{align:"center"},t.cost=(t.singleHour*t.factor).toFixed(5)||0),r.a.createElement(Se.a,{align:"center"},t.countWorker))}),m>0&&r.a.createElement(Ne.a,{style:{height:49*m}},r.a.createElement(Se.a,{colSpan:6}))))),l.length?"":r.a.createElement("div",{className:"emptyShow",align:"center",style:{display:"block",padding:"2rem"}},"\u6682\u65e0\u6570\u636e "),r.a.createElement(Pe.a,{className:"TablePagination",rowsPerPageOptions:[10,20,30],component:"div",count:l.length,rowsPerPage:c,page:d,backIconButtonProps:{"aria-label":"\u4e0a\u4e00\u9875"},nextIconButtonProps:{"aria-label":"\u4e0b\u4e00\u9875"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}),r.a.createElement(_,{open:this.state.deleteOpen,title:this.state.title,content:this.state.content,closeFun:this.deleteModalClose}),r.a.createElement(Be.a,{style:{marginTop:"70px"},key:(new Date).getTime()+Math.random(),anchorOrigin:{horizontal:"center",vertical:"top"},open:this.state.tipsOpen,ContentProps:{className:"info"},message:r.a.createElement("span",{id:"message-id"},this.state.tipInfo?this.state.tipInfo:"")})):r.a.createElement(Ie.a,{className:t.root,style:{padding:"0 2rem",width:"auto"}},r.a.createElement(Yt,{title:"\u8ba2\u5355\u5de5\u65f6",changeWorktimeData:this.changeWorktimeData,queryByKeyword:this.queryByKeyword,tips:this.tips}),r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(ye.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(Xt,{rows:Kt,numSelected:s.length,order:i,orderBy:o,rowCount:l.length}),n?"":r.a.createElement("div",{className:"backdrop div-inner"},r.a.createElement("div",{className:"relativeCenter text-blue"},r.a.createElement(vt.a,{size:50}))),r.a.createElement(Ee.a,null,l.slice(d*c,d*c+c).map(function(t,a){var n=e.isSelected(t.id);return r.a.createElement(Ne.a,{hover:!0,role:"checkbox","aria-checked":n,tabIndex:-1,key:d*c+a,selected:n},r.a.createElement(Se.a,{align:"center"},d*c+a+1),r.a.createElement(Se.a,{align:"center"},t.erp),r.a.createElement(Se.a,{align:"center"},t.materialCode),r.a.createElement(Se.a,{align:"center"},t.planNum),r.a.createElement(Se.a,{align:"center"}," ",t.countHour),r.a.createElement(Se.a,{align:"center"},t.singleHour),r.a.createElement(Se.a,{align:"center"},t.factor),r.a.createElement(Se.a,{align:"center"},t.cost),r.a.createElement(Se.a,{align:"center"},t.countWorkers),r.a.createElement(Se.a,{align:"center",className:"btn text-blue",onClick:function(){e.showEqWorkTimeMoal(t)}},"\u53c2\u4e0e\u8bbe\u5907"))}),m>0&&r.a.createElement(Ne.a,{style:{height:49*m}},r.a.createElement(Se.a,{colSpan:9})))),l.length?"":r.a.createElement("div",{className:"emptyShow",align:"center",style:{display:"block",padding:"2rem"}},"\u6682\u65e0\u6570\u636e "),r.a.createElement(_,{open:this.state.deleteOpen,title:this.state.title,content:this.state.content,closeFun:this.deleteModalClose}),r.a.createElement(Pe.a,{className:"TablePagination",rowsPerPageOptions:[10,20,30],component:"div",count:l.length,rowsPerPage:c,page:d,backIconButtonProps:{"aria-label":"\u4e0a\u4e00\u9875"},nextIconButtonProps:{"aria-label":"\u4e0b\u4e00\u9875"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage})),r.a.createElement(Be.a,{style:{marginTop:"70px"},key:(new Date).getTime()+Math.random(),anchorOrigin:{horizontal:"center",vertical:"top"},open:this.state.tipsOpen,ContentProps:{className:"info"},message:r.a.createElement("span",{id:"message-id"},this.state.tipInfo?this.state.tipInfo:"")}),this.timeInProgramModal())}}]),t}(r.a.Component),$t=Object(g.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"},tableAllCon:{position:"relative"}}})(Qt);Object(g.withStyles)(function(e){return{root:{margin:0,padding:2*e.spacing.unit}}})(T.a),Object(g.withStyles)(function(e){return{root:{borderTop:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing.unit}}})(j.a);var Gt=[{id:"name",numeric:!1,disablePadding:!0,label:"\u5e8f\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u8ba2\u5355\u7f16\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u4ea7\u54c1\u7f16\u53f7"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u6d41\u7a0b\u540d\u79f0"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u603b\u751f\u4ea7\u6570\u91cf"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u603b\u5de5\u65f6"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u5355\u6570\u91cf\u5de5\u65f6"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u6743\u6570"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u5de5\u65f6\u8d39"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u603b\u4eba\u6570"}],Zt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a.state={},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onSelectAllClick,e.order),a=e.orderBy,n=(e.numSelected,e.rowCount,e.rows);return r.a.createElement(ke.a,null,r.a.createElement(Ne.a,null,n.map(function(e,n){return r.a.createElement(Se.a,{key:"EnhancedTableHead"+n,align:(e.numeric,"center"),padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&t},e.label)},this)))}}]),t}(r.a.Component),ea=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,chooseList:[{value:0,text:"\u5168\u90e8"},{value:1,text:"\u5df2\u5b8c\u6210"},{value:2,text:"\u8fdb\u884c\u4e2d"}],dateRange:[{text:"\u6700\u8fd1\u4e00\u5468"},{text:"\u6700\u8fd1\u4e00\u6708"},{text:"\u6700\u8fd1\u4e09\u6708"},{text:"\u6700\u8fd1\u4e00\u5e74"},{text:"\u4e00\u5e74\u4ee5\u524d"}]},a.handleClose=function(){a.setState({open:!1})},a.addTemplate=function(){a.setState({open:!0})},a.tips=a.props.tips,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;this.state.dateRange;return r.a.createElement("div",{className:"".title},r.a.createElement(De.a,null,r.a.createElement(q.a,{variant:"h6",id:"tableTitle",align:"left"},this.props.title)),r.a.createElement(me.a,{container:!0,align:"left",style:{margin:"1rem 0 1rem",padding:"0 1.2rem"}},r.a.createElement(me.a,{item:!0,xs:6,align:"left"},r.a.createElement("div",{style:{textAlign:"right",paddingRight:"0rem"}},"\u7b5b\u9009:")),r.a.createElement(me.a,{item:!0,align:"right",xs:2},r.a.createElement(de.a,{style:{marginTop:0,marginLeft:"1rem"},placeholder:"\u8bf7\u8f93\u5165\u8ba2\u5355\u53f7\u6216\u8d27\u53f7",className:"".textField,type:"text",onChange:function(t){return e.props.queryByKeyword(t,1)},margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement(me.a,{item:!0,align:"right",xs:2},r.a.createElement(de.a,{style:{marginTop:0,marginLeft:"1rem"},placeholder:"\u8bf7\u8f93\u5165\u751f\u4ea7\u6570\u91cf",className:"".textField,type:"text",onChange:function(t){return e.props.queryByKeyword(t,2)},margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement(me.a,{item:!0,align:"right",xs:2},r.a.createElement(de.a,{style:{marginTop:0,marginLeft:"1rem"},placeholder:"\u8bf7\u8f93\u5165\u4eba\u6570",className:"".textField,type:"text",onChange:function(t){return e.props.queryByKeyword(t,3)},margin:"normal",InputLabelProps:{shrink:!0}}))))}}]),t}(r.a.Component),ta=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={order:"asc",orderBy:"calories",selected:[],data:[],page:0,rowsPerPage:K.pageChangeNum||13,open:!0,deleteOpen:!1,title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u8be5\u8ba2\u5355\u5417\uff1f"},a.queryProcedureWorkHour=function(){fetch(K.server.queryProcedureWorkTime+"?indentID=").then(function(e){return e.json()}).then(function(e){200==e.code?a.changeWorktimeData(e.results||[]):a.tips(e.msg)}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.queryByKeyword=function(e,t){e.persist(),1===t?a.filter_id=e.target.value.toUpperCase():2===t?a.filter_count=e.target.value:3===t&&(a.filter_num=e.target.value),a.filter_id=a.filter_id||"",a.filter_count=a.filter_count||"",a.filter_num=a.filter_num||"",a.state.dataBak||(a.state.dataBak=a.state.data),a.state.data=a.state.dataBak.filter(function(e){return(e.erp.toUpperCase().match(a.filter_id)||e.materialCode.toUpperCase().match(a.filter_id)||e.materialName.toUpperCase().match(a.filter_id))&&(""==a.filter_count||e.planNum==a.filter_count)&&(""==a.filter_num||e.countWorker==a.filter_num)}),a.setState({data:a.state.data})},a.deleteUser=function(){a.setState({deleteOpen:!0})},a.deleteModalClose=function(){a.setState({deleteOpen:!1})},a.toIndent=function(){a.setState({ifProcedure:!1}),a.queryIndentWorkHour()},a.changeWorktimeData=function(e,t){1==t?(a.state.data.push(e),a.setState({data:a.state.data})):2==t?a.setState({data:a.state.data}):a.setState({data:e})},a.tips=function(e){e&&a.setState({tipInfo:e}),a.setState({tipsOpen:!0}),setTimeout(function(){a.setState({tipsOpen:!1})},4e3)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.props.match.params.id,this.props.match.params;this.setState({ifProcedure:!0}),this.queryProcedureWorkHour();new Date(new Date-6048e5).format("yyyy-MM-dd"),(new Date).format("yyyy-MM-dd")}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.data,l=a.order,i=a.orderBy,o=a.selected,s=a.rowsPerPage,c=a.page,d=(a.ifProcedure,s-Math.min(s,n.length-c*s));return this.state.date_in=[new Date,new Date],r.a.createElement(Ie.a,{className:t.root,style:{padding:"0 2rem",width:"auto"}},r.a.createElement(ea,{title:"\u6d41\u7a0b\u5de5\u65f6",toIndent:this.toIndent,ifProcedure:!0,queryByKeyword:this.queryByKeyword,changeWorktimeData:this.changeWorktimeData,tips:this.tips}),r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(ye.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(Zt,{numSelected:o.length,order:l,rows:Gt,orderBy:i,rowCount:n.length}),r.a.createElement(Ee.a,null,n.slice(c*s,c*s+s).map(function(t,a){var n=e.isSelected(t.id);return r.a.createElement(Ne.a,{hover:!0,role:"checkbox","aria-checked":n,tabIndex:-1,key:c*s+a,selected:n},r.a.createElement(Se.a,{align:"center"},c*s+a+1),r.a.createElement(Se.a,{align:"center"},t.erp),r.a.createElement(Se.a,{align:"center"},t.materialCode),r.a.createElement(Se.a,{align:"center"},t.name),r.a.createElement(Se.a,{align:"center"},t.planNum),r.a.createElement(Se.a,{align:"center"}," ",t.countHour),r.a.createElement(Se.a,{align:"center"},t.singleHour=(t.countHour/(t.countWorker||1)||0).toFixed(5)),r.a.createElement(Se.a,{align:"center"},t.factor),r.a.createElement(Se.a,{align:"center"},t.cost=(t.singleHour*t.factor).toFixed(5)||0),r.a.createElement(Se.a,{align:"center"},t.countWorker))}),d>0&&r.a.createElement(Ne.a,{style:{height:49*d}},r.a.createElement(Se.a,{colSpan:10})))),n.length?"":r.a.createElement("div",{className:"emptyShow",align:"center",style:{display:"block",padding:"2rem"}},"\u6682\u65e0\u6570\u636e ")),r.a.createElement(Pe.a,{className:"TablePagination",rowsPerPageOptions:[10,20,30],component:"div",count:n.length,rowsPerPage:s,page:c,backIconButtonProps:{"aria-label":"\u4e0a\u4e00\u9875"},nextIconButtonProps:{"aria-label":"\u4e0b\u4e00\u9875"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}),r.a.createElement(_,{open:this.state.deleteOpen,title:this.state.title,content:this.state.content,closeFun:this.deleteModalClose}),r.a.createElement(Be.a,{style:{marginTop:"70px"},key:(new Date).getTime()+Math.random(),anchorOrigin:{horizontal:"center",vertical:"top"},open:this.state.tipsOpen,ContentProps:{className:"info"},message:r.a.createElement("span",{id:"message-id"},this.state.tipInfo?this.state.tipInfo:"")}))}}]),t}(r.a.Component),aa=Object(g.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}})(ta);Object(g.withStyles)(function(e){return{root:{margin:0,padding:2*e.spacing.unit}}})(T.a),Object(g.withStyles)(function(e){return{root:{borderTop:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing.unit}}})(j.a);var na=[{id:"name",numeric:!1,disablePadding:!0,label:"\u5e8f\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u7528\u6237\u540d\u79f0"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u603b\u5de5\u65f6"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u64cd\u4f5c"}],ra=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a.state={},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onSelectAllClick,e.order),a=e.orderBy,n=(e.numSelected,e.rowCount,e.rows);return r.a.createElement(ke.a,null,r.a.createElement(Ne.a,null,n.map(function(e,n){return r.a.createElement(Se.a,{key:"EnhancedTableHead"+n,align:(e.numeric,"center"),padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&t},e.label)},this)))}}]),t}(r.a.Component),la=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,chooseList:[{value:0,text:"\u5168\u90e8"},{value:1,text:"\u5df2\u5b8c\u6210"},{value:2,text:"\u8fdb\u884c\u4e2d"}],dateRange:[{text:"\u6700\u8fd1\u4e00\u5468"},{text:"\u6700\u8fd1\u4e00\u6708"},{text:"\u6700\u8fd1\u4e09\u6708"},{text:"\u6700\u8fd1\u4e00\u5e74"},{text:"\u4e00\u5e74\u4ee5\u524d"}],startDate:new Date((new Date).getTime()-2592e6),endDate:new Date},a.handleClose=function(){a.setState({open:!1})},a.queryWorktimeByUser=function(){var e=a.state,t=e.startDate,n=e.endDate;fetch(K.server.queryWorkTimeForUser+"?startDate="+t.format("yyyy-MM-dd")+"&endDate="+n.format("yyyy-MM-dd")).then(function(e){return e.json()}).then(function(e){a.props.changeWorktimeData(e.results||[])}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.onChangeStartDate=function(e){a.setState({startDate:e})},a.onChangeEndDate=function(e){a.setState({endDate:e})},a.addTemplate=function(){a.setState({open:!0})},a.tips=a.props.tips,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.queryWorktimeByUser()}},{key:"render",value:function(){var e=this;this.state.dateRange;return r.a.createElement("div",{className:"".title},r.a.createElement(De.a,null,r.a.createElement(q.a,{variant:"h6",id:"tableTitle",align:"left"},this.props.title)),r.a.createElement(me.a,{container:!0,align:"left",style:{margin:"1rem 0 1rem",padding:"0 1.2rem"}},r.a.createElement(me.a,{item:!0,xs:6,align:"left"},"\u6309\u65e5\u671f\u67e5\u8be2\uff1a",r.a.createElement(bt.a,{className:"date-picker inline-block",name:"date-input",value:this.state.startDate,onChange:this.onChangeStartDate,style:{marginbottom:"2rem"}}),r.a.createElement(bt.a,{name:"date-input",className:"date-picker inline-block",value:this.state.endDate,onChange:this.onChangeEndDate}),r.a.createElement("span",{className:"btn bg-primary",style:{marginLeft:"1rem"},onClick:this.queryWorktimeByUser},"\u67e5\u8be2")),r.a.createElement(me.a,{item:!0,align:"right",xs:6},r.a.createElement(de.a,{style:{marginTop:0,marginLeft:"1rem"},placeholder:"\u8bf7\u8f93\u5165\u5458\u5de5\u540d\u79f0\u6216ID\u67e5\u8be2",className:"".textField,type:"text",onChange:function(t){return e.props.queryByKeyword(t)},margin:"normal",InputLabelProps:{shrink:!0}}))))}}]),t}(r.a.Component),ia=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={order:"asc",orderBy:"calories",selected:[],data:[],page:0,rowsPerPage:K.pageChangeNum||13,open:!0,timeModal:!1,deleteOpen:!1,selectedData:{},title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u8be5\u8ba2\u5355\u5417\uff1f"},a.queryWorkHourForUser=function(e,t){fetch(K.server.queryWorkTimeForUser+"?startDate="+e+"&endDate="+t).then(function(e){return e.json()}).then(function(e){200==e.code?a.changeWorktimeData(e.results||[]):a.tips(e.msg)}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.queryByKeyword=function(e){e.persist(),a.state.dataBak||(a.state.dataBak=a.state.data),a.state.data=a.state.dataBak.filter(function(t){return-1!=t.userName.indexOf(e.target.value)||-1!=t.userID.indexOf(e.target.value)}),a.setState({data:a.state.data})},a.timeInProgram=function(e){a.setState({selectedData:e}),fetch(K.server.queryUserProgram+"?userID="+e.id+"&userName="+e.userName).then(function(e){return e.json()}).then(function(e){200==e.code?a.setState({timeModal:!0,showProgram:e.results}):a.tips(e.msg)}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.timeInProgramModal=function(){var e=Object(g.withStyles)(function(e){return{root:{margin:0,padding:18},titlep:{fontSize:20}}})(function(e){var t=e.children,a=e.classes;e.onClose;return r.a.createElement(O.a,{disableTypography:!0,className:a.root},r.a.createElement(q.a,{variant:"",className:a.titlep},t))}),t=a.state,n=t.selectedData,l=t.showProgram,i=Object(g.withStyles)(function(e){return{container:{minWidth:"30vw",minHeight:"30vh",maxHeight:"40vh",overflowY:"scroll"},li:{padding:"4px 0"},li_half1:{display:"inline-block",width:"100%"},li_half2:{display:"none",boxSizing:"border-box",width:"0%"}}})(function(t){t.children;var i=t.classes;t.onClose;return r.a.createElement(C.a,{"aria-labelledby":"customized-dialog-title",className:"modal lg",open:a.state.timeModal,style:{marginTop:"-10rem"},onClose:function(){return a.setState({timeModal:!1})}},r.a.createElement(e,{id:"customized-dialog-title"},r.a.createElement("span",{className:"text-blue"},n.userName),"\u53c2\u4e0e\u9879\u76ee",r.a.createElement("small",{style:{paddingLeft:"1rem"}},"\u5171\u8ba1",l?l.length:"")),r.a.createElement("div",{className:i.container,noValidate:!0,autoComplete:"off",style:{margin:".5rem 2rem 2rem",padding:"1rem"}},r.a.createElement(me.a,{container:!0,spacing:24},r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:0}},r.a.createElement("ul",{style:{paddingLeft:0,marginTop:0,listStyle:"none"}},l?l.map(function(e,t){return r.a.createElement("li",{className:i.li},r.a.createElement("span",{className:i.li_half1},r.a.createElement("i",{style:{paddingRight:".8rem",fontSize:"smaller"}},t+1+".  "),r.a.createElement("span",{className:"text-primary",style:{paddingRight:".8rem"},title:"erp"},e.erp),r.a.createElement("span",{className:"text-blue2",style:{paddingRight:"1.2rem"},title:"\u7269\u6599\u540d\u79f0"},e.materialName),r.a.createElement("span",{style:{paddingLeft:".08rem"},title:"\u6d41\u7a0b"},e.name)),r.a.createElement("span",{style:{paddingRight:"2rem"},className:i.li_half2+" text-blue text-right pointer"}))}):"")))))});return r.a.createElement(i,null)},a.deleteUser=function(){a.setState({deleteOpen:!0})},a.deleteModalClose=function(){a.setState({deleteOpen:!1})},a.toIndent=function(){a.setState({ifProcedure:!1}),a.queryIndentWorkHour()},a.changeWorktimeData=function(e,t){1==t?(a.state.data.push(e),a.setState({data:a.state.data})):2==t?a.setState({data:a.state.data}):a.setState({data:e})},a.tips=function(e){e&&a.setState({tipInfo:e}),a.setState({tipsOpen:!0}),setTimeout(function(){a.setState({tipsOpen:!1})},4e3)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.props.match.params.id,this.props.match.params;this.setState({ifProcedure:!0});new Date(new Date-6048e5).format("yyyy-MM-dd"),(new Date).format("yyyy-MM-dd")}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.data,l=a.order,i=a.orderBy,o=a.selected,s=a.rowsPerPage,c=a.page,d=(a.ifProcedure,s-Math.min(s,n.length-c*s));return this.state.date_in=[new Date,new Date],r.a.createElement(Ie.a,{className:t.root,style:{padding:"0 2rem",width:"auto"}},r.a.createElement(la,{title:"\u5458\u5de5\u5de5\u65f6",toIndent:this.toIndent,ref:"toolbar",ifProcedure:!0,queryByKeyword:this.queryByKeyword,changeWorktimeData:this.changeWorktimeData,tips:this.tips}),r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(ye.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(ra,{numSelected:o.length,order:l,rows:na,orderBy:i,rowCount:n.length}),r.a.createElement(Ee.a,null,n.slice(c*s,c*s+s).map(function(t,a){var n=e.isSelected(t.id);return r.a.createElement(Ne.a,{hover:!0,role:"checkbox","aria-checked":n,tabIndex:-1,key:c*s+a,selected:n},r.a.createElement(Se.a,{align:"center"},c*s+a+1),r.a.createElement(Se.a,{align:"center"},t.userName),r.a.createElement(Se.a,{align:"center"},t.hourcount?t.hourcount.toFixed(3):0),r.a.createElement(Se.a,{align:"center",className:"btn text-blue",onClick:function(){return e.timeInProgram(t)}},"\u53c2\u4e0e\u9879\u76ee"))}),d>0&&r.a.createElement(Ne.a,{style:{height:49*d}},r.a.createElement(Se.a,{colSpan:6})))),n.length?"":r.a.createElement("div",{className:"emptyShow",align:"center",style:{display:"block",padding:"2rem"}},"\u6682\u65e0\u6570\u636e "),r.a.createElement(_,{open:this.state.deleteOpen,title:this.state.title,content:this.state.content,closeFun:this.deleteModalClose})),r.a.createElement(Pe.a,{className:"TablePagination",rowsPerPageOptions:[10,20,30],component:"div",count:n.length,rowsPerPage:s,page:c,backIconButtonProps:{"aria-label":"\u4e0a\u4e00\u9875"},nextIconButtonProps:{"aria-label":"\u4e0b\u4e00\u9875"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}),r.a.createElement(Be.a,{style:{marginTop:"70px"},key:(new Date).getTime()+Math.random(),anchorOrigin:{horizontal:"center",vertical:"top"},open:this.state.tipsOpen,ContentProps:{className:"info"},message:r.a.createElement("span",{id:"message-id"},this.state.tipInfo?this.state.tipInfo:"")}),this.timeInProgramModal())}}]),t}(r.a.Component),oa=Object(g.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}})(ia);Object(g.withStyles)(function(e){return{root:{margin:0,padding:2*e.spacing.unit}}})(T.a),Object(g.withStyles)(function(e){return{root:{borderTop:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing.unit}}})(j.a);var sa=[{id:"name",numeric:!1,disablePadding:!0,label:"\u5e8f\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u8bbe\u5907\u540d\u79f0"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u603b\u5de5\u65f6"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u64cd\u4f5c"}],ca=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a.state={},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onSelectAllClick,e.order),a=e.orderBy,n=(e.numSelected,e.rowCount,e.rows);return r.a.createElement(ke.a,null,r.a.createElement(Ne.a,null,n.map(function(e,n){return r.a.createElement(Se.a,{key:"EnhancedTableHead"+n,align:(e.numeric,"center"),padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&t},e.label)},this)))}}]),t}(r.a.Component),da=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,chooseList:[{value:0,text:"\u5168\u90e8"},{value:1,text:"\u5df2\u5b8c\u6210"},{value:2,text:"\u8fdb\u884c\u4e2d"}],dateRange:[{text:"\u6700\u8fd1\u4e00\u5468"},{text:"\u6700\u8fd1\u4e00\u6708"},{text:"\u6700\u8fd1\u4e09\u6708"},{text:"\u6700\u8fd1\u4e00\u5e74"},{text:"\u4e00\u5e74\u4ee5\u524d"}],startDate:new Date((new Date).getTime()-2592e6),endDate:new Date},a.handleClose=function(){a.setState({open:!1})},a.queryWorktimeByEquipment=function(){var e=a.state,t=e.startDate,n=e.endDate;fetch(K.server.queryWorkTimeForEquipment+"?startDate="+t.format("yyyy-MM-dd")+"&endDate="+n.format("yyyy-MM-dd")).then(function(e){return e.json()}).then(function(e){a.props.changeWorktimeData(e.results||[])}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.onChangeStartDate=function(e){a.setState({startDate:e}),a.props.changDate({startDate:e})},a.onChangeEndDate=function(e){a.setState({endDate:e}),a.props.changDate({endDate:e})},a.addTemplate=function(){a.setState({open:!0})},a.tips=a.props.tips,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.queryWorktimeByEquipment()}},{key:"render",value:function(){var e=this;this.state.dateRange;return r.a.createElement("div",{className:"".title},r.a.createElement(De.a,null,r.a.createElement(q.a,{variant:"h6",id:"tableTitle",align:"left"},this.props.title)),r.a.createElement(me.a,{container:!0,align:"left",style:{margin:"1rem 0 1rem",padding:"0 1.2rem"}},r.a.createElement(me.a,{item:!0,xs:6,align:"left"},"\u6309\u65e5\u671f\u67e5\u8be2\uff1a",r.a.createElement(bt.a,{className:"date-picker inline-block",name:"date-input",value:this.state.startDate,onChange:this.onChangeStartDate,style:{marginbottom:"2rem"}}),r.a.createElement(bt.a,{name:"date-input",className:"date-picker inline-block",value:this.state.endDate,onChange:this.onChangeEndDate}),r.a.createElement("span",{className:"btn bg-primary",style:{marginLeft:"1rem"},onClick:this.queryWorktimeByEquipment},"\u67e5\u8be2")),r.a.createElement(me.a,{item:!0,align:"right",xs:6},r.a.createElement(de.a,{style:{marginTop:0,marginLeft:"1rem"},placeholder:"\u8bf7\u8f93\u5165\u8ba2\u5355\u53f7\u67e5\u8be2\u8bbe\u5907\u5de5\u65f6",className:"".textField,type:"text",onChange:function(t){return e.props.queryTimeByKeyId(t,"value")},margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement("span",{className:"btn bg-primary",style:{marginLeft:"1rem"},onClick:this.props.queryTimeByKeyId},"\u67e5\u8be2"))))}}]),t}(r.a.Component),ua=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={order:"asc",orderBy:"calories",selected:[],data:[],page:0,rowsPerPage:K.pageChangeNum||13,open:!0,timeModal:!1,deleteOpen:!1,selectedData:{},title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u8be5\u8ba2\u5355\u5417\uff1f"},a.queryWorkHourForUser=function(e,t){fetch(K.server.queryWorkTimeForEquipment+"?startDate="+e+"&endDate="+t).then(function(e){return e.json()}).then(function(e){200==e.code?a.changeWorktimeData(e.results||[]):a.tips(e.msg)}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.queryByKeyword=function(e){e.persist(),a.state.dataBak||(a.state.dataBak=a.state.data),a.state.data=a.state.dataBak.filter(function(t){return-1!=t.userName.indexOf(e.target.value)||-1!=t.userID.indexOf(e.target.value)}),a.setState({data:a.state.data})},a.timeInProgram=function(e){a.setState({selectedData:e});var t=a.state,n=t.startDate,r=t.endDate;fetch(K.server.queryEquipmentProgram+"?userID="+e.id+"&userName="+e.name+"&startDate="+n+"&endDate="+r).then(function(e){return e.json()}).then(function(e){200==e.code?a.setState({timeModal:!0,showProgram:e.results}):a.tips(e.msg)}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.showEqWorkTimeMoal=function(e,t){if("value"!=t){var n=a.state.filter_id;n&&fetch(K.server.queryEqWorkTimeWithIndentID+"?id="+n).then(function(e){return e.json()}).then(function(e){200==e.code?a.setState({timeModalId:!0,selectedData:e,showProgram:e.results}):a.tips(e.msg)}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}else a.setState({filter_id:e.target.value})},a.timeInProgramModalById=function(){var e=Object(g.withStyles)(function(e){return{root:{margin:0,padding:18},titlep:{fontSize:20}}})(function(e){var t=e.children,a=e.classes;e.onClose;return r.a.createElement(O.a,{disableTypography:!0,className:a.root},r.a.createElement(q.a,{variant:"",className:a.titlep},t))}),t=a.state,n=t.selectedData,l=t.showProgram,i=Object(g.withStyles)(function(e){return{container:{minWidth:"40vw",minHeight:"10vh",maxHeight:"40vh",overflowY:"scroll"},li:{padding:"4px 0",textAlign:"left"},li_half1:{display:"inline-block",width:"100%"},li_half2:{display:"none",boxSizing:"border-box",width:"0%"},rightBadge:{top:"-8px",right:0,position:"relative",background:"rgb(234 69 69 / 41%)",color:" #ffffff!important",borderRadius:"3px",padding:"1px 2px",margin:"8px 0",display:"inline-block"}}})(function(t){t.children;var i=t.classes;t.onClose;return r.a.createElement(C.a,{"aria-labelledby":"customized-dialog-title",className:"modal lg",open:a.state.timeModalId,style:{marginTop:"-10rem"},onClose:function(){return a.setState({timeModalId:!1})}},r.a.createElement(e,{id:"customized-dialog-title"},"\u8ba2\u5355",r.a.createElement("span",{className:"text-blue"},n.erp),"\u53c2\u4e0e\u8bbe\u5907",r.a.createElement("small",{style:{paddingLeft:"1rem"}},"\u5171\u8ba1",l?l.length:"")),r.a.createElement("div",{className:i.container,noValidate:!0,autoComplete:"off",style:{margin:".5rem 2rem 2rem",padding:"1rem"}},r.a.createElement(me.a,{container:!0,spacing:24},r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:0}},r.a.createElement("table",{style:{paddingLeft:0,marginTop:0,listStyle:"none",width:"100%"}},r.a.createElement("thead",null,r.a.createElement("tr",{className:i.li,style:{fontSize:"18px"}},r.a.createElement("th",null,"\u5e8f\u53f7"),r.a.createElement("th",null,"\u6d41\u7a0b"),r.a.createElement("th",null,"\u7269\u6599"),r.a.createElement("th",null,"\u8bbe\u5907"),r.a.createElement("th",null,"\u5de5\u65f6"))),r.a.createElement("tbody",null,l?l.map(function(e,t){return r.a.createElement("tr",{className:i.li},r.a.createElement("td",null,r.a.createElement("i",{style:{paddingRight2:".8rem",fontSize:"smaller"}},t+1+".  ")),r.a.createElement("td",null,r.a.createElement("span",{className:"text-blue2 eq-time-name",title:"\u6d41\u7a0b\u540d\u79f0:"+e.name},e.name,1==e.pro_status?r.a.createElement("small",{className:i.rightBadge},"\u672a\u5b8c\u6210"):"")),r.a.createElement("td",null,r.a.createElement("span",{className:"text-blue2 eq-time-name",title:"\u7269\u6599\u540d\u79f0"+e.materialName},e.materialName)),r.a.createElement("td",null,r.a.createElement("span",{className:"text-blue2 eq-time-name",title:"\u8bbe\u5907\u540d\u79f0:"+e.worker},e.worker)),r.a.createElement("td",null,r.a.createElement("span",{title:"\u5de5\u65f6"},e.worktime?e.worktime.toFixed(3):0)))}):""))))))});return r.a.createElement(i,null)},a.timeInProgramModal=function(){var e=Object(g.withStyles)(function(e){return{root:{margin:0,padding:18},titlep:{fontSize:20}}})(function(e){var t=e.children,a=e.classes;e.onClose;return r.a.createElement(O.a,{disableTypography:!0,className:a.root},r.a.createElement(q.a,{variant:"",className:a.titlep},t))}),t=a.state,n=t.selectedData,l=t.showProgram,i=Object(g.withStyles)(function(e){return{container:{minWidth:"35vw",minHeight:"30vh",maxHeight:"50vh",overflowY:"scroll"},li:{padding:"4px 0"},li_half1:{display:"inline-block",width:"100%"},li_half2:{display:"none",boxSizing:"border-box",width:"0%"}}})(function(t){t.children;var i=t.classes;t.onClose;return r.a.createElement(C.a,{"aria-labelledby":"customized-dialog-title",className:"modal lg",open:a.state.timeModal,style:{marginTop:"-10rem"},onClose:function(){return a.setState({timeModal:!1})}},r.a.createElement(e,{id:"customized-dialog-title"},"\u8bbe\u5907",r.a.createElement("span",{className:"text-blue"},n.name),"\u53c2\u4e0e\u9879\u76ee",r.a.createElement("small",{style:{paddingLeft:"1rem"}},"\u5171\u8ba1",l?l.length:"")),r.a.createElement("div",{className:i.container,noValidate:!0,autoComplete:"off",style:{margin:".5rem 2rem 2rem",padding:"1rem"}},r.a.createElement(me.a,{container:!0,spacing:24},r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:0}},r.a.createElement("table",{style:{paddingLeft:0,marginTop:0,listStyle:"none"}},r.a.createElement("thead",null,r.a.createElement("tr",{className:i.li,style:{fontSize:"18px"}},r.a.createElement("th",null,"\u5e8f\u53f7"),r.a.createElement("th",null,"erp"),r.a.createElement("th",null,"\u7269\u6599\u540d\u79f0"),r.a.createElement("th",null,"\u6d41\u7a0b"),r.a.createElement("th",null,"\u5de5\u65f6"))),r.a.createElement("tbody",null,l?l.map(function(e,t){return r.a.createElement("tr",{className:i.li},r.a.createElement("td",null,r.a.createElement("i",{style:{paddingRight2:".8rem",fontSize:"smaller"}},t+1+".  ")),r.a.createElement("td",null,r.a.createElement("span",{className:"text-primary",style:{paddingRight2:".8rem",position:"relative"},title:"erp"},e.erp)),r.a.createElement("td",null,r.a.createElement("span",{className:"text-blue2 eq-time-name",title:"\u7269\u6599\u540d\u79f0:"+e.materialName},e.materialName)),r.a.createElement("td",null,r.a.createElement("span",{title:"\u6d41\u7a0b"},e.name)),r.a.createElement("td",null,r.a.createElement("span",{title:"\u5de5\u65f6"},e.eq_hourtime?e.eq_hourtime.toFixed(3):0)))}):""))))))});return r.a.createElement(i,null)},a.deleteUser=function(){a.setState({deleteOpen:!0})},a.deleteModalClose=function(){a.setState({deleteOpen:!1})},a.toIndent=function(){a.setState({ifProcedure:!1}),a.queryIndentWorkHour()},a.changeWorktimeData=function(e,t){1==t?(a.state.data.push(e),a.setState({data:a.state.data})):2==t?a.setState({data:a.state.data}):a.setState({data:e})},a.tips=function(e){e&&a.setState({tipInfo:e}),a.setState({tipsOpen:!0}),setTimeout(function(){a.setState({tipsOpen:!1})},4e3)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.props.match.params.id,this.props.match.params;this.setState({ifProcedure:!0});var e=new Date(new Date-2592e6),t=new Date;this.setState({startDate:e,endDate:t})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.data,l=a.order,i=a.orderBy,o=a.selected,s=a.rowsPerPage,c=a.page,d=(a.ifProcedure,s-Math.min(s,n.length-c*s));return this.state.date_in=[new Date,new Date],r.a.createElement(Ie.a,{className:t.root,style:{padding:"0 2rem",width:"auto"}},r.a.createElement(da,{title:"\u8bbe\u5907\u5de5\u65f6",toIndent:this.toIndent,ref:"toolbar",ifProcedure:!0,queryTimeByKeyId:this.showEqWorkTimeMoal,changeWorktimeData:this.changeWorktimeData,changDate:function(t){return e.setState(t)},tips:this.tips}),r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(ye.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(ca,{numSelected:o.length,order:l,rows:sa,orderBy:i,rowCount:n.length}),r.a.createElement(Ee.a,null,n.slice(c*s,c*s+s).map(function(t,a){var n=e.isSelected(t.id);return r.a.createElement(Ne.a,{hover:!0,role:"checkbox","aria-checked":n,tabIndex:-1,key:c*s+a,selected:n},r.a.createElement(Se.a,{align:"center"},c*s+a+1),r.a.createElement(Se.a,{align:"center"},t.name),r.a.createElement(Se.a,{align:"center"},t.hourcount?t.hourcount.toFixed(3):0),r.a.createElement(Se.a,{align:"center",className:"btn text-blue",onClick:function(){return e.timeInProgram(t)}},"\u53c2\u4e0e\u9879\u76ee"))}),d>0&&r.a.createElement(Ne.a,{style:{height:49*d}},r.a.createElement(Se.a,{colSpan:6})))),n.length?"":r.a.createElement("div",{className:"emptyShow",align:"center",style:{display:"block",padding:"2rem"}},"\u6682\u65e0\u6570\u636e "),r.a.createElement(_,{open:this.state.deleteOpen,title:this.state.title,content:this.state.content,closeFun:this.deleteModalClose})),r.a.createElement(Pe.a,{className:"TablePagination",rowsPerPageOptions:[10,20,30],component:"div",count:n.length,rowsPerPage:s,page:c,backIconButtonProps:{"aria-label":"\u4e0a\u4e00\u9875"},nextIconButtonProps:{"aria-label":"\u4e0b\u4e00\u9875"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}),r.a.createElement(Be.a,{style:{marginTop:"70px"},key:(new Date).getTime()+Math.random(),anchorOrigin:{horizontal:"center",vertical:"top"},open:this.state.tipsOpen,ContentProps:{className:"info"},message:r.a.createElement("span",{id:"message-id"},this.state.tipInfo?this.state.tipInfo:"")}),this.timeInProgramModal(),this.timeInProgramModalById())}}]),t}(r.a.Component),ma=Object(g.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}})(ua),pa=a(187),ga=a.n(pa),ha=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).initBaiduAPI=function(){if(!a.state.baiduTokenid){K.baiduAudioAPI.id,K.baiduAudioAPI.secret;fetch(K.server.queryAudioTokenID).then(function(e){return e.json()}).then(function(e){if(200!==e.code)return a.tips("\u8bed\u97f3\u529f\u80fd\u5f00\u542f\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"),void setTimeout(function(){return a.initBaiduAPI()},4e3);var t=JSON.parse(e.results);a.setState({baiduTokenid:t.access_token}),a.tips("\u6b63\u5728\u5f00\u542f\u8bed\u97f3\u529f\u80fd...")}).catch(function(e){a.tips("\u8bed\u97f3\u529f\u80fd\u5f00\u542f\u5931\u8d25\uff0c\u6b63\u5728\u91cd\u8bd5"),console.log(e),setTimeout(function(){return a.initBaiduAPI()},4e3)})}},a.queryDataTimer=function(){fetch(K.server.listShowPageData).then(function(e){return e.json()}).then(function(e){200===e.code?a.state.pstatus?a.setState({data:e.results.filter(function(e){return 1===e.pstatus})||[]}):a.setState({data:e.results||[]}):a.tips(e.msg)}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.startSpeak=function(){var e=a.state.data,t=JSON.parse(JSON.stringify(e));t.length||(console.log("\u6682\u65e0\u64ad\u62a5\u4fe1\u606f"),a.tips("\u6682\u65e0\u8fdb\u884c\u4e2d\u7684\u52a0\u6025\u8ba2\u5355\u4e0e\u65b0\u54c1\u8ba2\u5355")),a.speakTimer&&clearInterval(a.speakTimer),t=t.filter(function(e){return e.priority||e.ifNew});var n=0,r=t.length;a.speakCount=a.speakCount?++a.speakCount:1,console.log(a.speakCount+"\u8f6e\u8bed\u97f3\u5df2\u5f00\u59cb");var l=function(){if(t=(t=JSON.parse(JSON.stringify(a.state.data))).filter(function(e){return e.priority||e.ifNew}),r=t.length,n<r){var e=t[n];if(e.priority||e.ifNew){var l;l=e.ifNew&&e.priority?"\u7f16\u53f7\u4e3a"+e.erp+"\u7684\u65b0\u54c1\u52a0\u6025\u8ba2\u5355\u7684"+e.name+"\u6d41\u7a0b"+(2===e.status?"\u5df2\u5b8c\u6210":1===e.status?"\u5df2\u5f00\u59cb":"\u6b63\u5728\u51c6\u5907\u4e2d"):e.ifNew?"\u7f16\u53f7\u4e3a"+e.erp+"\u7684\u65b0\u54c1\u8ba2\u5355\u7684"+e.name+"\u6d41\u7a0b"+(2===e.status?"\u5df2\u5b8c\u6210":1===e.status?"\u5df2\u5f00\u59cb":"\u6b63\u5728\u51c6\u5907\u4e2d"):e.priority?"\u7f16\u53f7\u4e3a"+e.erp+"\u7684\u52a0\u6025\u8ba2\u5355\u7684"+e.name+"\u6d41\u7a0b"+(2===e.status?"\u5df2\u5b8c\u6210":1===e.status?"\u5df2\u5f00\u59cb":"\u6b63\u5728\u51c6\u5907\u4e2d"):"\u7f16\u53f7\u4e3a"+e.erp+"\u7684\u8ba2\u5355\u7684"+e.name+"\u6d41\u7a0b"+(2===e.status?"\u5df2\u5b8c\u6210":1===e.status?"\u5df2\u5f00\u59cb":"\u6b63\u5728\u51c6\u5907\u4e2d"),console.log(l),a.speakInfo(l)}n++}else clearInterval(a.speakTimer),setTimeout(function(){a.startSpeak()},5e3)};l(),a.speakTimer=setInterval(l,1e4)},a.speakInfo=function(e){var t=a.state,n=t.audio,r=t.stopSpeak,l=t.baiduTokenid,i=t.per;if(!r&&l){var o="https://tsn.baidu.com/text2audio?lan=zh&cuid=32jbj3454n6k5475475&spd=4&ctp=1&per="+i+"&tex="+encodeURI(e)+"&tok="+a.state.baiduTokenid,s=n||new Audio;s.src=o,s.play(),window.PageAudio=s,a.setState({audio:s})}},a.stopSpeakInfo=function(){var e=a.state.stopSpeak;a.state.audio&&a.state.audio.pause(),a.setState({stopSpeak:!e})},a.startLoop=function(){document.getElementById("produceShowTable")&&(a.loopTimer=setInterval(function(){var e=document.getElementById("produceShowTable").parentNode,t=e.clientHeight,a=document.getElementById("produceShowTable").clientHeight;if(t>=a)document.getElementById("produceShowTable").parentNode.childNodes.length>1&&e.removeChild(e.lastChild);else{if(document.getElementById("produceShowTable").parentNode.childNodes.length<=1){var n=document.getElementById("produceShowTable").cloneNode(!0);e.appendChild(n)}e.scrollTop>=a?e.scrollTop=0:e.scrollTop+=1}},50))},a.toogleLoop=function(){a.loopTimer?(clearInterval(a.loopTimer),a.loopTimer=""):a.startLoop()},a.handleClickOpen=function(){a.setState({open:!0})},a.handleClickFull=function(){var e=a.state.style;e.table={position:"fixed",top:0,left:0,padding:"0rem",width:"100vw",height:"100vh",background:"white",zIndex:10},a.setState({style:e,marginBottom:"-3.5rem"}),a.setState({btnVisible:!a.state.btnVisible}),document.documentElement.requestFullscreen()},a.handleClickFullCancel=function(){var e=a.state.style;e.table={position:"relative",top:0,left:0,padding:"0rem",width:"100%",height:"(100vh-138px)",background:"white",zIndex:0},a.setState({style:e,marginBottom:"0rem"}),a.setState({btnVisible:!a.state.btnVisible}),document.exitFullscreen()},a.tips=function(e){e&&a.setState({tipInfo:e}),a.setState({tipsOpen:!0}),setTimeout(function(){a.setState({tipsOpen:!1})},4e3)},a.handleClose=function(){a.setState({open:!1})},a.state={open:!1,per:0,stopSpeak:0,data:[],style:{table:{width:"99%",padding:"0 1.2rem",textAlign:"left",background:"white"}},btnVisible:!0,pstatus:!1},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.queryDataTimer(),this.initBaiduAPI(),setTimeout(function(){document.getElementById("fullScr").click(),e.startLoop(),e.startSpeak()},1500),this.dataTimer=setInterval(this.queryDataTimer,1e4)}},{key:"componentWillUnmount",value:function(){this.loopTimer&&clearInterval(this.loopTimer),this.dataTimer&&clearInterval(this.dataTimer),this.speakTimer&&clearInterval(this.speakTimer),this.stopSpeakInfo()}},{key:"render",value:function(){var e,t,a=this,n=this.state,l=n.data,i=n.per;n.stopSpeak;return r.a.createElement("div",{style:this.state.style.table,className:"showPage"},r.a.createElement("div",{style:{textAlign:"left",margin:"1.5rem .5rem 1rem"}},r.a.createElement(x.a,(e={variant:"outlined",id:"fullScr",style:{display:this.state.btnVisible?"block":"none",marginBottom:this.state.marginBottom}},Object(he.a)(e,"variant","contained"),Object(he.a)(e,"color","primary"),Object(he.a)(e,"onClick",this.handleClickFull),e),"\u5168\u5c4f"),r.a.createElement(x.a,(t={variant:"outlined",style:{display:this.state.btnVisible?"none":"block",opacity:0,marginBottom:this.state.marginBottom}},Object(he.a)(t,"variant","contained"),Object(he.a)(t,"color","secondary"),Object(he.a)(t,"onMouseEnter",function(e){}),Object(he.a)(t,"onMouseLeave",function(e){}),Object(he.a)(t,"onClick",this.handleClickFullCancel),t),"\u9000\u51fa\u5168\u5c4f"),r.a.createElement("span",{className:"btn bg-primary inline-block hide",style:{marginLeft:"160px",marginBottom:"-2.5rem",position:"relative",zIndex:77},onClick:function(){return a.setState({per:i?0:1})}},1===i?"\u7537\u58f0":"\u5973\u58f0"),r.a.createElement("span",{className:"inline-block hide",style:{left:"14vw",top:".7rem",position:"absolute",zIndex:77}},r.a.createElement(ga.a,{checked:this.state.pstatus,color:"primary",onChange:function(){return a.setState({pstatus:!a.state.pstatus})}})," ",r.a.createElement("small",{className:"small"},"\u8ba2\u5355\u8fdb\u884c\u4e2d")),r.a.createElement(me.a,{container:!0},r.a.createElement(me.a,{item:!0,xs:3,align:"left"},r.a.createElement("span",{className:"blod"},"\u5171",l.length,"\u6761\u8ba2\u5355\u6570\u636e")),r.a.createElement(me.a,{item:!0,xs:9},r.a.createElement("div",{align:"right",style:{paddingRight:"2rem"}},r.a.createElement("span",{className:"rect border bg-success"}),r.a.createElement("span",{className:"inline-block"},"\u5df2\u5b8c\u6210"),r.a.createElement("span",{className:"rect border bg-notice"}),r.a.createElement("span",{className:"inline-block"},"\u65b0\u54c1"),r.a.createElement("span",{className:"rect border bg-red"}),r.a.createElement("span",{className:"inline-block"},"\u52a0\u6025"))))),r.a.createElement("table",{id:"produceShowTableHead",className:"produceShowTable pointer",style:{width:"100%",textAlign:"center"}},r.a.createElement("thead",{onDoubleClick:this.toogleLoop},r.a.createElement("tr",null,r.a.createElement("th",null,"\u5e8f\u53f7"),r.a.createElement("th",null,"ERP\u53f7"),r.a.createElement("th",null,"\u8d27\u53f7"),r.a.createElement("th",null,"\u8d27\u7269\u540d\u79f0"),r.a.createElement("th",null,"\u8ba1\u5212\u751f\u4ea7\u6570\u91cf"),r.a.createElement("th",null,"\u5b9e\u9645\u5f00\u5de5"),r.a.createElement("th",null,"\u8ba1\u5212\u5b8c\u5de5"),r.a.createElement("th",null,"\u751f\u4ea7\u72b6\u6001"),r.a.createElement("th",null,"\u5907\u6ce8")))),r.a.createElement("div",{style:{overflowY:"scroll",height:"calc(100vh - 138px)"}},r.a.createElement("table",{id:"produceShowTable",className:"produceShowTable",style:{width:"100%",textAlign:"center"}},r.a.createElement("tbody",null,l.map(function(e,t){return r.a.createElement("tr",{key:"tr"+t,className:e.priority?"bg-red":e.ifNew?"bg-notice":2===e.status?"bg-success":""},r.a.createElement("td",{style:{padding:"12px 0"}},t+1),r.a.createElement("td",{title:e.erp,style:{padding:"12px 0"}},e.erp),r.a.createElement("td",{title:e.materialCode},e.materialCode),r.a.createElement("td",{title:e.materialName},e.materialName),r.a.createElement("td",null,e.planNum),r.a.createElement("td",null,e.actualStart),r.a.createElement("td",null,e.planFinishDate?new Date(e.planFinishDate).format("yyyy-MM-dd"):""),r.a.createElement("td",null,e.name,r.a.createElement("small",{className:"small"},1===e.status?"\u8fdb\u884c\u4e2d":2===e.status?"\u5df2\u5b8c\u6210":"\u51c6\u5907\u4e2d")),r.a.createElement("td",{title:e.myRemark?e.myRemark:"    "},e.myRemark?e.myRemark:""))})))),r.a.createElement(Be.a,{style:{marginTop:"70px"},anchorOrigin:{horizontal:"center",vertical:"top"},open:this.state.tipsOpen,onClose:function(){return a.setState({tipsOpen:!1})},ContentProps:{className:"info"},message:this.state.tipInfo}))}}]),t}(r.a.Component);Object(g.withStyles)(function(e){return{root:{margin:0,padding:2*e.spacing.unit}}})(T.a),Object(g.withStyles)(function(e){return{root:{borderTop:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing.unit}}})(j.a);var fa=[{id:"name",numeric:!1,disablePadding:!0,label:"\u5e8f\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u8ba2\u5355\u7f16\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u8d27\u53f7"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u8d27\u7269\u540d\u79f0"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u751f\u4ea7\u6570\u91cf"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u8ba2\u5355\u6d41\u7a0b"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u8ba2\u5355\u8d1f\u8d23\u4eba"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u6d41\u7a0b\u72b6\u6001"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u64cd\u4f5c"}],ya=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a.state={},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onSelectAllClick,e.order),a=e.orderBy;e.numSelected,e.rowCount;return r.a.createElement(ke.a,null,r.a.createElement(Ne.a,null,fa.map(function(e,n){return r.a.createElement(Se.a,{key:"EnhancedTableHead"+n,align:(e.numeric,"center"),padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&t},e.label)},this)))}}]),t}(r.a.Component),ba=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,chooseList:[{value:1,text:"\u8fdb\u884c\u4e2d"},{value:2,text:"\u5df2\u5b8c\u6210"},{value:0,text:"\u672a\u5f00\u59cb"},{value:"all",text:"\u5168\u90e8"}],selectedDataCopy:{},selectedData:{}},a.handleClose=function(){a.setState({open:!1})},a.addTemplate=function(){a.setState({open:!0})},a.tips=a.props.tips,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"".title},r.a.createElement(De.a,null,r.a.createElement(q.a,{variant:"h6",id:"tableTitle",align:"left"},"\u8d1f\u8d23\u7684\u8ba2\u5355\u64cd\u4f5c")),r.a.createElement(me.a,{container:!0,align:"right",style:{margin:"-1rem 0 1rem",padding:"0 1.2rem"}},r.a.createElement(me.a,{item:!0,xs:12},r.a.createElement(de.a,{style:{marginTop:0,padding:"0 .5rem"},select:!0,label:"\u72b6\u6001\u9009\u62e9:",className:"".textField,margin:"normal",onChange:function(t){t.persist(),e.props.queryDutyIndentByType(t)},SelectProps:{native:!0,className:"text-blue select",align:"center"}},this.state.chooseList.map(function(e,t){return r.a.createElement("option",{key:"option"+t,value:e.value},e.text)})),r.a.createElement(de.a,{style:{marginTop:0,marginLeft:"1rem"},label:"\u7b5b\u9009",placeholder:"\u8bf7\u8f93\u5165\u8ba2\u5355\u53f7\u6216\u8d27\u53f7\u67e5\u8be2",className:"".textField,type:"text",onChange:function(t){return e.props.queryByKeyword(t)},margin:"normal",InputLabelProps:{shrink:!0}}))))}}]),t}(r.a.Component),Ea=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={order:"asc",orderBy:"calories",select:0,data:[],page:0,rowsPerPage:K.pageChangeNum||13,open:!0,confirmOpen:!1,title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u8be5\u8ba2\u5355\u5417\uff1f"},a.handleClick=function(e,t){var n=a.state.selected,r=n.indexOf(t),l=[];-1===r?l=l.concat(n,t):0===r?l=l.concat(n.slice(1)):r===n.length-1?l=l.concat(n.slice(0,-1)):r>0&&(l=l.concat(n.slice(0,r),n.slice(r+1))),a.setState({selected:l})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.startProcedure=function(e,t,n){a.setState({confirmOpen:!0,title:"\u786e\u8ba4",content:t,sureFun:function(){fetch(K.server.updateDutyProcedureStatus,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,status:1,remark:e.remark})}).then(function(e){return e.json()}).then(function(t){200==t.code?(a.tips("\u8ba2\u5355\u5df2\u5f00\u59cb"),e.status=1,a.changeDutyIndentData("",2)):a.tips(t.msg)}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},ifInfo:n})},a.changeDutyIndentData=function(e,t){1==t?(a.state.data.push(e),a.setState({data:a.state.data})):2==t?a.setState({data:a.state.data}):a.setState({data:e}),a.state.dataBak=a.state.data},a.queryDutyIndentByType=function(e){var t=e.target.value;a.state.dataBak||(a.state.dataBak=a.state.data),a.state.data="all"==t?a.state.dataBak:a.state.dataBak.filter(function(e){return e.status==t}),a.setState({data:a.state.data})},a.queryByKeyword=function(e){e.persist(),a.state.dataBak||(a.state.dataBak=a.state.data),a.state.data=a.state.dataBak.filter(function(t){return-1!=t.erp.toUpperCase().indexOf(e.target.value.toUpperCase())||-1!=t.materialCode.toUpperCase().indexOf(e.target.value.toUpperCase())||-1!=t.materialName.toUpperCase().indexOf(e.target.value.toUpperCase())}),a.setState({data:a.state.data})},a.confirmClose=function(){a.setState({confirmOpen:!1})},a.confirmSure=function(){a.state.deleteFun&&a.state.deleteFun()},a.tips=function(e,t){e&&a.setState({tipInfo:e}),a.setState({tipsOpen:!0}),setTimeout(function(){a.setState({tipsOpen:!1})},t||4e3)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=K.changeToJson(localStorage.user).userID;K.changeToJson(localStorage.user).pwd;fetch(K.server.queryDutyProcedureByStatus+"?userID="+t).then(function(e){return e.json()}).then(function(t){200==t.code?(e.changeDutyIndentData(t.results||[]),e.queryDutyIndentByType({target:{value:1}})):e.tips(t.msg)}).catch(function(t){return e.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.data,l=a.order,i=a.orderBy,o=(a.selected,a.rowsPerPage),s=a.page,c=o-Math.min(o,n.length-s*o);return r.a.createElement(Ie.a,{className:t.root,style:{padding:"0 2rem",width:"auto"}},r.a.createElement(ba,{changeDutyIndentData:this.changeDutyIndentData,queryByKeyword:this.queryByKeyword,queryDutyIndentByType:this.queryDutyIndentByType,tips:this.tips}),r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(ye.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(ya,{order:l,orderBy:i,rowCount:n.length}),r.a.createElement(Ee.a,null,n.slice(s*o,s*o+o).map(function(t,a){return r.a.createElement(Ne.a,{hover:!0,role:"checkbox",tabIndex:-1,key:t.id},r.a.createElement(Se.a,{align:"center"},s*o+(a+1)),r.a.createElement(Se.a,{align:"center"},t.erp),r.a.createElement(Se.a,{align:"center"},t.materialCode),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},t.materialName),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},t.planNum),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},t.procedure),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},t.duty),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none",className:2==t.status?"text-success":1==t.status?"text-blue":""},2==t.status?"\u5b8c\u6210":1==t.status?"\u8fdb\u884c\u4e2d":"\u672a\u5f00\u59cb"),r.a.createElement(Se.a,{align:"center"},0==t.status?r.a.createElement("span",{className:"pointer btn "+(t.status,"text-blue"),onClick:function(){return e.startProcedure(t,"\u4e0a\u4e00\u6d41\u7a0b\u672a\u5b8c\u6210\uff0c\u786e\u5b9a\u5f00\u59cb\u8be5\u6d41\u7a0b\u5417\uff1f",!0)}},"\u5f00\u59cb\u6d41\u7a0b"):2==t.status?r.a.createElement("span",{className:"pointer btn "+(t.status,"text-success"),onClick:function(){return e.startProcedure(t,"\u786e\u5b9a\u91cd\u65b0\u5f00\u59cb\u8be5\u6d41\u7a0b\u5417\uff1f")}},"\u91cd\u65b0\u5f00\u59cb\u6d41\u7a0b"):"",r.a.createElement("span",{className:"pointer btn text-blue",onClick:function(){0!=t.status?e.props.history.push("/produceMSF/dutyIndent/info"+t.id):e.tips("\u5f53\u524d\u6d41\u7a0b\u8fd8\u672a\u5f00\u59cb")}},2==t.status?"\u8be6\u60c5":1==t.status?"\u67e5\u770b":"")))}),c>0&&r.a.createElement(Ne.a,{style:{height:49*c}},r.a.createElement(Se.a,{colSpan:6})))),n.length?"":r.a.createElement("div",{className:"emptyShow",align:"center",style:{display:"block",padding:"2rem"}},"\u6682\u65e0\u6570\u636e ")),r.a.createElement(Pe.a,{className:"TablePagination",rowsPerPageOptions:[10,20,30],component:"div",count:n.length,rowsPerPage:o,page:s,backIconButtonProps:{"aria-label":"\u4e0a\u4e00\u9875"},nextIconButtonProps:{"aria-label":"\u4e0b\u4e00\u9875"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}),r.a.createElement(_,{open:this.state.confirmOpen,title:this.state.title,content:this.state.content,closeFun:this.confirmClose,sureFun:this.state.sureFun,ifInfo:this.state.ifInfo}),r.a.createElement(Be.a,{style:{marginTop:"70px"},key:(new Date).getTime()+Math.random(),anchorOrigin:{horizontal:"center",vertical:"top"},open:this.state.tipsOpen,ContentProps:{className:"info"},message:r.a.createElement("span",{id:"message-id"},this.state.tipInfo?this.state.tipInfo:"")}))}}]),t}(r.a.Component),va=Object(g.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}})(Ea),Sa=a(188),wa=a.n(Sa),ka=a(124),xa=a.n(ka);Object(g.withStyles)(function(e){return{root:{margin:0,padding:2*e.spacing.unit}}})(T.a),Object(g.withStyles)(function(e){return{root:{borderTop:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing.unit}}})(j.a);var Pa=[{id:"name",numeric:!1,disablePadding:!0,label:"\u8ba2\u5355\u7f16\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u8d27\u53f7"},{id:"carbs",numeric:!1,disablePadding:!1,label:"\u8d27\u7269\u540d\u79f0"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u751f\u4ea7\u6570\u91cf"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u8ba2\u5355\u6d41\u7a0b"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u8ba2\u5355\u8d1f\u8d23\u4eba"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u6d41\u7a0b\u72b6\u6001"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u64cd\u4f5c"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u64cd\u4f5c"}],Ca=[{id:"name",numeric:!1,disablePadding:!0,label:"\u6d41\u7a0b\u7f16\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u8d1f\u8d23\u751f\u4ea7\u6570\u91cf"},{id:"name",numeric:!1,disablePadding:!0,label:"\u6d41\u7a0b\u751f\u4ea7\u4eba\u5458"},{id:"name",numeric:!1,disablePadding:!0,label:"\u751f\u4ea7\u4eba\u6570\u91cf"},{id:"name",numeric:!1,disablePadding:!0,label:"\u5b9e\u9645\u751f\u4ea7\u6570\u91cf"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u5f00\u59cb\u751f\u4ea7\u65f6\u95f4"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u7ed3\u675f\u751f\u4ea7\u65f6\u95f4"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u72b6\u6001"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u5907\u6ce8"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u64cd\u4f5c"}],Na=[{id:"name",numeric:!1,disablePadding:!0,label:"\u6d41\u7a0b\u7f16\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u8d1f\u8d23\u751f\u4ea7\u6570\u91cf"},{id:"name",numeric:!1,disablePadding:!0,label:"\u53c2\u4e0e\u8bbe\u5907"},{id:"name",numeric:!1,disablePadding:!0,label:"\u5b9e\u9645\u751f\u4ea7\u6570\u91cf"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u5f00\u59cb\u751f\u4ea7\u65f6\u95f4"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u7ed3\u675f\u751f\u4ea7\u65f6\u95f4"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u72b6\u6001"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u5907\u6ce8"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u64cd\u4f5c"}],Oa=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a.state={},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onSelectAllClick,e.order),a=e.orderBy,n=(e.numSelected,e.rowCount,e.backgroundColor);return r.a.createElement(ke.a,null,r.a.createElement(Ne.a,null,this.props.rows.map(function(e,l){return!e.hidden&&r.a.createElement(Se.a,{style:{background:n},key:"EnhancedTableHead"+l,align:"center",padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&t},e.label)},this)))}}]),t}(r.a.Component),Da=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={chooseList:[{value:0,text:"\u5168\u90e8"},{value:1,text:"\u5df2\u5b8c\u6210"},{value:2,text:"\u8fdb\u884c\u4e2d"},{value:-1,text:"\u62a5\u5e9f"}]},a.tips=function(e){e&&a.setState({tipInfo:e}),a.setState({tipsOpen:!0}),setTimeout(function(){a.setState({tipsOpen:!1})},1e3)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"".title},r.a.createElement(De.a,null,r.a.createElement(me.a,{container:!0},r.a.createElement(me.a,{item:!0,xs:6},r.a.createElement(q.a,{variant:"h6",id:"tableTitle",align:"left"},this.props.allPower?"":"\u8d1f\u8d23\u7684","\u8ba2\u5355\u64cd\u4f5c-\u8be6\u60c5")),r.a.createElement(me.a,{item:!0,xs:6,align:"right"},r.a.createElement("span",{className:"text-blue pointer",title:"\u8fd4\u56de\u4e0a\u7ea7",onClick:function(){return window.ReactHistory.goBack()}},"\u8fd4\u56de")))))}}]),t}(r.a.Component),Ta=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={order:"asc",orderBy:"calories",select:0,data:[],infoData:[],page:0,rowsPerPage:K.pageChangeNum||13,open:!0,confirmOpen:!1,modalOpen:!1,InfoModalOpen:!1,chooseWorkOpen:!1,destroyModalOpen:!1,title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u8be5\u8ba2\u5355\u5417\uff1f",workers:[{name:"\u786e\u5b9a",id:111},{name:"\u5220\u9664",id:234},{name:"\u8ba2\u5355",id:234},{name:"\u786e\u5b9a",id:111},{name:"\u5220\u9664",id:234},{name:"\u8ba2\u5355",id:234},{name:"\u786e\u5b9a",id:111},{name:"\u5220\u9664",id:234},{name:"\u8ba2\u5355",id:234},{name:"\u786e\u5b9a",id:111},{name:"\u5220\u9664",id:234},{name:"\u8ba2\u5355",id:234},{name:"\u786e\u5b9a",id:111},{name:"\u5220\u9664",id:234},{name:"\u8ba2\u5355",id:234}],selectedWorkers:[],selectedDataCopy:{startTime:(new Date).format("yyyy-MM-dd"),startDateTime:new Date},selectIndex:"",autoNext:!0},a.modalClose=function(){a.setState({open:!1,modalOpen:!1,InfoModalOpen:!1,destroyModalOpen:!1})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.deleteModalClose=function(){a.setState({confirmOpen:!1})},a.selectToRight=function(e,t){a.state.workers.splice(t,1),a.setState({workers:a.state.workers}),a.state.selectedWorkers.push(e),a.setState({selectedWorkers:a.state.selectedWorkers})},a.selectToLeft=function(e,t){a.state.selectedWorkers.splice(t,1),a.setState({selectedWorkers:a.state.selectedWorkers}),a.state.workers.push(e),a.setState({workers:a.state.workers})},a.addProcedureInfo=function(e,t,n){var r=a.state.ifEquipment;0==e?(a.setState({ifAdd:!0,productNum:"",actualNum:""}),fetch(r?K.server.listAllEquipment:K.server.listSystemUser).then(function(e){return e.json()}).then(function(e){if(200==e.code){var t=e.results.filter(function(e){return"DFCD00175"!=e.userID&&"DFCD09527"!=e.userID&&"1"!=e.type&&"2"!=e.type});a.setState({modalOpen:!0,workers:t.sort(function(e){return e.userName}),selectedWorkers:[]})}else e.results&&e.results.length?a.tips(e.msg):a.tips((r?"\u8bbe\u5907":"\u751f\u4ea7\u4eba\u5458")+"\u6570\u91cf\u4e3a0\uff0c\u8bf7\u5148\u6dfb\u52a0"+(r?"\u8bbe\u5907":"\u751f\u4ea7\u4eba\u5458"))}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})):(a.setState({ifAdd:!1,selectedInfoData:t,productNum:t.productNum,infoRemark:t.remark,selectedWorkers:t.worker.split(" "),duty:t.duty,selectedIndex:n}),a.setState({modalOpen:!0}))},a.addInfoSure=function(){var e=a.state,t=e.productNum,n=e.actualNum,r=e.selectedWorkers,l=(e.selectedDataCopy,e.selectedInfoData),i=e.pid,o=e.ifAdd,s=e.infoRemark,c=e.ifEquipment;if(t){var d=new RegExp(/^\d+$/).test(t);if(d)if(!n||(d=new RegExp(/^\d+$/).test(n)))if(0!=r.length){var u=[];if(c){var m=!0,p=!1,g=void 0;try{for(var h,f=r[Symbol.iterator]();!(m=(h=f.next()).done);m=!0){w=h.value;u.push(w.name)}}catch(x){p=!0,g=x}finally{try{m||null==f.return||f.return()}finally{if(p)throw g}}}else{var y=!0,b=!1,E=void 0;try{for(var v,S=r[Symbol.iterator]();!(y=(v=S.next()).done);y=!0){var w=v.value;u.push(w.userName)}}catch(x){b=!0,E=x}finally{try{y||null==S.return||S.return()}finally{if(b)throw E}}}if(o)var k=K.server.addProcedureInfo;else k=K.server.updateDutyProcedureDetailStatus;window.loading(!0),fetch(k,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pid:i,id:l?l.id:"",productNum:t,actualNum:n,worker:u.join(" "),remark:s,type:c?1:0})}).then(function(e){return e.json()}).then(function(e){if(200!=e.code)return a.tips(e.msg),void window.loading(!1);o?(a.changeInfoData(e.results,1),a.tips("\u65b0\u589e\u6d41\u7a0b\u8be6\u60c5\u6210\u529f"),window.loading(!1)):(l.productNum=t,l.actualNum=n,l.worker=u.join(" "),a.tips("\u4fee\u6539\u6d41\u7a0b\u8be6\u60c5\u6210\u529f"),window.loading(!1),a.setState(Object(he.a)({selectedInfoData:l},"selectedInfoData",l))),a.modalClose()}).catch(function(e){console.log(e),window.loading(!1),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}else a.tips("\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a\u751f\u4ea7\u4eba\u5458");else a.tips("\u5b9e\u9645\u5b8c\u6210\u6570\u91cf\u4e0d\u80fd\u4e3a\u975e\u6570\u5b57");else a.tips("\u751f\u4ea7\u6570\u91cf\u4e0d\u80fd\u4e3a\u975e\u6570\u5b57")}else a.tips("\u751f\u4ea7\u6570\u91cf\u4e0d\u80fd\u4e3a0")},a.changeInfoData=function(e,t){1==t&&e?(a.state.infoData.push(e),a.setState({infoData:a.state.infoData})):a.setState({infoData:e})},a.confirmClose=function(){a.setState({confirmOpen:!1})},a.finishProcedure=function(e,t){var n=a.state.infoData,r=0;if(0!=n.length){var l=!0,i=!1,o=void 0;try{for(var s,c=n[Symbol.iterator]();!(l=(s=c.next()).done);l=!0){0==s.value.status&&r++}}catch(d){i=!0,o=d}finally{try{l||null==c.return||c.return()}finally{if(i)throw o}}0==r?a.setState({InfoModalOpen:!0,selectParData:e,selectIndex:t}):a.tips("\u8be6\u60c5\u8868\u4e2d\u8fd8\u6709"+r+"\u6761\u8bb0\u5f55\u4e3a\u8fdb\u884c\u72b6\u6001\uff0c\u8bf7\u5b8c\u6210\u540e\u518d\u8bbe\u7f6e\u6d41\u7a0b\u72b6\u6001")}else a.tips("\u8bf7\u81f3\u5c11\u6dfb\u52a0\u4e00\u6761\u8be6\u60c5\u6570\u636e")},a.scrapProcedureDetail=function(e,t){a.setState({destroyModalOpen:!0,selectParData:e,selectIndex:t})},a.setFinishSure=function(e,t){var n=a.state,r=(n.id,n.next_info),l=(n.data,n.infoData,n.selectParData),i=n.autoNext,o=a.props.match.params.id;fetch(K.server.updateDutyProcedureStatus,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pid:o,id:l.id,status:2,autoNext:i,remark:r})}).then(function(e){return e.json()}).then(function(e){200==e.code?(a.tips("\u8be5\u6d41\u7a0b\u5df2\u5b8c\u6210"),a.state.data.status=2,a.setState({InfoModalOpen:!1}),a.setState({data:a.state.data})):a.tips(e.msg)}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.setScrap=function(e,t){var n=a.state,r=(n.id,n.destroy_info),l=n.selectedDataCopy,i=n.selectIndex;a.props.match.params.id;if(r){fetch(K.server.updateDutyProcedureDetailStatus,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:l.id,status:-1,remark:r})}).then(function(e){return e.json()}).then(function(e){200==e.code?(a.state.infoData[i].status=-1,a.setState({infoData:a.state.infoData}),a.tips("\u8be5\u6d41\u7a0b\u73af\u8282\u5df2\u62a5\u5e9f"),a.setState({destroyModalOpen:!1})):a.tips(e.msg)}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}else a.tips("\u8bf7\u586b\u5199\u62a5\u5e9f\u539f\u56e0")},a.finishProcedureDetail=function(e,t){if(a.setState({selectedDataCopy:e,selectIndex:t}),e.actualNum){a.setState({confirmOpen:!0,content:"\u786e\u5b9a\u5f53\u524d\u6b65\u9aa4\u5df2\u5b8c\u6210\u5417\uff1f",confirmSure:function(){var e=a.state,t=(e.id,e.destroy_info,e.selectedDataCopy),n=e.selectIndex;console.log(a.state.selectedDataCopy,a.state.selectIndex);a.props.match.params.id;fetch(K.server.updateDutyProcedureDetailStatus,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id,status:1})}).then(function(e){return e.json()}).then(function(e){200==e.code?(a.state.infoData[n].status=1,a.setState({infoData:a.state.infoData}),a.tips("\u8be5\u6b65\u9aa4\u5df2\u5b8c\u6210"),a.setState({destroyModalOpen:!1})):a.tips(e.msg)}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}})}else a.tips("\u8bf7\u5148\u586b\u5199\u5b9e\u9645\u5b8c\u6210\u4ea7\u54c1\u6570\u91cf")},a.queryUserByName=function(e){var t=e.target.value;a.state.userBak||(a.state.userBak=a.state.workers),a.state.workers=a.state.userBak.filter(function(e){return-1!=e.userName.indexOf(t)||-1!=e.userID.toUpperCase().indexOf(t.toUpperCase())}),a.setState({workers:a.state.workers})},a.deleteProcedureDetail=function(e,t){a.setState({confirmOpen:!0});a.setState({confirmOpen:!0,title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u8be5\u6d41\u7a0b\u7ec6\u8282\u5417\uff1f",confirmSure:function(){fetch(K.server.deleteProcedureDetail,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})}).then(function(e){return e.json()}).then(function(e){200==e.code?(a.state.infoData.splice(t,1),a.setState({data:a.state.data}),a.tips("\u5220\u9664\u6210\u529f")):a.tips(e.msg)}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}})},a.tips=function(e){e&&a.setState({tipInfo:e}),a.setState({tipsOpen:!0}),setTimeout(function(){a.setState({tipsOpen:!1})},4e3)},a.setScrapModal=function(){var e=Object(g.withStyles)(function(e){return{root:{borderBottom:"1px solid ".concat(e.palette.divider),margin:0,padding:2*e.spacing.unit},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.children,a=e.classes,n=e.onClose;return r.a.createElement(O.a,{disableTypography:!0,className:a.root},r.a.createElement(q.a,{variant:"h6"},t),n?r.a.createElement(f.a,{"aria-label":"Close",className:a.closeButton,onClick:n},r.a.createElement(B.a,null)):null)}),t=a.state;t.workers,t.selectedWorkers;return r.a.createElement(C.a,{"aria-labelledby":"customized-dialog-title",className:"modal lg",open:a.state.destroyModalOpen,style:{marginTop:"-10rem"}},r.a.createElement(e,{id:"customized-dialog-title",onClose:a.modalClose},"\u6d41\u7a0b\u62a5\u5e9f\u8bbe\u7f6e"),r.a.createElement("form",{className:"".container,noValidate:!0,autoComplete:"off",style:{padding:"2rem 6rem 3rem"}},r.a.createElement(me.a,{container:!0,spacing:24},r.a.createElement(me.a,{item:!0,xs:12,style:{margin:"1.5rem 0 1rem",lineHeight:"35px"}},r.a.createElement(H.a,{fontSize:"large",color:"secondary",style:{marginBottom:"-11px"}}),"\u8bbe\u7f6e\u5f53\u524d\u6d41\u7a0b\u7684\u72b6\u6001\u4e3a",r.a.createElement("span",{className:"text-red"},"\u62a5\u5e9f"),"\u540e\uff0c\u5f53\u524d\u6d41\u7a0b\u7ec6\u8282\u5c06\u4e0d\u53ef\u4fee\u6539\uff0c\u8bf7\u786e\u8ba4\u64cd\u4f5c\u3002"),r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:0}},r.a.createElement(de.a,{fullWidth:!0,style:{marginTop:0},label:"\u62a5\u5e9f\u539f\u56e0\uff08\u5fc5\u586b\uff09",className:"".textField,autoComplete:"current-password",margin:"normal",InputLabelProps:{shrink:!0},onChange:function(e){a.setState({destroy_info:e.target.value})}})),r.a.createElement(me.a,{item:!0,xs:12,align:"right"},r.a.createElement(x.a,{variant:"outlined",onClick:a.setScrap,style:{marginRight:"1rem"},color:"primary",className:"".button},"\u786e\u5b9a"),r.a.createElement(x.a,{variant:"outlined",onClick:a.modalClose,style:{marginRight:"1rem"},color:"secondary",className:"".button},"\u53d6\u6d88")))))},a.setFinishModal=function(){var e=Object(g.withStyles)(function(e){return{root:{borderBottom:"1px solid ".concat(e.palette.divider),margin:0,padding:2*e.spacing.unit},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.children,a=e.classes,n=e.onClose;return r.a.createElement(O.a,{disableTypography:!0,className:a.root},r.a.createElement(q.a,{variant:"h6"},t),n?r.a.createElement(f.a,{"aria-label":"Close",className:a.closeButton,onClick:n},r.a.createElement(B.a,null)):null)}),t=a.state;t.autoNext,t.workers,t.selectedWorkers;return r.a.createElement(C.a,{"aria-labelledby":"customized-dialog-title",className:"modal lg",open:a.state.InfoModalOpen,style:{marginTop:"-10rem"}},r.a.createElement(e,{id:"customized-dialog-title",onClose:a.modalClose},"\u6d41\u7a0b\u5b8c\u6210\u8bbe\u7f6e"),r.a.createElement("form",{className:"".container,noValidate:!0,autoComplete:"off",style:{padding:"2rem 6rem 3rem"}},r.a.createElement(me.a,{container:!0,spacing:24},r.a.createElement(me.a,{item:!0,xs:12,style:{margin:"1.5rem 0 1rem",lineHeight:"35px"}},r.a.createElement(H.a,{fontSize:"large",color:"primary",style:{marginBottom:"-11px"}}),"\u8bbe\u7f6e\u5f53\u524d\u6d41\u7a0b\u7684\u72b6\u6001\u4e3a",r.a.createElement("span",{className:"text-blue"},"\u5b8c\u6210"),"\u540e\uff0c\u5f53\u524d\u6d41\u7a0b\u5c06\u4e0d\u53ef\u4fee\u6539\uff0c\u8bf7\u786e\u8ba4\u64cd\u4f5c\u3002"),r.a.createElement(me.a,{item:!0,xs:12,style:{paddingTop:0}},r.a.createElement(de.a,{fullWidth:!0,style:{marginTop:0},label:"\u901a\u77e5\u4e0b\u4e00\u6d41\u7a0b\u8d1f\u8d23\u4eba\uff08\u975e\u5fc5\u586b\uff09",className:"".textField,autoComplete:"current-password",margin:"normal",InputLabelProps:{shrink:!0},onChange:function(e){a.setState({next_info:e.target.value})}})),r.a.createElement(me.a,{item:!0,xs:12,align:"right"},r.a.createElement(Je.a,{className:"small",style:{marginLeft:"0rem",marginTop:"2rem"},control:r.a.createElement(xa.a,{color:"primary",size:"small",checked:a.state.autoNext,onChange:function(e){return a.setState({autoNext:e.target.checked})},value:a.state.autoNext}),label:"\u662f\u5426\u81ea\u52a8\u8fdb\u5165\u4e0b\u4e00\u6d41\u7a0b\uff1f\uff08\u5982\u679c\u662f\u91cd\u65b0\u5f00\u59cb\u7684\u6d41\u7a0b\uff0c\u5efa\u8bae\u53d6\u6d88\u52fe\u9009\u3002\uff09"})),r.a.createElement(me.a,{item:!0,xs:12,align:"right"},r.a.createElement(x.a,{variant:"outlined",onClick:a.setFinishSure,style:{marginRight:"1rem"},color:"primary",className:"".button},"\u786e\u5b9a"),r.a.createElement(x.a,{variant:"outlined",onClick:a.modalClose,style:{marginRight:"1rem"},color:"secondary",className:"".button},"\u53d6\u6d88")))))},a.addInfoModal=function(){var e=a.state.ifEquipment,t=Object(g.withStyles)(function(e){return{root:{borderBottom:"1px solid ".concat(e.palette.divider),margin:0,padding:2*e.spacing.unit},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.children,a=e.classes,n=e.onClose;return r.a.createElement(O.a,{disableTypography:!0,className:a.root},r.a.createElement(q.a,{variant:"h6"},t),n?r.a.createElement(f.a,{"aria-label":"Close",className:a.closeButton,onClick:n},r.a.createElement(B.a,null)):null)}),n=a.state,l=n.workers,i=n.ifAdd,o=n.selectedWorkers,s=(n.selectedDataCopy,n.productNum),c=n.actualNum,d=n.infoRemark,u=n.queryUserWord,m={height:"30vh",overflowY:"auto",padding:".5rem 0"},p={margin:"6px 8px",padding:"0px 3px"};return r.a.createElement(C.a,{"aria-labelledby":"customized-dialog-title",open:a.state.modalOpen,style:{marginTop:"-10vh"},className:"modal lg"},r.a.createElement(t,{id:"customized-dialog-title",onClose:a.modalClose},i?"\u6dfb\u52a0":"\u7f16\u8f91",e?"\u8bbe\u5907":"\u4eba\u5458","\u6d41\u7a0b\u8be6\u60c5"),r.a.createElement("form",{className:"".container,noValidate:!0,autoComplete:"off",style:{padding:"2rem 3rem 3rem"}},r.a.createElement(me.a,{container:!0,spacing:24},r.a.createElement(me.a,{item:!0,xs:6,style:{paddingTop:0}},r.a.createElement("div",{className:"bold"},"\u8ba1\u5212\u751f\u4ea7\u6570\u91cf"),r.a.createElement(de.a,{style:{marginTop:0},className:"".textField,autoComplete:"current-password",margin:"normal",value:s,InputLabelProps:{shrink:!0},onChange:function(e){a.setState({productNum:e.target.value})}})),r.a.createElement(me.a,{item:!0,xs:6,style:{paddingTop:0}},r.a.createElement("div",{className:"bold"},"\u5b9e\u9645\u751f\u4ea7\u6570\u91cf"),r.a.createElement(de.a,{style:{marginTop:0},className:"".textField,autoComplete:"current-password",margin:"normal",value:c,InputLabelProps:{shrink:!0},onChange:function(e){a.setState({actualNum:e.target.value})}})),r.a.createElement(me.a,{item:!0,xs:6,style:{paddingTop:0}},r.a.createElement("div",{className:"bold"},"\u5907\u6ce8"),r.a.createElement(de.a,{style:{marginTop:0},className:"".textField,autoComplete:"current-password",margin:"normal",value:d,InputLabelProps:{shrink:!0},onChange:function(e){a.setState({infoRemark:e.target.value})}})),i?"":r.a.createElement("div",{style:{margin:"2rem 0"}}),i?r.a.createElement(me.a,{container:!0,style:{paddingTop:"1rem"}},r.a.createElement(me.a,{item:!0,xs:6,style:{paddingTop:0,boxShadow:"17px 0px 16px -17px #666"}},r.a.createElement("div",null,r.a.createElement("span",{className:"bold"},"\u5f85\u9009\u62e9",(e?"\u8bbe\u5907":"\u5458\u5de5")+"  "+(l.length+o.length)+"/"+l.length),r.a.createElement(de.a,{style:{marginTop:0,padding:"0 .5rem"},className:"".textField,margin:"normal",value:u,placeholder:e?"\u67e5\u8be2\u8bbe\u5907\u540d\u79f0":"\u67e5\u8be2\u5458\u5de5ID\u6216\u59d3\u540d",onChange:function(e){e.persist(),a.setState({queryUserWord:e.target.value}),a.queryUserByName(e)}})),r.a.createElement("div",{className:"plane waitingChoose",style:m},e?l.map(function(e,t){return r.a.createElement(tt.a,{key:t,label:e.name,style:p,className:"".chip,title:e.remark,onClick:function(){return a.selectToRight(e,t)}})}):l.map(function(e,t){return r.a.createElement(tt.a,{key:t,label:e.userName,style:p,className:"".chip,title:e.userID,onClick:function(){return a.selectToRight(e,t)}})}))),r.a.createElement(me.a,{item:!0,xs:6,style:{paddingTop:0,paddingLeft:"23px",paddingBottom:"2rem"}},r.a.createElement("div",{className:"bold"},"\u5df2\u9009\u62e9",(e?"\u8bbe\u5907":"\u5458\u5de5")+"  "+(l.length+o.length)+"/"+o.length),r.a.createElement("div",{className:"plane choosed",style:m},e?o.map(function(e,t){return r.a.createElement(tt.a,{key:t,style:p,label:e.name,className:"".chip,title:e.remark,onDelete:function(){return a.selectToLeft(e,t)}})}):o.map(function(e,t){return r.a.createElement(tt.a,{key:t,style:p,label:e.userName,className:"".chip,title:e.userID,onDelete:function(){return a.selectToLeft(e,t)}})})))):"",r.a.createElement(me.a,{item:!0,xs:12,align:"center"},r.a.createElement(x.a,{variant:"outlined",onClick:a.addInfoSure,style:{marginRight:"1rem"},color:"primary",className:"".button},"\u786e\u5b9a"),r.a.createElement(x.a,{variant:"outlined",onClick:a.modalClose,style:{marginRight:"1rem"},color:"secondary",className:"".button},"\u53d6\u6d88")))))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=(K.changeToJson(localStorage.user).userID,K.changeToJson(localStorage.user).pwd,this.props.match.params.id||this.props.match.params.indent),a=this.props.match.params.indent;a?this.setState({allPower:!1}):a&&this.setState({allPower:!1}),this.setState({pid:t}),this.setState({pageUserType:K.changeToJson(localStorage.user).type}),fetch(K.server.queryDutyProcedureById+"?id="+t).then(function(e){return e.json()}).then(function(t){200==t.code?e.setState({data:t.results[0]}):e.tips(t.msg)}).catch(function(t){console.log(t),e.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")}),fetch(K.server.queryProcedureInfo+"?pid="+t).then(function(e){return e.json()}).then(function(t){200==t.code?e.setState({infoData:t.results}):e.tips(t.msg)}).catch(function(t){console.log(t),e.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.data,l=a.infoData,i=a.order,o=a.orderBy,s=(a.selected,a.rowsPerPage),c=a.page,d=a.allPower,u=a.pageUserType,m=a.ifEquipment;Math.min(s,n.length-c*s);return Pa[Pa.length-1].hidden=!0,r.a.createElement(Ie.a,{className:t.root,style:{padding:"0 2rem",width:"auto"}},r.a.createElement(Da,{allPower:this.state.allPower}),r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(ye.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(Oa,{order:i,orderBy:o,rows:Pa,rowCount:n.length}),r.a.createElement(Ee.a,null,r.a.createElement(Ne.a,{role:"checkbox",tabIndex:-1,key:n.id},r.a.createElement(Se.a,{align:"center"},n.erp),r.a.createElement(Se.a,{align:"center"},n.materialCode),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},n.materialName),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},n.planNum),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},n.procedure),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},n.duty),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none",className:2==n.status?"text-success":1==n.status?"text-blue":""},2==n.status?"\u5b8c\u6210":1==n.status?"\u8fdb\u884c\u4e2d":"\u672a\u5f00\u59cb"),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none",className:2==n.status?"":"text-blue"},d||1!=n.status?"":r.a.createElement("span",{className:"btn",onClick:function(){return e.finishProcedure(n)}}," \u8bbe\u4e3a\u5b8c\u6210"))))),r.a.createElement(De.a,null,r.a.createElement(me.a,{container:!0},r.a.createElement(me.a,{item:!0,xs:12},r.a.createElement(q.a,{variant:"h6",id:"tableTitle",align:"center",style:{padding:"3rem 2rem 1rem 0",fontWeight:"bold"}},"\u8be6\u7ec6\u751f\u4ea7\u60c5\u51b5"),r.a.createElement("p",{className:"text-right",style:{margin:"0 0 2rem"}},r.a.createElement("span",{className:(m?"bg-default":"bg-primary")+" btn-default text-blue",onClick:function(){return e.setState({ifEquipment:!1})}},"\u5458\u5de5\u4e0a\u62a5"),r.a.createElement("span",{className:(m?"bg-primary":"bg-default")+" btn-default text-blue",onClick:function(){return e.setState({ifEquipment:!0})}},"\u8bbe\u5907\u4e0a\u62a5"))))),m?r.a.createElement("div",{style:{maxHeight:"55vh",overflow:"auto"}},r.a.createElement(ye.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(Oa,{order:i,orderBy:o,rows:Na,rowCount:n.length,backgroundColor:"rgba(215,215,215)"}),r.a.createElement(Ee.a,null,l.filter(function(e){return 1==e.type}).map(function(t,a){return r.a.createElement(Ne.a,{role:"checkbox",tabIndex:-1,key:t.id},r.a.createElement(Se.a,{align:"center"},a+1),r.a.createElement(Se.a,{align:"center"},t.productNum),r.a.createElement(Se.a,{align:"center"},t.worker),r.a.createElement(Se.a,{align:"center"},t.actualNum),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},new Date(t.startTime).format("yyyy-MM-dd hh:mm:ss")),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},t.finishTime?new Date(t.finishTime).format("yyyy-MM-dd hh:mm:ss"):""),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},2==t.status?"\u5df2\u5b8c\u6210":-1==t.status?"\u5df2\u62a5\u5e9f":1==t.status?"\u5df2\u5b8c\u6210":"\u8fdb\u884c\u4e2d"),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},t.remark),r.a.createElement(Se.a,{align:"center",id:t.status},2==u?r.a.createElement("span",{className:"pointer btn text-red",onClick:function(){return e.deleteProcedureDetail(t,a)}},"\u5220\u9664"):"",d||1!=n.status?"":0==t.status?r.a.createElement("span",{className:"pointer btn text-red",onClick:function(){return e.scrapProcedureDetail(t,a)}},"\u8bbe\u4e3a\u62a5\u5e9f"):r.a.createElement("span",{className:-1==t.status?"text-notice":""},(t.status,"")),d||1!=n.status?r.a.createElement("span",{className:""}):0==t.status?r.a.createElement("span",{className:"pointer btn text-blue",onClick:function(){e.addProcedureInfo(1,t,a)}},"\u4fee\u6539"):r.a.createElement("span",{className:1==t.status?"text-success":""},(t.status,"")),d||1!=n.status?r.a.createElement("span",{className:""}):0==t.status?r.a.createElement("span",{className:"pointer btn text-success",onClick:function(){return e.finishProcedureDetail(t,a)}},"\u8bbe\u4e3a\u5b8c\u6210"):r.a.createElement("span",{className:1==t.status?"text-success":""},(t.status,""))))})))):r.a.createElement("div",{style:{maxHeight:"55vh",overflow:"auto"}},r.a.createElement(ye.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(Oa,{order:i,orderBy:o,rows:Ca,rowCount:n.length,backgroundColor:"rgba(215,215,215)"}),r.a.createElement(Ee.a,null,l.filter(function(e){return 1!=e.type}).map(function(t,a){return r.a.createElement(Ne.a,{role:"checkbox",tabIndex:-1,key:t.id},r.a.createElement(Se.a,{align:"center"},a+1),r.a.createElement(Se.a,{align:"center"},t.productNum),r.a.createElement(Se.a,{align:"center"},t.worker),r.a.createElement(Se.a,{align:"center"},t.worker.split(" ").length),r.a.createElement(Se.a,{align:"center"},t.actualNum),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},new Date(t.startTime).format("yyyy-MM-dd hh:mm:ss")),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},t.finishTime?new Date(t.finishTime).format("yyyy-MM-dd hh:mm:ss"):""),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},2==t.status?"\u5df2\u5b8c\u6210":-1==t.status?"\u5df2\u62a5\u5e9f":1==t.status?"\u5df2\u5b8c\u6210":"\u8fdb\u884c\u4e2d"),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},t.remark),r.a.createElement(Se.a,{align:"center",id:t.status},2==u?r.a.createElement("span",{className:"pointer btn text-red",onClick:function(){return e.deleteProcedureDetail(t,a)}},"\u5220\u9664"):"",d||1!=n.status?"":0==t.status?r.a.createElement("span",{className:"pointer btn text-red",onClick:function(){return e.scrapProcedureDetail(t,a)}},"\u8bbe\u4e3a\u62a5\u5e9f"):r.a.createElement("span",{className:-1==t.status?"text-notice":""},(t.status,"")),d||1!=n.status?r.a.createElement("span",{className:""}):0==t.status?r.a.createElement("span",{className:"pointer btn text-blue",onClick:function(){e.addProcedureInfo(1,t,a)}},"\u4fee\u6539"):r.a.createElement("span",{className:1==t.status?"text-success":""},(t.status,"")),d||1!=n.status?r.a.createElement("span",{className:""}):0==t.status?r.a.createElement("span",{className:"pointer btn text-success",onClick:function(){return e.finishProcedureDetail(t,a)}},"\u8bbe\u4e3a\u5b8c\u6210"):r.a.createElement("span",{className:1==t.status?"text-success":""},(t.status,""))))})))),l.length?"":r.a.createElement("div",{className:"emptyShow",align:"center",style:{display:"block",paddingTop:"3.0rem",paddingBottom:"1.5rem",position:"relative",top:0,left:0}},"\u6682\u65e0\u8be6\u7ec6\u60c5\u51b5\u6570\u636e "),1==this.state.data.status&&!d&&r.a.createElement(me.a,{container:!0,align:"center",vertical:"center",style:{paddingTop:"2rem",paddingRight:"1rem"}},r.a.createElement(me.a,{item:!0,xs:12},r.a.createElement("span",{onClick:function(){return e.addProcedureInfo(0)},className:"pointer addProcedureBtn"},r.a.createElement(wa.a,{style:{marginBottom:"-5px"}}),(m?"\u8bbe\u5907\u751f\u4ea7":"\u5458\u5de5\u751f\u4ea7")+"\u8be6\u60c5"))),r.a.createElement(_,{open:this.state.confirmOpen,title:this.state.title,content:this.state.content,closeFun:this.deleteModalClose,sureFun:this.state.confirmSure})),this.addInfoModal(),this.setFinishModal(),this.setScrapModal(),r.a.createElement(Be.a,{style:{marginTop:"70px"},anchorOrigin:{horizontal:"center",vertical:"top"},open:this.state.tipsOpen,ContentProps:{className:"info"},message:r.a.createElement("span",{id:"message-id"},this.state.tipInfo)}))}}]),t}(r.a.Component),Ia=Object(g.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:""}}})(Ta);Object(g.withStyles)(function(e){return{root:{margin:0,padding:2*e.spacing.unit}}})(T.a),Object(g.withStyles)(function(e){return{root:{borderTop:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing.unit}}})(j.a);var ja=[{id:"name",numeric:!1,disablePadding:!0,label:"\u5e8f\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u6a21\u677f\u7f16\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"\u6a21\u677f\u540d\u79f0"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u6a21\u677f\u6d41\u7a0b"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u8d1f\u8d23\u4eba"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u64cd\u4f5c"}],Ma=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a.state={},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onSelectAllClick,e.order),a=e.orderBy;e.numSelected,e.rowCount;return r.a.createElement(ke.a,null,r.a.createElement(Ne.a,null,ja.map(function(e,n){return r.a.createElement(Se.a,{key:"EnhancedTableHead"+n,align:(e.numeric,"center"),padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&t},e.label)},this)))}}]),t}(r.a.Component),Ba=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,dutyModal:!1,workers:[],tDuty:""},a.tips=a.props.tips,a.handleClose=function(){a.setState({open:!1,dutyModal:!1})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(De.a,null,r.a.createElement(q.a,{variant:"h6",id:"tableTitle",align:"left"},"\u5df2\u5220\u9664\u6a21\u677f")),r.a.createElement(me.a,{container:!0},r.a.createElement(me.a,{xs:12,item:!0,align:"left"},r.a.createElement("span",{className:"btn text-red",onClick:this.props.deleteAllTemplate,style:{display:"inline-block",margin:"1rem 1rem 2rem"}},"\u6e05\u7a7a\u6a21\u677f"))),r.a.createElement("div",{className:"".spacer}))}}]),t}(r.a.Component),Wa=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={order:"asc",orderBy:"calories",selected:[],data:[],page:0,rowsPerPage:K.pageChangeNum||13,open:!0,confirmOpen:!1,title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u8be5\u6a21\u677f\u5417\uff1f"},a.handleRequestSort=function(e,t){var n=t,r="desc";a.state.orderBy===t&&"desc"===a.state.order&&(r="asc"),a.setState({order:r,orderBy:n})},a.handleSelectAllClick=function(e){e.target.checked?a.setState(function(e){return{selected:e.data.map(function(e){return e.id})}}):a.setState({selected:[]})},a.handleClick=function(e,t){var n=a.state.selected,r=n.indexOf(t),l=[];-1===r?l=l.concat(n,t):0===r?l=l.concat(n.slice(1)):r===n.length-1?l=l.concat(n.slice(0,-1)):r>0&&(l=l.concat(n.slice(0,r),n.slice(r+1))),a.setState({selected:l})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.deleteTemplate=function(e,t){a.setState({confirmOpen:!0});a.setState({confirmOpen:!0,title:"\u786e\u8ba4",content:"\u5f7b\u5e95\u5220\u9664\u8be5\u6a21\u677f\u540e\uff0c\u5c06\u4e0d\u80fd\u518d\u8fd8\u539f\uff0c\u786e\u5b9a\u5220\u9664\u5417\uff1f",confirmSure:function(){fetch(K.server.deleteTemplate,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})}).then(function(e){return e.json()}).then(function(e){200==e.code?(a.state.data.splice(t,1),a.setState({data:a.state.data}),a.tips("\u5df2\u5f7b\u5e95\u5220\u9664\u8be5\u6a21\u677f")):a.tips(e.msg)}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}})},a.deleteAllTemplate=function(e,t){a.setState({confirmOpen:!0});a.setState({confirmOpen:!0,title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u56de\u6536\u7ad9\u5185\u6240\u6709\u6a21\u677f\u5417\uff1f",confirmSure:function(){fetch(K.server.deleteTemplate,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:"all"})}).then(function(e){return e.json()}).then(function(e){200==e.code?(a.setState({data:[]}),a.tips("\u5df2\u6e05\u7a7a\u6240\u6709\u6a21\u677f")):a.tips(e.msg)}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}})},a.recycleTemplate=function(e,t){a.setState({confirmOpen:!0,title:"\u786e\u8ba4",content:"\u786e\u5b9a\u8fd8\u539f\u8be5\u6a21\u677f\u5417\uff1f",confirmSure:function(){fetch(K.server.recycleTemplate,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})}).then(function(e){return e.json()}).then(function(e){200==e.code?(a.state.data.splice(t,1),a.setState({data:a.state.data})):a.tips(e.msg)}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}})},a.confirmClose=function(){a.setState({confirmOpen:!1})},a.changeTemplateData=function(e,t){1==t?(a.state.data.push(e),a.setState({data:a.state.data})):2==t?a.setState({data:a.state.data}):a.setState({data:e})},a.tips=function(e){e&&a.setState({tipInfo:e}),a.setState({tipsOpen:!0}),setTimeout(function(){a.setState({tipsOpen:!1})},4e3)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;fetch(K.server.listAllTemplate+"?ifDelete=1").then(function(e){return e.json()}).then(function(t){200==t.code&&e.changeTemplateData(t.results||[])}).catch(function(t){return e.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.data,l=a.order,i=a.orderBy,o=a.selected,s=a.rowsPerPage,c=a.page,d=s-Math.min(s,n.length-c*s);return r.a.createElement(Ie.a,{className:t.root,style:{padding:"0 2rem",width:"auto"}},r.a.createElement(Ba,{changeTemplateData:this.changeTemplateData,ref:"modalMethod",tips:this.tips,deleteAllTemplate:this.deleteAllTemplate}),r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(ye.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(Ma,{numSelected:o.length,order:l,orderBy:i,rowCount:n.length}),r.a.createElement(Ee.a,null,n.slice(c*s,c*s+s).map(function(t,a){var n=e.isSelected(t.id);return r.a.createElement(Ne.a,{hover:!0,role:"checkbox","aria-checked":n,tabIndex:-1,key:t.id,selected:n},r.a.createElement(Se.a,{align:"center"},c*s+(a+1)),r.a.createElement(Se.a,{align:"center"},t.id),r.a.createElement(Se.a,{align:"center"},t.name),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},t.procedure),r.a.createElement(Se.a,{align:"center",component:"th",scope:"row",padding:"none"},t.duty),r.a.createElement(Se.a,{align:"center"},r.a.createElement("span",{className:"pointer btn text-blue",onClick:function(){return e.recycleTemplate(t,c*s+a)}},"\u8fd8\u539f"),r.a.createElement("span",{className:"pointer btn text-red",onClick:function(){return e.deleteTemplate(t,c*s+a)}},"\u5220\u9664")))}),d>0&&r.a.createElement(Ne.a,{style:{height:49*d}},r.a.createElement(Se.a,{colSpan:6})))),n.length?"":r.a.createElement("div",{className:"emptyShow",align:"center",style:{display:"block",padding:"2rem"}},"\u6682\u65e0\u6570\u636e ")),r.a.createElement(Pe.a,{className:"TablePagination",rowsPerPageOptions:[10,20,30],component:"div",count:n.length,rowsPerPage:s,page:c,backIconButtonProps:{"aria-label":"\u4e0a\u4e00\u9875"},nextIconButtonProps:{"aria-label":"\u4e0b\u4e00\u9875"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}),r.a.createElement(_,{open:this.state.confirmOpen,title:this.state.title,content:this.state.content,closeFun:this.confirmClose,sureFun:this.state.confirmSure}),r.a.createElement(Be.a,{style:{marginTop:"70px"},key:(new Date).getTime()+Math.random(),anchorOrigin:{horizontal:"center",vertical:"top"},open:this.state.tipsOpen,ContentProps:{className:"info"},message:r.a.createElement("span",{id:"message-id"},this.state.tipInfo)}))}}]),t}(r.a.Component),qa=Object(g.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}})(Wa);Object(g.withStyles)(function(e){return{root:{margin:0,padding:2*e.spacing.unit}}})(T.a),Object(g.withStyles)(function(e){return{root:{borderTop:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing.unit}}})(j.a);var Fa=[{id:"name",numeric:!1,disablePadding:!0,label:"\u5e8f\u53f7"},{id:"name",numeric:!1,disablePadding:!0,label:"erp\u53f7"},{id:"carbs",numeric:!0,disablePadding:!1,label:"\u8d27\u53f7"},{id:"calories",numeric:!1,disablePadding:!1,label:"\u8d27\u7269\u540d\u79f0"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u8ba1\u5212\u751f\u4ea7\u6570\u91cf"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u8ba1\u5212\u5b8c\u5de5\u65e5\u671f"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u9884\u8ba1\u4e0a\u7ebf\u65e5\u671f"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u5b9e\u9645\u5f00\u5de5\u65e5\u671f"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u5b9e\u9645\u5b8c\u6210\u65e5\u671f"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u8ba2\u5355\u72b6\u6001"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u4f18\u5148\u7ea7"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u662f\u5426\u65b0\u54c1"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u5907\u6ce8"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u53cd\u9988"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u6a21\u677f\u7f16\u53f7"},{id:"protein",numeric:!0,disablePadding:!1,label:"\u64cd\u4f5c"}],Aa=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a.state={},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onSelectAllClick,e.order),a=e.orderBy;e.numSelected,e.rowCount;return r.a.createElement(ke.a,null,r.a.createElement(Ne.a,null,Fa.map(function(e,n){return r.a.createElement(Se.a,{key:"EnhancedTableHead"+n,align:(e.numeric,"center"),padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&t},e.label)},this)))}}]),t}(r.a.Component),Ra=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleClose=function(){a.setState({open:!1})},a.addTemplate=function(){a.setState({open:!0,fileValue:""})},a.tips=a.props.tips,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state;t.dateRange,t.typeQuery;return r.a.createElement("div",null,r.a.createElement(De.a,null,r.a.createElement("div",{className:"".title},r.a.createElement(q.a,{variant:"h6",id:"tableTitle",align:"left"},"\u5df2\u5220\u9664\u8ba2\u5355")),r.a.createElement("div",{className:"".spacer})),r.a.createElement(me.a,{container:!0,style:{margin:"1rem 0 1rem",padding:"0 1.2rem"}},r.a.createElement(me.a,{item:!0,xs:6,align:"left"},r.a.createElement("span",{className:"btn text-red",onClick:this.props.deleteAllIndent},"\u6e05\u7a7a\u8ba2\u5355")),r.a.createElement(me.a,{item:!0,align:"right",xs:6},r.a.createElement(de.a,{style:{marginTop:0,marginLeft:"1rem"},placeholder:"\u8bf7\u8f93\u5165\u8ba2\u5355\u53f7\u6216\u8d27\u53f7\u67e5\u8be2",className:"".textField,type:"text",onChange:function(t){return e.props.queryByKeyword(t)},margin:"normal",InputLabelProps:{shrink:!0}}))))}}]),t}(r.a.Component),Ua=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={order:"asc",orderBy:"calories",selected:[],data:[],page:0,rowsPerPage:K.pageChangeNum||13,open:!1,confirmOpen:!1,title:"\u786e\u8ba4",selectedData:{},content:"\u786e\u5b9a\u5220\u9664\u8be5\u8ba2\u5355\u5417\uff1f",actualFinish:(new Date).format("yyyy-MM-dd")},a.handleClose=function(){a.setState({open:!1})},a.handleRequestSort=function(e,t){var n=t,r="desc";a.state.orderBy===t&&"desc"===a.state.order&&(r="asc"),a.setState({order:r,orderBy:n})},a.handleSelectAllClick=function(e){e.target.checked?a.setState(function(e){return{selected:e.data.map(function(e){return e.id})}}):a.setState({selected:[]})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.changeIndentData=function(e,t){1==t?(a.state.data.push(e),a.setState({data:a.state.data})):2==t?a.setState({data:a.state.data}):a.setState({data:e}),a.state.dataBak=a.state.data},a.deleteIndent=function(e,t){a.setState({confirmOpen:!0});a.setState({confirmOpen:!0,title:"\u786e\u8ba4",content:"\u5f7b\u5e95\u5220\u9664\u8be5\u8ba2\u5355\u540e\uff0c\u5c06\u4e0d\u80fd\u518d\u8fd8\u539f\uff0c\u786e\u5b9a\u5220\u9664\u5417\uff1f",confirmSure:function(){fetch(K.server.deleteIndent,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})}).then(function(e){return e.json()}).then(function(e){200==e.code?(a.state.data.splice(t,1),a.setState({data:a.state.data}),a.tips("\u5df2\u5f7b\u5e95\u5220\u9664\u8be5\u8ba2\u5355")):a.tips(e.msg)}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}})},a.deleteAllIndent=function(e,t){a.setState({confirmOpen:!0});a.setState({confirmOpen:!0,title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u56de\u6536\u7ad9\u5185\u6240\u6709\u8ba2\u5355\u5417\uff1f",confirmSure:function(){fetch(K.server.deleteIndent,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:"all"})}).then(function(e){return e.json()}).then(function(e){200==e.code?(a.setState({data:[]}),a.tips("\u5df2\u6e05\u7a7a\u6240\u6709\u8ba2\u5355")):a.tips(e.msg)}).catch(function(e){return a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}})},a.confirmClose=function(){a.setState({confirmOpen:!1})},a.queryByKeyword=function(e){e.persist(),a.state.dataBak||(a.state.dataBak=a.state.data),a.state.data=a.state.dataBak.filter(function(t){return-1!=t.erp.toUpperCase().indexOf(e.target.value.toUpperCase())||-1!=t.materialCode.toUpperCase().indexOf(e.target.value.toUpperCase())||-1!=t.materialName.toUpperCase().indexOf(e.target.value.toUpperCase())}),a.setState({data:a.state.data})},a.recycleIndent=function(e,t){a.setState({confirmOpen:!0,title:"\u786e\u8ba4",content:"\u786e\u5b9a\u8fd8\u539f\u8be5\u8ba2\u5355\u5417\uff1f",confirmSure:function(){fetch(K.server.recycleIndent,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})}).then(function(e){return e.json()}).then(function(e){200==e.code?(a.state.data.splice(t,1),a.setState({data:a.state.data})):a.tips(e.msg)}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}})},a.tips=function(e,t){e&&a.setState({tipInfo:e}),a.setState({tipsOpen:!0}),"stay"==t||setTimeout(function(){a.setState({tipsOpen:!1})},4e3)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;fetch(K.server.listAllIndentByDate+"?ifDelete=1").then(function(e){return e.json()}).then(function(t){200==t.code?e.changeIndentData(t.results||[]):e.tips(t.msg)}).catch(function(t){return e.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=(a.filterFun,a.data),l=a.order,i=a.orderBy,o=a.selected,s=a.rowsPerPage,c=a.page,d=s-Math.min(s,n.length-c*s);return r.a.createElement(Ie.a,{className:t.root,style:{padding:"0 2rem",width:"auto"}},r.a.createElement(Ra,{tips:this.tips,queryByKeyword:this.queryByKeyword,deleteAllIndent:this.deleteAllIndent}),r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(ye.a,{className:t.table+" nowrap","aria-labelledby":"tableTitle"},r.a.createElement(Aa,{numSelected:o.length,order:l,orderBy:i,tips:this.tips,rowCount:n.length}),r.a.createElement(Ee.a,null,n.slice(c*s,c*s+s).map(function(t,a){var n=e.isSelected(t.id);return r.a.createElement(Ne.a,{hover:!0,role:"checkbox","aria-checked":n,tabIndex:-1,key:a,selected:n},r.a.createElement(Se.a,{align:"center"},c*s+a+1),r.a.createElement(Se.a,{align:"center"},t.erp),r.a.createElement(Se.a,{align:"center"},t.materialCode),r.a.createElement(Se.a,{align:"center"},t.materialName),r.a.createElement(Se.a,{align:"center"},t.planNum),r.a.createElement(Se.a,{align:"center"},!!t.planFinishDate&&new Date(t.planFinishDate).format("yyyy-MM-dd")),r.a.createElement(Se.a,{align:"center"},!!t.planOnline&&new Date(t.planOnline).format("yyyy-MM-dd")),r.a.createElement(Se.a,{align:"center"},!!t.actualStart&&new Date(t.actualStart).format("yyyy-MM-dd")),r.a.createElement(Se.a,{align:"center"},!!t.actualFinish&&new Date(t.actualFinish).format("yyyy-MM-dd")),r.a.createElement(Se.a,{align:"center",className:t.status?"text-blue":""},"\u5df2\u5220\u9664"),r.a.createElement(Se.a,{align:"center",className:t.priority?"text-blue":""},t.priority?"\u662f":"\u5426"),r.a.createElement(Se.a,{align:"center",className:t.ifNew?"text-blue":""},t.ifNew?"\u662f":"\u5426"),r.a.createElement(Se.a,{align:"center"},t.remark),r.a.createElement(Se.a,{align:"center"},t.feedback),r.a.createElement(Se.a,{align:"center"},t.templateID),r.a.createElement(Se.a,{align:"center"},r.a.createElement("span",{className:"pointer btn text-blue",onClick:function(){return e.recycleIndent(t,c*s+a)}},"\u8fd8\u539f"),r.a.createElement("span",{className:"pointer btn text-red",onClick:function(){return e.deleteIndent(t,c*s+a)}},"\u5220\u9664")))}),d>0&&r.a.createElement(Ne.a,{style:{height:49*d}},r.a.createElement(Se.a,{colSpan:16})))),n.length?"":r.a.createElement("div",{className:"emptyShow",align:"center",style:{display:"block",padding:"2rem"}},"\u6682\u65e0\u6570\u636e ")),r.a.createElement(Pe.a,{className:"TablePagination",rowsPerPageOptions:[1*K.page,2*K.page,3*K.page],component:"div",count:n.length,rowsPerPage:s,page:c,backIconButtonProps:{"aria-label":"\u4e0a\u4e00\u9875"},nextIconButtonProps:{"aria-label":"\u4e0b\u4e00\u9875"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}),r.a.createElement(_,{open:this.state.confirmOpen,title:this.state.title,content:this.state.content,closeFun:this.confirmClose,sureFun:this.state.confirmSure}),r.a.createElement(Be.a,{style:{marginTop:"70px"},anchorOrigin:{horizontal:"center",vertical:"top"},open:this.state.tipsOpen,onClose:function(){return e.setState({tipsOpen:!1})},ContentProps:{className:"info"},message:this.state.tipInfo}))}}]),t}(r.a.Component),La=Object(g.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}})(Ua),Ha=(a(421),a(189)),za=a.n(Ha),_a=(a(80),a(190)),Ja=a(191),Ka=a.n(Ja),Va=a(192),Xa=a.n(Va),Ya=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={workDate:{},workArr:[],changeDate:[],modalClose:!0},a.initLabelClick=function(){a.clickEvent=document.addEventListener("click",function(e){var t=a.state,n=t.workDate,r=(t.workArr,t.changeDate);if(e.stopPropagation(),e.preventDefault(),"fc-content"==e.target.className){var l=e.target.parentNode.className.split("dateClass")[1].split(" ")[0];if(new Date(l).getTime()<(new Date).getTime())a.tips("\u65e0\u6cd5\u4fee\u6539\u8fc7\u53bb\u65f6\u671f\u7684\u5de5\u65f6");else{var i=e.target.children[0],o=parseInt(i.innerText.split(" ")[1]);e.layerY<e.target.offsetHeight/2-5?o>=18?a.tips("\u5df2\u8d85\u8fc7\u6700\u957f\u5de5\u4f5c\u65f6\u95f4"):o++:e.layerY>e.target.offsetHeight/2+5?o<=0||o--:e.target.offsetHeight/2-5<e.layerY<e.target.offsetHeight/2+5&&(a.setState({modalClose:!1,dayWork:o,dayDate:l}),document.querySelector("#getWorkData")&&(document.querySelector("#getWorkData").onclick=function(e){new RegExp(/^\d+$/).test(a.state.dayWork)?a.state.dayWork?a.state.dayWork>18?a.tips("\u5de5\u4f5c\u5c0f\u65f6\u6570\u6700\u591a\u4e0d\u8d85\u8fc718"):a.state.dayWork<0?a.tips("\u5de5\u4f5c\u5c0f\u65f6\u6570\u6700\u5c0f\u4e3a1"):(o=a.state.dayWork,a.setState({modalClose:!0}),n[l]=o>0?o:8,a.updatwDataView()):a.tips("\u8bf7\u8f93\u5165\u5de5\u4f5c\u5c0f\u65f6\u6570"):a.tips("\u5de5\u4f5c\u5c0f\u65f6\u6570\u4e0d\u80fd\u4e3a\u975e\u6570\u5b57")})),r.push(l),n[l]=o>0?o:18,a.updatwDataView()}}})},a.updatwDataView=function(){var e=a.state,t=e.workDate,n=e.workArr;for(var r in n=[],t)n.push({title:"\u4e0a\u73ed "+t[r],date:r,className:"dateClass"+r});a.setState({workDate:t,workArr:n}),a.setState({ifEdit:!0})},a.uploadWorkCalendar=function(){var e=a.state,t=e.workDate,n=(e.changeDate,{}),r=new Date((new Date).format("yyyy-MM-dd")).getTime();for(var l in t)new Date(l).getTime()>=r&&(n[l]=t[l]);console.log(n),fetch(K.server.updateWorkCalendar,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({workDate:n})}).then(function(e){return e.json()}).then(function(e){200==e.code?(a.tips("\u4fdd\u5b58\u5de5\u4f5c\u65e5\u5386\u6210\u529f"),a.setState({ifEdit:!1})):a.tips("\u4fdd\u5b58\u5de5\u4f5c\u65e5\u5386\u5931\u8d25")}).catch(function(e){console.log(e),a.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")})},a.handleDateClick=function(e){var t=a.state,n=t.workDate,r=t.workArr,l=t.changeDate;if(e.dateStr<(new Date).format("yyyy-MM-dd"))a.tips("\u65e0\u6cd5\u4fee\u6539\u8fc7\u53bb\u65f6\u671f\u7684\u5de5\u65f6");else{for(var i in n[e.dateStr]?delete n[e.dateStr]:n[e.dateStr]=8,a.setState({ifEdit:!0}),l.push(e.dateStr),r=[],n)r.push({title:"\u4e0a\u73ed "+n[i],date:i,className:"dateClass"+i});a.setState({workDate:n,workArr:r})}},a.changePage=function(e){e.persist();document.querySelectorAll(".work-calendar table")[0];if(e.deltaY>0){if(document.querySelectorAll(".work-calendar .fc-button-group .fc-next-button")[0])return void document.querySelectorAll(".work-calendar .fc-button-group .fc-next-button")[0].click()}else if(document.querySelectorAll(".work-calendar .fc-button-group .fc-next-button")[0])return void document.querySelectorAll(".work-calendar .fc-button-group .fc-prev-button")[0].click()},a.addDataModal=function(){return r.a.createElement(C.a,{"aria-labelledby":"customized-dialog-title",open:!a.state.modalClose,style:{marginTop:"-10rem"},onClose:function(){return a.setState({modalClose:!0})}},r.a.createElement("div",{id:"customized-dialog-title",style:{padding:"1rem 2rem",fontWeight:"bold"}},"\u6dfb\u52a0\u5de5\u4f5c\u65e5\u5386"),r.a.createElement("form",{noValidate:!0,autoComplete:"off",style:{padding:"2rem 6rem 3rem"}},r.a.createElement("label",{style:{height:"25px",padding:"2px 1rem"},for:""},a.state.dayDate+"\u7684\u5de5\u4f5c\u65f6\u957f"),r.a.createElement("input",{type:"text",autofocus:"true",style:{height:"25px",border:"1px solid rgb(102, 102, 102)",borderRadius:"3px",overflow:"hidden",padding:"2px 8px"},placeholder:"\u8bf7\u8f93\u5165\u5de5\u4f5c\u5c0f\u65f6\u6570",value:a.state.dayWork,onChange:function(e){return a.setState({dayWork:e.target.value})}})),r.a.createElement("div",{style:{textAlign:"center",padding:"2rem"}},r.a.createElement(x.a,{id:"getWorkData",variant:"outlined",style:{marginRight:"1rem"},color:"primary"},"\u786e\u5b9a")))},a.tips=function(e){e&&a.setState({tipInfo:e}),a.setState({tipsOpen:!0}),setTimeout(function(){a.setState({tipsOpen:!1})},4e3)},a.tips=a.props.tips,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){var e=this,t=this.state,a=t.workDate,n=t.workArr;fetch(K.server.queryWorkCalendar).then(function(e){return e.json()}).then(function(t){if(200===t.code){n=[];var r=!0,l=!1,i=void 0;try{for(var o,s=t.results[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;c.date=new Date(c.date).format("yyyy-MM-dd"),a[c.date]=c.hour,n.push({title:"\u4e0a\u73ed "+c.hour,date:c.date,className:"dateClass"+c.date})}}catch(d){l=!0,i=d}finally{try{r||null==s.return||s.return()}finally{if(l)throw i}}e.setState({workDate:a,workArr:n})}else e.tips(t.msg)}).catch(function(t){return e.tips("\u7f51\u7edc\u51fa\u9519\u4e86\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")}),this.initLabelClick()}},{key:"componentWillUnmount",value:function(){document.removeEventListener(this.clickEvent,function(){})}},{key:"render",value:function(){var e=this,t=this.state.workArr;return r.a.createElement("div",{className:"work-calendar",onWheel:function(t){return e.changePage(t)}},r.a.createElement("div",{style:{textAlign:"right",paddingRight:".5rem"}},r.a.createElement("span",{style:{display:"inline-block",marginBottom:"-55px",position:"relative",zIndex:3},className:"btn bg-primary-fill text-white",onClick:this.uploadWorkCalendar},"\u4fdd\u5b58")),r.a.createElement(_a.a,{defaultView:"dayGridMonth",weekends:!0,events:t,today:["\u4eca\u5929"],buttonText:{today:"\u4eca\u5929/\u672c\u5468",month:"\u6708",week:"\u5468",day:"\u65e5"},locale:za.a,dateClick:this.handleDateClick,timeZone:"UTC",eventLimit:!0,plugins:[Ka.a,Xa.a]}),r.a.createElement(p.a,{when:!!this.state.ifEdit,message:function(e){return"\u521a\u521a\u7684\u64cd\u4f5c\u672a\u4fdd\u5b58\uff0c\u786e\u5b9a\u79bb\u5f00\u5f53\u524d\u9875\u9762\u5417\uff1f"}}),this.addDataModal())}}]),t}(r.a.Component),Qa=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a.tips=function(e){e&&a.setState({tipInfo:e}),a.setState({tipsOpen:!0}),setTimeout(function(){a.setState({tipsOpen:!1})},4e3)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return r.a.createElement(me.a,{container:!0},r.a.createElement(me.a,{item:!0,xs:12,className:"page404",style:{background:'url("404.png") -5vw -20vh / 100% no-repeat'}}))}}]),t}(r.a.Component),$a=Nt,Ga=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).judgeUser=function(){var e=K.changeToJson(localStorage.user||"{}").userID,t=K.changeToJson(localStorage.user||"{}").pass;e&&t?(a.loading(!0),t=t.replace(/2a3/g,1).replace(/\*%/,"").replace(/\%&/,""),fetch(K.server.login,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:e,pwd:t})}).then(function(e){return e.json()}).then(function(e){if(200!=e.code)return a.tips(e.msg),void a.loading(!1);setTimeout(function(){a.changeLoginData(e.results),a.loading(!1),setTimeout(function(){a.judgeCalendar()},1500)},1e3)}).catch(function(e){a.loading(!1),a.tips("\u4e0e\u670d\u52a1\u5668\u8fde\u63a5\u5931\u8d25\uff0c\u767b\u9646\u51fa\u9519\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5"),a.autoLoginTime++,a.autoLoginTime<=5&&(a.state.autoLoginTimer=setTimeout(a.judgeUser,1e4))})):(void 0==localStorage.user?a.tips("\u6b22\u8fce\u60a8\uff0c\u8bf7\u767b\u5f55\u7cfb\u7edf",5e3):a.tips("\u8eab\u4efd\u4fe1\u606f\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55",5e3),a.props.history.push("/produceMSF/login"),a.loading(!1))},a.judgeCalendar=function(){if(3!=a.state.user.type&&4!=a.state.user.type){var e=new Date,t=new Date(e.getFullYear()+"."+(e.getMonth()+2)),n=(t-e)/864e5;if(n<7){n=n>1?"\u4e0d\u5230"+Math.ceil(n)+"\u5929":"\u53ea\u6709"+24*n+"\u5c0f\u65f6",a.confirm("\u63d0\u793a","\u8ddd\u79bb"+t.format("yyyy-MM")+"\u6708"+n+"\u4e86\uff0c\u662f\u5426\u7acb\u5373\u8bbe\u7f6e\u5de5\u4f5c\u65e5\u5386\uff1f",!0,function(){localStorage.judgeCal=1,window.ReactHistory.push("/produceMSF/calendar")},"\u5df2\u7ecf\u8bbe\u7f6e\u4e86","\u53bb\u8bbe\u7f6e")}}},a.confirm=function(e,t,n,r,l,i){a.setState({confirmOpen:n,confirmTitle:e,confirmContent:t,sureFun:r,cancelText:l,sureText:i})},a.closeFun=function(){a.setState({confirmOpen:!1})},a.changeLoginData=function(e){a.setState({user:e}),a.refs.messageBar.updateBarData(e.userName)},a.loading=function(e){a.setState({loading:!!e})},a.tips=function(e,t){e&&a.setState({tipInfo:e}),a.setState({tipsOpen:!0}),setTimeout(function(){a.setState({tipsOpen:!1})},t||4e3)},a.state={user:{},loading:!0},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.judgeUser(),window.loading=this.loading,this.autoLoginTime=0;var e=document.querySelectorAll("#processLoading")[0];setTimeout(function(){document.querySelectorAll("#initLoading")[0].remove(),e.className="end"},1e3),setTimeout(function(){},4e3)}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){this.state.autoLoginTimer&&clearTimeout(this.state.autoLoginTimer)}},{key:"render",value:function(){var e=this,t=(this.props,this.state),a=t.user,n=t.loading,l=t.sureText,i=t.cancelText;return window.ReactHistory=this.props.history,r.a.createElement("div",null,r.a.createElement(p.b,{path:"/"},r.a.createElement(Q,{ref:"messageBar",user:a,changeLoginData:function(t){return e.changeLoginData(t)},tips:this.tips})),r.a.createElement("div",{className:"page-container"},this.state.user.userName?r.a.createElement(p.b,{path:"/"},r.a.createElement("div",{id:"leftMenu"},r.a.createElement(se,{menuConfig:a})),r.a.createElement("div",{id:"rightContent"},r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/produceMSF/user",exact:!0,component:Re}),r.a.createElement(p.b,{path:"/produceMSF/user/queryUser",component:Re}),r.a.createElement(p.b,{path:"/produceMSF/user/queryUserAndPower",component:Ze}),r.a.createElement(p.b,{path:"/produceMSF/template/",component:it}),r.a.createElement(p.b,{path:"/produceMSF/template/handleTemplate",component:it}),r.a.createElement(p.b,{path:"/produceMSF/equipment",component:ut}),r.a.createElement(p.b,{path:"/produceMSF/handleIndent",exact:!0,component:$a}),r.a.createElement(p.b,{path:"/produceMSF/handleIndent/addIndent",exact:!0,component:$a}),r.a.createElement(p.b,{path:"/produceMSF/handleIndent/queryIndentStatus",component:Wt}),r.a.createElement(p.b,{path:"/produceMSF/handleIndent/exportProduceIndent",component:Tt}),r.a.createElement(p.b,{path:"/produceMSF/workTime",exact:!0,component:Jt}),r.a.createElement(p.b,{path:"/produceMSF/workTime/queryFactor",component:Jt}),r.a.createElement(p.b,{path:"/produceMSF/workTime/queryWorkTime",component:$t}),r.a.createElement(p.b,{path:"/produceMSF/workTime/queryProcedureWorkTime:type",component:$t}),r.a.createElement(p.b,{path:"/produceMSF/workTime/queryWorkTimeForProcedure",component:aa}),r.a.createElement(p.b,{path:"/produceMSF/workTime/queryWorkTimeForUser",component:oa}),r.a.createElement(p.b,{path:"/produceMSF/workTime/queryWorkTimeForEquipment",component:ma}),r.a.createElement(p.b,{path:"/produceMSF/produceIndent/queryProduceIndent",component:Ut}),r.a.createElement(p.b,{path:"/produceMSF/produceIndent/exportProduceIndent",component:Tt}),r.a.createElement(p.b,{path:"/produceMSF/produceShowPage",component:ha}),r.a.createElement(p.b,{path:"/produceMSF/dutyIndent",exact:!0,component:va}),r.a.createElement(p.b,{path:"/produceMSF/dutyIndent/info",component:Ia}),r.a.createElement(p.b,{path:"/produceMSF/dutyIndent/info:id",component:Ia}),r.a.createElement(p.b,{path:"/produceMSF/indent/info:indent",component:Ia}),r.a.createElement(p.b,{path:"/produceMSF/recycle",exact:!0,component:qa}),r.a.createElement(p.b,{path:"/produceMSF/recycle/template",component:qa}),r.a.createElement(p.b,{path:"/produceMSF/recycle/indent",component:La}),r.a.createElement(p.b,{path:"/produceMSF/calendar"},r.a.createElement(Ya,{tips:this.tips})),r.a.createElement(p.b,{path:"/produceMSF/Way",exact:!0}),r.a.createElement(p.b,{path:"/produceMSF/",component:Qa})))):r.a.createElement(p.b,{path:"/"},r.a.createElement(ge,{changeLoginData:function(t){return e.changeLoginData(t)},judgeCalendar:this.judgeCalendar,loading:this.loading,tips:this.tips}))),r.a.createElement(Be.a,{style:{marginTop:"70px"},anchorOrigin:{horizontal:"center",vertical:"top"},open:this.state.tipsOpen,ContentProps:{className:"info"},message:r.a.createElement("span",{id:"message-id"},this.state.tipInfo)}),r.a.createElement(_,{open:this.state.confirmOpen,ifAutoClose:function(){},title:this.state.confirmTitle,content:this.state.confirmContent,sureText:l,cancelText:i,closeFun:this.closeFun,sureFun:this.state.sureFun,ifInfo:!0}),n?r.a.createElement("div",{className:"backdrop"},r.a.createElement("div",{className:"absoluteCenter text-blue"},r.a.createElement(vt.a,{size:50}))):"")}}]),t}(r.a.Component),Za=function(e){function t(e){return Object(o.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(m.a,null,r.a.createElement(p.b,{path:"/",component:Ga})))}}]),t}(r.a.Component);window.forceRender=function(){i.a.render(r.a.createElement(Za,null),document.getElementById("root"))},i.a.render(r.a.createElement(Za,null),document.getElementById("root"))}},[[195,2,1,3]]]);